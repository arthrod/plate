"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57721],{57721:(e,t,r)=>{r.d(t,{P8:()=>T,PM:()=>E,qp:()=>b});var i=r(99019),n=r(5147),l=r(15457),o=r(99680),a=r(7620),d=r(48674),s=r(14796),u=r(28268),c=r(13526),g=r(49272),f=r(58872),p=r(31326),v=r(6388),m=r(99898),h=r(8155);function _(e){let t,r,n,l,o,d,s,u,p,v=(0,c.c)(22),{containerRef:m,enabled:h,height:_,minStrength:O,placement:D,scrollAreaProps:y,strengthMultiplier:b,zIndex:E}=e,T=void 0===h||h,R=void 0===_?100:_,w=void 0===O?.15:O,x=void 0===b?25:b,S=void 0===E?1e4:E,k=a.useRef(void 0),A=a.useRef(0),I=a.useRef(null),L="top"===D?-1:1,N=null==y?void 0:y.style;v[0]!==R||v[1]!==D||v[2]!==N||v[3]!==S?(t=(0,i._)({height:R,opacity:0,position:"fixed",width:"100%",zIndex:S},N),"top"===D?t.top=0:"bottom"===D&&(t.bottom=0),v[0]=R,v[1]=D,v[2]=N,v[3]=S,v[4]=t):t=v[4],v[5]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{A.current=0,I.current&&(f.cancel(I.current),I.current=null)},v[5]=r):r=v[5];let C=r;v[6]!==m||v[7]!==L||v[8]!==x?(n=()=>{let e=()=>{var t;let r=A.current;0===x||0===r?C():((null!=(t=null==m?void 0:m.current)?t:window).scrollBy(0,r*x*L),I.current=f(e))};e()},v[6]=m,v[7]=L,v[8]=x,v[9]=n):n=v[9];let P=n,M=a.useRef(void 0);v[10]!==L||v[11]!==w||v[12]!==P?(o=()=>{M.current=g(e=>{let t=k.current;if(!t)return;let{height:r,top:i}=t.getBoundingClientRect(),n=Math.max(Math.max(("touchmove"===e.type?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY}).y-i,0)/r,w);A.current=-1===L?1-n:n,!I.current&&A.current&&P()},100,{trailing:!1})},l=[L,w,P],v[10]=L,v[11]=w,v[12]=P,v[13]=l,v[14]=o):(l=v[13],o=v[14]),a.useEffect(o,l),v[15]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{var t;null==(t=M.current)||t.call(M,e)},v[15]=d):d=v[15];let B=d;return(v[16]!==T?(s=()=>{T||C()},u=[T],v[16]=T,v[17]=s,v[18]=u):(s=v[17],u=v[18]),a.useEffect(s,u),T)?(v[19]!==y||v[20]!==t?(p=a.createElement("div",(0,i._)({ref:k,style:t,onDragEnd:C,onDragLeave:C,onDragOver:B,onTouchMove:B},y)),v[19]=y,v[20]=t,v[21]=p):p=v[21],p):null}function O(e){let t,r=(0,c.c)(2);return r[0]!==e?(t=a.createElement(a.Fragment,null,a.createElement(_,(0,i._)({placement:"top"},e)),a.createElement(_,(0,i._)({placement:"bottom"},e))),r[0]=e,r[1]=t):t=r[1],t}function D(e){let t,r,n,l=(0,o.c)(8),d=(0,c.c)(8),s=(0,u.gO)(b,"isDragging"),[g,f]=a.useState(!1);if(d[0]!==s){let e;l[0]!==s?(e=()=>{if(s){let e=setTimeout(()=>{f(!0)},100);return()=>clearTimeout(e)}f(!1)},l[0]=s,l[1]=e):e=l[1],t=e,d[0]=s,d[1]=t}else t=d[1];if(d[2]!==s||d[3]!==g){let e;l[2]!==s||l[3]!==g?(e=[s,g],l[2]=s,l[3]=g,l[4]=e):e=l[4],r=e,d[2]=s,d[3]=g,d[4]=r}else r=d[4];a.useEffect(t,r);let p=s&&g;if(d[5]!==e||d[6]!==p){let t;l[5]!==e||l[6]!==p?(t=a.createElement(O,(0,i._)({enabled:p},e)),l[5]=e,l[6]=p,l[7]=t):t=l[7],n=t,d[5]=e,d[6]=p,d[7]=n}else n=d[7];return n}let y="block",b=(0,u.e3)({key:d.t.dnd,editOnly:!0,handlers:{onDragEnd:e=>{let{editor:t,plugin:r}=e;t.setOption(r,"isDragging",!1),t.setOption(r,"dropTarget",{id:null,line:""})},onDragEnter:e=>{let{editor:t,plugin:r}=e;t.setOption(r,"_isOver",!0)},onDragStart:e=>{let{editor:t,event:r,plugin:i}=e,n=r.target,l=r.dataTransfer;l.effectAllowed="move",l.dropEffect="move";let o=n.dataset.blockId;o&&(t.setOption(i,"draggingId",o),t.setOption(i,"isDragging",!0),t.setOption(i,"_isOver",!0))},onDrop:e=>{let{getOptions:t}=e;return t().isDragging},onFocus:e=>{var t,r;let{editor:i,plugin:n}=e;i.setOption(n,"isDragging",!1),i.setOption(n,"dropTarget",{id:null,line:""}),i.setOption(n,"_isOver",!1),null==(r=i.getOption(n,"multiplePreviewRef"))||null==(t=r.current)||t.replaceChildren()}},options:{_isOver:!1,draggingId:null,dropTarget:{id:null,line:""},isDragging:!1,multiplePreviewRef:null},useHooks:e=>{let{editor:t,setOption:r}=e,i=(0,a.useCallback)(e=>{if(e.target instanceof Node){let i=t.api.toDOMNode(t);i&&!(e.target===i||i.contains(e.target))&&r("dropTarget",void 0)}},[t,r]),n=(0,a.useCallback)(()=>{r("_isOver",!1),r("dropTarget",void 0)},[r]);(0,a.useEffect)(()=>(document.addEventListener("dragleave",i,!0),document.addEventListener("drop",n,!0),()=>{document.removeEventListener("dragleave",i,!0),document.removeEventListener("drop",n,!0)}),[i,n])}}).extend(e=>{let{getOptions:t}=e;return{render:{afterEditable:t().enableScroller?()=>{var e;return a.createElement(D,null==(e=t())?void 0:e.scrollerProps)}:void 0}}}),E=e=>{let{orientation:t="vertical",type:r=y,onDropHandler:n}=e,l=(0,u.Q_)(),o=a.useRef(null),d=a.useRef(null);if(!l.plugins.dnd)return{};let{dragRef:s,isAboutToDrag:c,isDragging:g}=S((0,i._)({multiplePreviewRef:d,nodeRef:o,orientation:t,type:r,onDropHandler:n},e));return{isAboutToDrag:c,isDragging:g,nodeRef:o,previewRef:d,handleRef:s}},T=e=>{var t;let r,i,n=(0,o.c)(5),l=(0,c.c)(5);if(l[0]!==e){let t;n[0]!==e?(t=void 0===e?{}:e,n[0]=e,n[1]=t):t=n[1],r=t,l[0]=e,l[1]=r}else r=l[1];let{id:a,orientation:d}=r,s=void 0===d?"vertical":d,g=(0,u.iQ)(),f=a||g.id,p=null!=(t=(0,u.Jz)(b,e=>{let{dropTarget:t}=e;return t&&t.id===f?t.line:null}))?t:"";if(s&&("vertical"===s&&("left"===p||"right"===p)||"horizontal"===s&&("top"===p||"bottom"===p))){let e;if(l[2]===Symbol.for("react.memo_cache_sentinel")){let t;n[2]===Symbol.for("react.memo_cache_sentinel")?(t={dropLine:""},n[2]=t):t=n[2],e=t,l[2]=e}else e=l[2];return e}if(l[3]!==p){let e;n[3]!==p?(e={dropLine:p},n[3]=p,n[4]=e):e=n[4],i=e,l[3]=p,l[4]=i}else i=l[4];return i};function R(e){return{isDragging:e.isDragging()}}let w=(e,t)=>{let r,i,n,{canDropNode:l,dragItem:o,element:a,monitor:d,nodeRef:u,orientation:c="vertical"}=t,g=(e=>{var t;let{dragItem:r,element:i,monitor:n,nodeRef:l,orientation:o="vertical"}=e;if(!l.current||i===r.element||(Array.isArray(r.id)?r.id:[r.id]).includes(i.id))return;let a=null==(t=l.current)?void 0:t.getBoundingClientRect();if(!a)return;let d=n.getClientOffset();if(d)if("vertical"===o){let e=(a.bottom-a.top)/2,t=d.y-a.top;if(t<e)return"top";if(t>=e)return"bottom"}else{let e=(a.right-a.left)/2;return d.x-a.left<e?"left":"right"}})({dragItem:o,element:a,monitor:d,nodeRef:u,orientation:c});if(!g)return;if("element"in o){let t=e.api.findPath(o.element),n=e.api.findPath(a);if(!t||!n)return;r=[o.element,t],i=[a,n]}else i=e.api.node({id:a.id,at:[]});if(!i||l&&r&&!l({dragEntry:r,dragItem:o,dropEntry:i,editor:e})||!d.canDrop())return;let f=null==r?void 0:r[1],p=i[1];if(("bottom"===g||"right"===g)&&(n=p,f&&s.s2.equals(f,s.s2.next(n)))||("top"===g||"left"===g)&&(n=[...p.slice(0,-1),p.at(-1)-1],f&&s.s2.equals(f,n)))return;let v=n;return{direction:g,dragPath:f,to:f&&s.s2.isBefore(f,v)&&s.s2.isSibling(f,v)?v:s.s2.next(v)}};function x(e){return{isOver:e.isOver({shallow:!0})}}let S=e=>{var t;let r,d,g,f,_,O,D,E,T,S,k,A,I,L,N=(0,o.c)(11),C=(0,c.c)(20),{canDropNode:P,drag:M,drop:B,element:F,multiplePreviewRef:q,nodeRef:z,orientation:H,preview:Q,type:X,onDropHandler:Y}=e,J=void 0===H?"vertical":H,Z=void 0===Q?{}:Q,j=void 0===X?y:X,G=(0,u.Q_)();if(C[0]!==M||C[1]!==F||C[2]!==j){let e;N[0]!==M||N[1]!==F||N[2]!==j?(e=(0,i._)({element:F,type:j},M),N[0]=M,N[1]=F,N[2]=j,N[3]=e):e=N[3],r=e,C[0]=M,C[1]=F,C[2]=j,C[3]=r}else r=C[3];let[K,U,V]=((e,t)=>{let r,o,d,s,u,g,f,p,v,h=(0,c.c)(23);h[0]!==t?({element:d,item:r}=t,o=(0,l._)(t,["element","item"]),h[0]=t,h[1]=r,h[2]=o,h[3]=d):(r=h[1],o=h[2],d=h[3]);let _=d.id,[O,D]=a.useState(!1);h[4]!==e||h[5]!==_||h[6]!==r||h[7]!==o?(s=()=>(0,i._)({canDrag:()=>(D(!0),!0),collect:R,end:()=>{e.setOption(b,"isDragging",!1),document.body.classList.remove("dragging"),D(!1)},item(t){let n;e.setOption(b,"isDragging",!0),e.setOption(b,"_isOver",!0),document.body.classList.add("dragging");let l="function"==typeof r?r(t):r,[o]=e.api.node({id:_,at:[]}),a=e.getOption(b,"draggingId");return Array.isArray(a)&&a.length>1&&a.includes(_)?n=Array.from(a):(n=_,e.setOption(b,"draggingId",_)),(0,i._)({id:n,editor:e,editorId:e.id,element:o},l)}},o),h[4]=e,h[5]=_,h[6]=r,h[7]=o,h[8]=s):s=h[8],h[9]!==e||h[10]!==_?(u=[e,_],h[9]=e,h[10]=_,h[11]=u):u=h[11];let[y,E,T]=(0,m.i)(s,u);return h[12]!==y.isDragging||h[13]!==O?(g=()=>{!y.isDragging&&O&&D(!1)},f=[y.isDragging,O],h[12]=y.isDragging,h[13]=O,h[14]=g,h[15]=f):(g=h[14],f=h[15]),a.useEffect(g,f),h[16]!==y||h[17]!==O?(p=(0,n._)((0,i._)({},y),{isAboutToDrag:O}),h[16]=y,h[17]=O,h[18]=p):p=h[18],h[19]!==E||h[20]!==T||h[21]!==p?(v=[p,E,T],h[19]=E,h[20]=T,h[21]=p,h[22]=v):v=h[22],v})(G,r),{isAboutToDrag:W,isDragging:$}=K;if(C[4]!==j){let e;N[4]!==j?(e=[j,p.FILE],N[4]=j,N[5]=e):e=N[5],d=e,C[4]=j,C[5]=d}else d=C[5];C[6]!==P||C[7]!==B||C[8]!==F||C[9]!==q||C[10]!==z||C[11]!==Y||C[12]!==J||C[13]!==d?(g=(0,i._)({accept:d,canDropNode:P,element:F,multiplePreviewRef:q,nodeRef:z,orientation:J,onDropHandler:Y},B),C[6]=P,C[7]=B,C[8]=F,C[9]=q,C[10]=z,C[11]=Y,C[12]=J,C[13]=d,C[14]=g):g=C[14];let[ee,et]=(t=g,(I=(0,c.c)(23))[0]!==t?({canDropNode:_,element:O,nodeRef:D,orientation:S,onDropHandler:E}=t,T=(0,l._)(t,["canDropNode","element","nodeRef","orientation","onDropHandler"]),I[0]=t,I[1]=_,I[2]=O,I[3]=D,I[4]=E,I[5]=T,I[6]=S):(_=I[1],O=I[2],D=I[3],E=I[4],T=I[5],S=I[6]),L=O.id,I[7]!==_||I[8]!==G||I[9]!==O||I[10]!==L||I[11]!==D||I[12]!==E||I[13]!==S?(k=(e,t)=>{if(!e.id){let r=w(G,{canDropNode:_,dragItem:e,element:O,monitor:t,nodeRef:D,orientation:S}),i=G.getOptions(b).onDropFiles;if(!r||!i)return;return i({id:L,dragItem:e,editor:G,monitor:t,nodeRef:D,target:r.to})}E&&E(G,{id:L,dragItem:e,monitor:t,nodeRef:D})||((e,t)=>{let{canDropNode:r,dragItem:i,element:n,monitor:l,nodeRef:o,orientation:a="vertical"}=t,d=w(e,{canDropNode:r,dragItem:i,element:n,monitor:l,nodeRef:o,orientation:a});if(!d)return;let{dragPath:u,to:c}=d;if(i.editorId===e.id){let t=Array.isArray(i.id)?i.id:[i.id];if(t.length>1){let r=[];t.forEach(t=>{let i=e.api.node({id:t,at:[]});i&&r.push(i[0])}),e.tf.moveNodes({at:[],to:c,match:e=>r.some(t=>t.id===e.id)})}else e.tf.moveNodes({at:u,to:c})}else{e.tf.insertNodes(i.element,{at:c});let t=i.editor;t&&(Array.isArray(i.id)?i.id:i.id?[i.id]:[]).map(e=>t.api.node({id:e,at:[]})).filter(e=>!!e).map(e=>{let[,t]=e;return t}).sort((e,t)=>s.s2.compare(t,e)).forEach(e=>{t.tf.removeNodes({at:e})})}})(G,{canDropNode:_,dragItem:e,element:O,monitor:t,nodeRef:D,orientation:S})},I[7]=_,I[8]=G,I[9]=O,I[10]=L,I[11]=D,I[12]=E,I[13]=S,I[14]=k):k=I[14],I[15]!==_||I[16]!==G||I[17]!==O||I[18]!==D||I[19]!==T||I[20]!==S||I[21]!==k?(A=(0,i._)({collect:x,drop:k,hover(e,t){((e,t)=>{var r,i;let{canDropNode:n,dragItem:l,element:o,monitor:a,nodeRef:d,orientation:u="vertical"}=t,{_isOver:c,dropTarget:g}=e.getOptions(b),f=null!=(r=null==g?void 0:g.id)?r:null,p=null!=(i=null==g?void 0:g.line)?i:"",v=w(e,{canDropNode:n,dragItem:l,element:o,monitor:a,nodeRef:d,orientation:u});if(!v){(f||p)&&e.setOption(b,"dropTarget",{id:null,line:""});return}let{direction:m}=v,h={id:o.id,line:m};if(h.id!==f||h.line!==p){if(!c)return;if("top"===h.line){let t=s.s2.previous(e.api.findPath(o));if(!t)return e.setOption(b,"dropTarget",h);let r=s.lZ.get(e,t);return e.setOption(b,"dropTarget",{id:null==r?void 0:r.id,line:"bottom"})}e.setOption(b,"dropTarget",h)}m&&e.api.isExpanded()&&(e.tf.focus(),e.tf.collapse())})(G,{canDropNode:_,dragItem:e,element:O,monitor:t,nodeRef:D,orientation:S})}},T),I[15]=_,I[16]=G,I[17]=O,I[18]=D,I[19]=T,I[20]=S,I[21]=k,I[22]=A):A=I[22],(0,h.H)(A)),{isOver:er}=ee;if(et(z),Z.disable?V((0,v.n)(),{captureDraggingState:!0}):V(Z.ref?Z.ref:q),C[15]!==U||C[16]!==W||C[17]!==$||C[18]!==er){let e;N[6]!==U||N[7]!==W||N[8]!==$||N[9]!==er?(e={dragRef:U,isAboutToDrag:W,isDragging:$,isOver:er},N[6]=U,N[7]=W,N[8]=$,N[9]=er,N[10]=e):e=N[10],f=e,C[15]=U,C[16]=W,C[17]=$,C[18]=er,C[19]=f}else f=C[19];return f}}}]);