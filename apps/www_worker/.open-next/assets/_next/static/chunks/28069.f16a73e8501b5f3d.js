"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28069],{28069:(e,t,n)=>{n.r(t),n.d(t,{InlineCombobox:()=>S,InlineComboboxContent:()=>R,InlineComboboxEmpty:()=>B,InlineComboboxGroup:()=>Q,InlineComboboxGroupLabel:()=>T,InlineComboboxInput:()=>A,InlineComboboxItem:()=>O,InlineComboboxRow:()=>F});var r=n(99019),o=n(5147),l=n(15457),a=n(54568),s=n(99680),u=n(7620),i=n(50786),c=n(55785),d=n(86648),f=n(36314),v=n(29593),p=n(54098),m=n(39704),x=n(79556),h=n(87595),b=n(43881),g=n(34572),w=n(13526),I=n(13988),_=n(76284),E=n(28268),C=n(92405),k=n(30507),y=n(41816),N=n(87536);let L=u.createContext(null),j=(e,t)=>{let{group:n,keywords:r=[],label:o,value:l}=e;return Array.from(new Set([l,...r,n,o].filter(Boolean))).some(e=>(0,g.k)(e,t))},S=e=>{let{children:t,element:n,filter:r=j,hideWhenNoValue:o=!1,setValue:l,showTrigger:s=!0,trigger:d,value:f}=e,v=(0,E.Q_)(),p=u.useRef(null),m=(e=>{let t,n,r,o,l=(0,w.c)(9),[a,s]=(0,u.useState)(!1),[i,c]=(0,u.useState)(!1);l[0]!==e?(t=()=>{setTimeout(()=>{if(!e.current)return;let{selectionEnd:t,selectionStart:n,value:r}=e.current;s(0===n),c(t===r.length)})},l[0]=e,l[1]=t):t=l[1];let d=t;return l[2]!==d||l[3]!==e?(n=()=>{d();let t=e.current;if(t)return t.addEventListener("input",d),t.addEventListener("selectionchange",d),t.addEventListener("keydown",d),t.addEventListener("pointerdown",d),t.addEventListener("pointerup",d),()=>{t.removeEventListener("input",d),t.removeEventListener("selectionchange",d),t.removeEventListener("keydown",d),t.removeEventListener("pointerdown",d),t.removeEventListener("pointerup",d)}},r=[d,e],l[2]=d,l[3]=e,l[4]=n,l[5]=r):(n=l[4],r=l[5]),(0,u.useEffect)(n,r),l[6]!==i||l[7]!==a?(o={atEnd:i,atStart:a},l[6]=i,l[7]=a,l[8]=o):o=l[8],o})(p),[x,h]=u.useState(""),b=void 0!==f,g=b?f:x,k=u.useMemo(()=>{let e=n.userId,t=v.meta.userId;return!e||e===t},[v.meta.userId,n]),y=u.useCallback(e=>{null==l||l(e),b||h(e)},[l,b]),N=u.useRef(null);u.useEffect(()=>{let e=v.api.findPath(n);if(!e)return;let t=v.api.before(e);if(!t)return;let r=v.api.pointRef(t);return N.current=r.current,()=>{r.unref()}},[v,n]);let{props:S,removeInput:A}=(e=>{var t,n;let r,o,l,a,s,i,c,d,f,v,p=(0,w.c)(35),{autoFocus:m,cancelInputOnArrowLeftRight:x,cancelInputOnBackspace:h,cancelInputOnBlur:b,cancelInputOnDeselect:g,cancelInputOnEscape:k,cursorState:y,forwardUndoRedoToEditor:N,ref:L,onCancelInput:j}=e,S=void 0===m||m,A=void 0===x||x,R=void 0===h||h,D=void 0===b||b,O=void 0===g||g,B=void 0===k||k,F=void 0===N||N,Q=(0,E.Q_)(),T=(0,E.iQ)(),z=(0,C.f7)(),G=null!=(t=null==y?void 0:y.atStart)&&t,K=null!=(n=null==y?void 0:y.atEnd)&&n;p[0]!==Q.api||p[1]!==Q.tf||p[2]!==T?(r=e=>{let t=Q.api.findPath(T);t&&(Q.tf.removeNodes({at:t}),void 0!==e&&e&&Q.tf.focus())},p[0]=Q.api,p[1]=Q.tf,p[2]=T,p[3]=r):r=p[3];let M=r;p[4]!==j||p[5]!==M?(o=(e,t)=>{M(void 0!==t&&t),null==j||j(void 0===e?"manual":e)},p[4]=j,p[5]=M,p[6]=o):o=p[6];let P=o;p[7]!==S||p[8]!==L?(l=()=>{var e;S&&(null==(e=L.current)||e.focus())},a=[S,L],p[7]=S,p[8]=L,p[9]=l,p[10]=a):(l=p[9],a=p[10]),(0,u.useEffect)(l,a);let U=(0,u.useRef)(z);return p[11]!==P||p[12]!==O||p[13]!==z?(s=()=>{U.current&&!z&&O&&P("deselect"),U.current=z},i=[z,O,P],p[11]=P,p[12]=O,p[13]=z,p[14]=s,p[15]=i):(s=p[14],i=p[15]),(0,u.useEffect)(s,i),p[16]!==P||p[17]!==D?(c=()=>{D&&P("blur")},p[16]=P,p[17]=D,p[18]=c):c=p[18],p[19]!==P||p[20]!==A||p[21]!==R||p[22]!==B||p[23]!==K||p[24]!==G||p[25]!==Q||p[26]!==F?(d=e=>{B&&(0,I.v_)("escape",e)&&P("escape",!0),R&&G&&(0,I.v_)("backspace",e)&&P("backspace",!0),A&&G&&(0,I.v_)("arrowleft",e)&&P("arrowLeft",!0),A&&K&&(0,I.v_)("arrowright",e)&&P("arrowRight",!0);let t=_.t.isUndo(e)&&Q.history.undos.length>0,n=_.t.isRedo(e)&&Q.history.redos.length>0;F&&(t||n)&&(e.preventDefault(),Q[t?"undo":"redo"](),Q.tf.focus())},p[19]=P,p[20]=A,p[21]=R,p[22]=B,p[23]=K,p[24]=G,p[25]=Q,p[26]=F,p[27]=d):d=p[27],p[28]!==c||p[29]!==d?(f={onBlur:c,onKeyDown:d},p[28]=c,p[29]=d,p[30]=f):f=p[30],p[31]!==P||p[32]!==M||p[33]!==f?(v={cancelInput:P,props:f,removeInput:M},p[31]=P,p[32]=M,p[33]=f,p[34]=v):v=p[34],v})({cancelInputOnBlur:!0,cursorState:m,autoFocus:k,ref:p,onCancelInput:e=>{if("backspace"!==e){var t;v.tf.insertText(d+g,{at:null!=(t=null==N?void 0:N.current)?t:void 0})}("arrowLeft"===e||"arrowRight"===e)&&v.tf.move({distance:1,reverse:"arrowLeft"===e})}}),[R,D]=u.useState(!1),O=u.useMemo(()=>({filter:r,inputProps:S,inputRef:p,removeInput:A,setHasEmpty:D,showTrigger:s,trigger:d}),[d,s,r,p,S,A,D]),B=(0,i.KQ)({setValue:e=>u.startTransition(()=>y(e))}),F=B.useState("items");return u.useEffect(()=>{B.getState().activeId||B.setActiveId(B.first())},[F,B]),(0,a.jsx)("span",{contentEditable:!1,children:(0,a.jsx)(c.v,{open:(F.length>0||R)&&(!o||g.length>0),store:B,children:(0,a.jsx)(L.Provider,{value:O,children:t})})})},A=e=>{let{className:t,ref:n}=e,o=(0,l._)(e,["className","ref"]),{inputProps:s,inputRef:i,showTrigger:c,trigger:v}=u.useContext(L),p=(0,d.Ay)().useState("value"),m=(0,y.rF)(n,i);return(0,a.jsxs)(a.Fragment,{children:[c&&v,(0,a.jsxs)("span",{className:"relative min-h-[1lh]",children:[(0,a.jsx)("span",{className:"invisible overflow-hidden text-nowrap","aria-hidden":"true",children:p||"â€‹"}),(0,a.jsx)(f.G,(0,r._)({ref:m,className:(0,N.cn)("absolute top-0 left-0 size-full bg-transparent outline-none",t),value:p,autoSelect:!0},s,o))]})]})};A.displayName="InlineComboboxInput";let R=e=>{let t,n,o,u,i,c=(0,s.c)(11);c[0]!==e?({className:t}=e,n=(0,l._)(e,["className"]),c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]);let f=(0,d.Ay)();c[3]!==f?(o=function(e){if(!f)return;let{items:t,activeId:n}=f.getState();if(!t.length)return;let r=t.findIndex(e=>e.id===n);"ArrowUp"===e.key&&r<=0?(e.preventDefault(),f.setActiveId(f.last())):"ArrowDown"===e.key&&r>=t.length-1&&(e.preventDefault(),f.setActiveId(f.first()))},c[3]=f,c[4]=o):o=c[4];let m=o;return c[5]!==t?(u=(0,N.cn)("z-500 max-h-[288px] w-[300px] overflow-y-auto rounded-md bg-popover shadow-md",t),c[5]=t,c[6]=u):u=c[6],c[7]!==m||c[8]!==n||c[9]!==u?(i=(0,a.jsx)(v.Z,{children:(0,a.jsx)(p.N,(0,r._)({className:u,onKeyDownCapture:m},n))}),c[7]=m,c[8]=n,c[9]=u,c[10]=i):i=c[10],i},D=(0,k.F)("relative mx-1 flex h-[28px] select-none items-center rounded-sm px-2 text-foreground text-sm outline-none [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{defaultVariants:{interactive:!0},variants:{interactive:{false:"",true:"cursor-pointer transition-colors hover:bg-accent hover:text-accent-foreground data-[active-item=true]:bg-accent data-[active-item=true]:text-accent-foreground"}}}),O=e=>{let{className:t,focusEditor:n=!0,group:o,keywords:s,label:i,onClick:c}=e,f=(0,l._)(e,["className","focusEditor","group","keywords","label","onClick"]),{value:v}=f,{filter:p,removeInput:x}=u.useContext(L),h=(0,d.Ay)(),b=p&&h.useState("value");return u.useMemo(()=>!p||p({group:o,keywords:s,label:i,value:v},b),[p,o,s,i,v,b])?(0,a.jsx)(m.x,(0,r._)({className:(0,N.cn)(D(),t),onClick:e=>{x(n),null==c||c(e)}},f)):null},B=e=>{let{children:t,className:n}=e,{setHasEmpty:r}=u.useContext(L),o=(0,d.Ay)().useState("items");return(u.useEffect(()=>(r(!0),()=>{r(!1)}),[r]),o.length>0)?null:(0,a.jsx)("div",{className:(0,N.cn)(D({interactive:!1}),n),children:t})},F=x.Y;function Q(e){let t,n,u,i,c=(0,s.c)(8);return c[0]!==e?({className:t}=e,n=(0,l._)(e,["className"]),c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]),c[3]!==t?(u=(0,N.cn)("hidden not-last:border-b py-1.5 [&:has([role=option])]:block",t),c[3]=t,c[4]=u):u=c[4],c[5]!==n||c[6]!==u?(i=(0,a.jsx)(h.D,(0,o._)((0,r._)({},n),{className:u})),c[5]=n,c[6]=u,c[7]=i):i=c[7],i}function T(e){let t,n,u,i,c=(0,s.c)(8);return c[0]!==e?({className:t}=e,n=(0,l._)(e,["className"]),c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]),c[3]!==t?(u=(0,N.cn)("mt-1.5 mb-2 px-3 font-medium text-muted-foreground text-xs",t),c[3]=t,c[4]=u):u=c[4],c[5]!==n||c[6]!==u?(i=(0,a.jsx)(b.r,(0,o._)((0,r._)({},n),{className:u})),c[5]=n,c[6]=u,c[7]=i):i=c[7],i}}}]);