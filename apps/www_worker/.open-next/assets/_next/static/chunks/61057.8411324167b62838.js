"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61057],{4167:(e,t,n)=>{n.d(t,{J_:()=>x,Kx:()=>u,cq:()=>f,ii:()=>i});var s=n(99680),r=n(73446),l=n(13988),o=n(60621),a=n(28268),c=n(7620);let i=(0,a.HS)(r.n),x=(0,a.HS)(r.t),u=e=>{let t,n,r=(0,s.c)(6),{element:l,katexRef:a,options:i}=e;r[0]!==l.texExpression||r[1]!==a||r[2]!==i?(t=()=>{a.current&&o.Ay.render(l.texExpression,a.current,i)},r[0]=l.texExpression,r[1]=a,r[2]=i,r[3]=t):t=r[3],r[4]!==l.texExpression?(n=[l.texExpression],r[4]=l.texExpression,r[5]=n):n=r[5],c.useEffect(t,n)},f=e=>{let t,n,r,o,i,x,u,f,p,m,d=(0,s.c)(34),{isInline:h,open:E,onClose:g}=e,_=(0,a.Q_)(),b=(0,a.iQ)(),v=(0,c.useRef)(null),[j,y]=c.useState(b.texExpression),N=(0,c.useRef)(b.texExpression);d[0]!==b.texExpression||d[1]!==h||d[2]!==E?(t=()=>{E&&setTimeout(()=>{v.current&&(v.current.focus(),v.current.select(),h&&(N.current=b.texExpression))},0)},d[0]=b.texExpression,d[1]=h,d[2]=E,d[3]=t):t=d[3],d[4]!==E?(n=[E],d[4]=E,d[5]=n):n=d[5],(0,c.useEffect)(t,n),d[6]!==_.tf||d[7]!==b||d[8]!==j||d[9]!==h?(r=()=>{let e=()=>{_.tf.setNodes({texExpression:j||""},{at:b})};h?_.tf.withMerging(e):e()},d[6]=_.tf,d[7]=b,d[8]=j,d[9]=h,d[10]=r):r=d[10],d[11]!==j?(o=[j],d[11]=j,d[12]=o):o=d[12],(0,c.useEffect)(r,o),d[13]!==g?(i=()=>{null==g||g()},d[13]=g,d[14]=i):i=d[14];let w=i;d[15]!==_.tf||d[16]!==b||d[17]!==h||d[18]!==g?(x=()=>{h&&_.tf.setNodes({texExpression:N.current},{at:b}),null==g||g()},d[15]=_.tf,d[16]=b,d[17]=h,d[18]=g,d[19]=x):x=d[19];let q=x;return d[20]===Symbol.for("react.memo_cache_sentinel")?(u=e=>{y(e.target.value)},d[20]=u):u=d[20],d[21]!==_.tf||d[22]!==b||d[23]!==h||d[24]!==q||d[25]!==w?(f=e=>{if((0,l.v_)("enter")(e)?(e.preventDefault(),w()):(0,l.v_)("escape")(e)&&(e.preventDefault(),q()),h){let{selectionEnd:t,selectionStart:n,value:s}=e.target;0===n&&0===t&&(0,l.v_)("ArrowLeft")(e)&&(e.preventDefault(),_.tf.select(b,{focus:!0,previous:!0})),t===s.length&&n===s.length&&(0,l.v_)("ArrowRight")(e)&&(e.preventDefault(),_.tf.select(b,{focus:!0,next:!0}))}},d[21]=_.tf,d[22]=b,d[23]=h,d[24]=q,d[25]=w,d[26]=f):f=d[26],d[27]!==j||d[28]!==f?(p={value:j,onChange:u,onKeyDown:f},d[27]=j,d[28]=f,d[29]=p):p=d[29],d[30]!==q||d[31]!==w||d[32]!==p?(m={props:p,ref:v,onDismiss:q,onSubmit:w},d[30]=q,d[31]=w,d[32]=p,d[33]=m):m=d[33],m}},61057:(e,t,n)=>{n.r(t),n.d(t,{EquationElement:()=>b,InlineEquationElement:()=>v});var s=n(99019),r=n(5147),l=n(15457),o=n(54568),a=n(99680),c=n(7620),i=n(91447),x=n(4167),u=n(30589),f=n(7121),p=n(80263),m=n(92405),d=n(28268),h=n(41816),E=n(93955),g=n(54866),_=n(87536);function b(e){let t,n,l,i,u,p,h,E,b=(0,a.c)(20),v=(0,m.f7)(),[j,y]=c.useState(v),w=c.useRef(null);b[0]===Symbol.for("react.memo_cache_sentinel")?(t={displayMode:!0,errorColor:"#cc0000",fleqn:!1,leqno:!1,macros:{"\\f":"#1f(#2)"},output:"htmlAndMathml",strict:"warn",throwOnError:!1,trust:!1},b[0]=t):t=b[0],b[1]!==e.element?(n={element:e.element,katexRef:w,options:t},b[1]=e.element,b[2]=n):n=b[2],(0,x.Kx)(n);let q=0===e.element.texExpression.length?"bg-muted p-3 pr-9":"px-2 py-1";return b[3]!==q?(l=(0,_.cn)("group flex cursor-pointer select-none items-center justify-center rounded-sm hover:bg-primary/10 data-[selected=true]:bg-primary/10",q),b[3]=q,b[4]=l):l=b[4],b[5]!==e.element.texExpression.length?(i=e.element.texExpression.length>0?(0,o.jsx)("span",{ref:w}):(0,o.jsxs)("div",{className:"flex h-7 w-full items-center gap-2 whitespace-nowrap text-muted-foreground text-sm",children:[(0,o.jsx)(f.A,{className:"size-6 text-muted-foreground/80"}),(0,o.jsx)("div",{children:"Add a Tex equation"})]}),b[5]=e.element.texExpression.length,b[6]=i):i=b[6],b[7]!==v||b[8]!==l||b[9]!==i?(u=(0,o.jsx)(g.Wv,{asChild:!0,children:(0,o.jsx)("div",{className:l,"data-selected":v,contentEditable:!1,role:"button",children:i})}),b[7]=v,b[8]=l,b[9]=i,b[10]=u):u=b[10],b[11]!==j?(p=(0,o.jsx)(N,{open:j,placeholder:"f(x) = \\begin{cases}\n  x^2, &\\quad x > 0 \\\\\n  0, &\\quad x = 0 \\\\\n  -x^2, &\\quad x < 0\n\\end{cases}",isInline:!1,setOpen:y}),b[11]=j,b[12]=p):p=b[12],b[13]!==j||b[14]!==u||b[15]!==p?(h=(0,o.jsxs)(g.AM,{open:j,onOpenChange:y,modal:!1,children:[u,p]}),b[13]=j,b[14]=u,b[15]=p,b[16]=h):h=b[16],b[17]!==e||b[18]!==h?(E=(0,o.jsxs)(d.tc,(0,r._)((0,s._)({className:"my-1"},e),{children:[h,e.children]})),b[17]=e,b[18]=h,b[19]=E):E=b[19],E}function v(e){let t,n,l,i,u,p,h,E,b,v,y,w,q,A,S=(0,a.c)(31),C=e.element,k=c.useRef(null),D=(0,m.f7)();S[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],S[0]=t):t=S[0];let O=(0,d.QR)(j,t),[M,Q]=c.useState(D&&O);S[1]!==O||S[2]!==D?(n=()=>{D&&O&&Q(!0)},l=[D,O],S[1]=O,S[2]=D,S[3]=n,S[4]=l):(n=S[3],l=S[4]),c.useEffect(n,l),S[5]===Symbol.for("react.memo_cache_sentinel")?(i={displayMode:!0,errorColor:"#cc0000",fleqn:!1,leqno:!1,macros:{"\\f":"#1f(#2)"},output:"htmlAndMathml",strict:"warn",throwOnError:!1,trust:!1},S[5]=i):i=S[5],S[6]!==C?(u={element:C,katexRef:k,options:i},S[6]=C,S[7]=u):u=S[7],(0,x.Kx)(u),S[8]===Symbol.for("react.memo_cache_sentinel")?(p=(0,_.cn)("mx-1 inline-block select-none rounded-sm [&_.katex-display]:my-0!"),S[8]=p):p=S[8];let R=(C.texExpression.length>0&&M||D)&&"after:bg-brand/15",I=0===C.texExpression.length&&"text-muted-foreground after:bg-neutral-500/10";S[9]!==R||S[10]!==I?(h=(0,_.cn)('after:-top-0.5 after:-left-1 after:absolute after:inset-0 after:z-1 after:h-[calc(100%)+4px] after:w-[calc(100%+8px)] after:rounded-sm after:content-[""]',"h-6",R,I),S[9]=R,S[10]=I,S[11]=h):h=S[11];let K=0===C.texExpression.length&&"hidden";return S[12]!==K?(E=(0,_.cn)(K,"font-mono leading-none"),S[12]=K,S[13]=E):E=S[13],S[14]!==E?(b=(0,o.jsx)("span",{ref:k,className:E}),S[14]=E,S[15]=b):b=S[15],S[16]!==C.texExpression.length?(v=0===C.texExpression.length&&(0,o.jsxs)("span",{children:[(0,o.jsx)(f.A,{className:"mr-1 inline-block h-[19px] w-4 py-[1.5px] align-text-bottom"}),"New equation"]}),S[16]=C.texExpression.length,S[17]=v):v=S[17],S[18]!==b||S[19]!==v||S[20]!==h?(y=(0,o.jsx)(g.Wv,{asChild:!0,children:(0,o.jsxs)("div",{className:h,contentEditable:!1,children:[b,v]})}),S[18]=b,S[19]=v,S[20]=h,S[21]=y):y=S[21],S[22]!==M?(w=(0,o.jsx)(N,{className:"my-auto",open:M,placeholder:"E = mc^2",setOpen:Q,isInline:!0}),S[22]=M,S[23]=w):w=S[23],S[24]!==M||S[25]!==y||S[26]!==w?(q=(0,o.jsxs)(g.AM,{open:M,onOpenChange:Q,modal:!1,children:[y,w]}),S[24]=M,S[25]=y,S[26]=w,S[27]=q):q=S[27],S[28]!==e||S[29]!==q?(A=(0,o.jsxs)(d.tc,(0,r._)((0,s._)({},e),{className:p,children:[q,e.children]})),S[28]=e,S[29]=q,S[30]=A):A=S[30],A}function j(e){return e.api.isCollapsed()}let y=(0,h.BI)(i.A)({propsHook:x.cq}),N=e=>{let t,n,r,i,x,f,h,b,v,j,N,q,A,S,C=(0,a.c)(32);C[0]!==e?({className:t,isInline:n,open:r,setOpen:x}=e,i=(0,l._)(e,["className","isInline","open","setOpen"]),C[0]=e,C[1]=t,C[2]=n,C[3]=r,C[4]=i,C[5]=x):(t=C[1],n=C[2],r=C[3],i=C[4],x=C[5]);let k=(0,d.Q_)(),D=(0,m.cQ)(),O=(0,d.iQ)();if(C[6]!==n||C[7]!==r||C[8]!==x?(f=()=>{n&&r&&x(!0)},h=[n,r,x],C[6]=n,C[7]=r,C[8]=x,C[9]=f,C[10]=h):(f=C[9],h=C[10]),c.useEffect(f,h),D)return null;C[11]!==k||C[12]!==O||C[13]!==n||C[14]!==x?(b=()=>{x(!1),n?k.tf.select(O,{focus:!0,next:!0}):k.getApi(u.vO).blockSelection.set(O.id)},C[11]=k,C[12]=O,C[13]=n,C[14]=x,C[15]=b):b=C[15];let M=b;return C[16]!==t?(v=(0,_.cn)("max-h-[50vh] grow resize-none p-2 text-sm",t),C[16]=t,C[17]=v):v=C[17],C[18]!==n||C[19]!==M||C[20]!==r?(j={isInline:n,open:r,onClose:M},C[18]=n,C[19]=M,C[20]=r,C[21]=j):j=C[21],C[22]!==i||C[23]!==v||C[24]!==j?(N=(0,o.jsx)(y,(0,s._)({className:v,state:j,autoFocus:!0},i)),C[22]=i,C[23]=v,C[24]=j,C[25]=N):N=C[25],C[26]===Symbol.for("react.memo_cache_sentinel")?(q=(0,o.jsx)(p.A,{className:"size-3.5"}),C[26]=q):q=C[26],C[27]!==M?(A=(0,o.jsxs)(E.$,{variant:"secondary",className:"px-3",onClick:M,children:["Done ",q]}),C[27]=M,C[28]=A):A=C[28],C[29]!==N||C[30]!==A?(S=(0,o.jsxs)(g.hl,{className:"flex gap-2",onEscapeKeyDown:w,contentEditable:!1,children:[N,A]}),C[29]=N,C[30]=A,C[31]=S):S=C[31],S};function w(e){e.preventDefault()}}}]);