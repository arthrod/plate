"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83064],{32694:(e,t,n)=>{n.d(t,{W:()=>D});var r=n(99019),o=n(5147),i=n(15457),s=n(65284),l=n(50357),c=n(48674),a=n(80115),d=n(85120),h=n(71099);let u=Math.floor,p=()=>new Set,y=Array.from,g=Date.now,f=()=>new Map;var m=class{on(e,t){var n;let r;(n=this._observers,void 0===(r=n.get(e))&&n.set(e,r=p()),r).add(t)}once(e,t){var n=this;let r=function(){for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];n.off(e,r),t(...i)};this.on(e,r)}off(e,t){let n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return y((this._observers.get(e)||f()).values()).forEach(e=>e(...t))}destroy(){this._observers=f()}constructor(){this._observers=f()}};let v=Symbol("Equality"),_=Object.keys,b=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),S=(e,t)=>{if(e===t)return!0;if(null==e||null==t||e.constructor!==t.constructor&&(e.constructor||Object)!==(t.constructor||Object))return!1;if(null!=e[v])return e[v](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(let n of e.keys())if(!t.has(n)||!S(e.get(n),t.get(n)))return!1;break;case void 0:case Object:if(_(e).length!==_(t).length)return!1;for(let n in e)if(!b(e,n)||!S(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!S(e[n],t[n]))return!1;break;default:return!1}return!0};var w=class extends m{destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){let t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,o=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:g()});let i=[],s=[],l=[],c=[];null===e?c.push(t):null==o?null!=e&&i.push(t):(s.push(t),S(o,e)||l.push(t)),(i.length>0||l.length>0||c.length>0)&&this.emit("change",[{added:i,updated:l,removed:c},"local"]),this.emit("update",[{added:i,updated:s,removed:c},"local"])}setLocalStateField(e,t){let n=this.getLocalState();null!==n&&this.setLocalState((0,o._)((0,r._)({},n),{[e]:t}))}getStates(){return this.states}constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{let e=g();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());let t=[];this.meta.forEach((n,r)=>{r!==this.clientID&&3e4<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)}),t.length>0&&C(this,t,"timeout")},u(3e3)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}};let C=(e,t,n)=>{let r=[];for(let n=0;n<t.length;n++){let o=t[n];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){let t=e.meta.get(o);e.meta.set(o,{clock:t.clock+1,lastUpdated:g()})}r.push(o)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))};async function k(e,t){let n=await E(e,t),r=new a.JA({guid:e});r.clientID=n;let o=(0,s.x5)(t);r.get("content",a.ZQ).applyDelta(o);let i=a.PR(r);return r.destroy(),i}async function E(e,t){let n="".concat(e,"-").concat(JSON.stringify(t)),r=new TextEncoder().encode(n);return Math.abs(new DataView(await window.crypto.subtle.digest("SHA-256",r)).getInt32(0,!1))%0x7fffffff+1}let x={hocuspocus:class{connect(){try{this.provider.connect()}catch(e){this._isConnected=!1}}get awareness(){return this.provider.awareness}get document(){return this.provider.document}get isConnected(){return this._isConnected}get isSynced(){return this._isSynced}constructor({awareness:e,doc:t,options:n,wsOptions:i,onConnect:s,onDisconnect:l,onError:c,onSyncChange:a}){this._isConnected=!1,this._isSynced=!1,this.destroy=()=>{this._isConnected&&this.provider.disconnect()},this.disconnect=()=>{if(this._isConnected&&(this.provider.disconnect(),this._isConnected=!1,this._isSynced)){var e;this._isSynced=!1,null===this||void 0===this||null==(e=this.onSyncChange)||e.call(this,!1)}},this.type="hocuspocus",this.onConnect=s,this.onDisconnect=l,this.onSyncChange=a,this.onError=c;const h=(0,o._)((0,r._)({},n,t&&{document:t},e&&{awareness:e},i&&(()=>{try{return{websocketProvider:new d.nU(i)}}catch(t){var e;return null==(e=this.onError)||e.call(this,t instanceof Error?t:Error(String(t))),{}}})()),{broadcast:n.broadcast||!1,onAwarenessChange:n.onAwarenessChange||(()=>{}),onConnect:()=>{var e,t;this._isConnected=!0,null==(e=this.onConnect)||e.call(this),null==(t=n.onConnect)||t.call(n)},onDisconnect:e=>{var t,r,o;this._isConnected=!1,this._isSynced&&(this._isSynced=!1,null==(o=this.onSyncChange)||o.call(this,!1)),null==(t=this.onDisconnect)||t.call(this),null==(r=n.onDisconnect)||r.call(n,e)},onSynced:e=>{var t,r;let o=this._isSynced;this._isSynced=!0,o||null==(t=this.onSyncChange)||t.call(this,!0),null==(r=n.onSynced)||r.call(n,e)}});try{this.provider=new d.m(h)}catch(e){var u;this.provider=new d.m((0,o._)((0,r._)({},h),{connect:!1})),null==(u=this.onError)||u.call(this,e instanceof Error?e:Error(String(e)))}}},webrtc:class{get awareness(){return this.provider.awareness}get document(){return this.doc}get isConnected(){return this._isConnected}get isSynced(){return this._isSynced}constructor({awareness:e,doc:t,options:n,onConnect:r,onDisconnect:o,onError:i,onSyncChange:s}){this._isConnected=!1,this._isSynced=!1,this.provider=null,this.connect=()=>{if(this.provider)try{this.provider.connect()}catch(e){console.warn("[yjs] Error connecting WebRTC provider:",e)}},this.destroy=()=>{if(this.provider)try{this.provider.destroy()}catch(e){console.warn("[yjs] Error destroying WebRTC provider:",e)}},this.disconnect=()=>{if(this.provider)try{var e;this.provider.disconnect();let t=this._isSynced;this._isConnected=!1,this._isSynced=!1,t&&(null==(e=this.onSyncChange)||e.call(this,!1))}catch(e){console.warn("[yjs] Error disconnecting WebRTC provider:",e)}},this.type="webrtc",this.onSyncChange=s,this.doc=t||new a.JA;try{this.provider=new h.hU(n.roomName,this.doc,{awareness:e,filterBcConns:n.filterBcConns,maxConns:n.maxConns,password:n.password,peerOpts:n.peerOpts,signaling:n.signaling}),this.provider.on("status",e=>{let t=this._isConnected;this._isConnected=e.connected,e.connected?(t||null==r||r(),this._isSynced||(this._isSynced=!0,null==s||s(!0))):t&&(null==o||o(),this._isSynced&&(this._isSynced=!1,null==s||s(!1)))})}catch(e){console.warn("[yjs] Error creating WebRTC provider:",e),null==i||i(e instanceof Error?e:Error(String(e)))}}}},j=e=>{let{type:t}=e,n=(0,i._)(e,["type"]),r=x[t];if(!r)throw Error('Provider type "'.concat(t,'" not found in registry'));return new r(n)},I=e=>"object"==typeof e&&null!==e&&"type"in e&&"options"in e,A=(0,l.qt)({key:c.t.yjs,extendEditor:e=>{let t,n,i,l,{editor:c,getOptions:d}=e,h=c,{awareness:u,cursors:p,localOrigin:y,positionStorageOrigin:g,sharedType:f,ydoc:m}=d(),v=null!=f?f:m.get("content",a.ZQ);if(t=h,n={autoConnect:!1,localOrigin:y,positionStorageOrigin:g},h=(0,s.z6)(t,v,n),p)if(u){let e,t,n=!0;!1===p.autoSend&&(n=!1),e=h,t=(0,o._)((0,r._)({},p),{autoSend:n}),h=(0,s.y8)(e,u,t)}else h.api.debug.error("Yjs plugin: Internal shared awareness (awareness) is missing but cursors are enabled.");return i=h,(0,s.cj)(i,l)},options:{_isConnected:!1,_isSynced:!1,userId:null,_providers:[],awareness:null,cursors:{},localOrigin:null,positionStorageOrigin:null,providers:[],sharedType:null,ydoc:null,onConnect:()=>{},onDisconnect:()=>{},onError:()=>{},onSyncChange:()=>{}}}).extend(e=>{let{getOptions:t}=e,n=t(),{localOrigin:r,positionStorageOrigin:o}=n,{awareness:s,ydoc:l}=(0,i._)(n,["localOrigin","positionStorageOrigin"]);return l||(l=new a.JA),s||(s=new w(l)),{options:{awareness:s,localOrigin:null!=r?r:void 0,positionStorageOrigin:null!=o?o:void 0,ydoc:l}}}).extendApi(e=>({connect:t=>{let{getOptions:n}=e,{_providers:r}=n(),o=t?Array.isArray(t)?t:[t]:null;r.forEach(e=>{if(!o||o.includes(e.type))try{e.connect()}catch(o){var t,r;null==(t=(r=n()).onError)||t.call(r,{error:o instanceof Error?o:Error(String(o)),type:e.type})}})},destroy:()=>{let{editor:t,getOptions:n}=e,{_providers:r}=n();for(let e of[...r].reverse())try{e.isConnected&&e.destroy()}catch(t){console.warn("[yjs] Error disconnecting provider (".concat(e.type,"):"),t)}try{s.yt.disconnect(t)}catch(e){}},disconnect:t=>{let{editor:n,getOptions:r}=e,{_providers:o}=r(),i=t?Array.isArray(t)?t:[t]:null;for(let e of[...o].reverse())try{e.isConnected&&(null===i||i.includes(e.type))&&e.disconnect()}catch(t){console.warn("[yjs] Error disconnecting provider (".concat(e.type,"):"),t)}},init:async function(){let{id:t,autoConnect:n=!0,autoSelect:r,selection:o,value:i,onReady:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{editor:c,getOptions:d,setOption:h}=e,{awareness:u,providers:p=[],sharedType:y,ydoc:g}=d();if(0===p.length)throw Error("No providers specified. Please provide provider configurations or instances in the `providers` array.");let f=[],m=null,v=new Promise(e=>{m=e});for(let e of p)if(I(e)){let{options:t,type:n}=e;if(!t)continue;try{let e=j({awareness:u,doc:g,options:t,type:n,onConnect:()=>{var e,t;null==(e=(t=d()).onConnect)||e.call(t,{type:n}),h("_isConnected",!0)},onDisconnect:()=>{var e,t;null==(e=(t=d()).onDisconnect)||e.call(t,{type:n});let{_providers:r}=d();r.some(e=>e.isConnected)||h("_isConnected",!1)},onError:e=>{var t,r;null==(t=(r=d()).onError)||t.call(r,{error:e,type:n})},onSyncChange:e=>{var t,r;null==(t=(r=d()).onSyncChange)||t.call(r,{isSynced:e,type:n}),h("_isSynced",e),e&&m&&(m(),m=null)}});f.push(e)}catch(e){}}else f.push(e);if(h("_providers",f),n&&f.length>0&&(f.forEach(e=>{try{e.connect()}catch(r){var t,n;null==(t=(n=d()).onError)||t.call(n,{error:r instanceof Error?r:Error(String(r)),type:e.type})}}),await Promise.race([v,new Promise(e=>{setTimeout(()=>{m=null,e()},5e3)})])),0===(null!=y?y:g.get("content",a.ZQ)).length&&null!==i){let e=i;if("string"==typeof i?e=c.api.html.deserialize({element:i}):"function"==typeof i?e=await i(c):i&&(e=i),e&&(null==e?void 0:e.length)!==0||(e=c.api.create.value()),y){let t=(0,s.x5)(e);g.transact(()=>{y.applyDelta(t)})}else{let n=await k(null!=t?t:c.id,e);g.transact(()=>{a.QE(g,n)})}}s.yt.connect(c),c.tf.init({autoSelect:r,selection:o,shouldNormalizeEditor:!1,value:null}),c.api.onChange(),null==l||l({editor:c,isAsync:!0,value:c.children})}})),D=(0,n(28268).HS)(A)},48674:(e,t,n)=>{n.d(t,{t:()=>o});var r=n(99019);let o=(0,n(5147)._)((0,r._)({},{a:"a",ai:"ai",aiChat:"aiChat",audio:"audio",blockquote:"blockquote",bold:"bold",callout:"callout",code:"code",codeBlock:"code_block",codeLine:"code_line",codeSyntax:"code_syntax",column:"column",columnGroup:"column_group",comment:"comment",date:"date",emojiInput:"emoji_input",equation:"equation",excalidraw:"excalidraw",file:"file",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",highlight:"highlight",hr:"hr",img:"img",inlineEquation:"inline_equation",italic:"italic",kbd:"kbd",li:"li",lic:"lic",link:"a",listTodoClassic:"action_item",mediaEmbed:"media_embed",mention:"mention",mentionInput:"mention_input",olClassic:"ol",p:"p",searchHighlight:"search_highlight",slashInput:"slash_input",strikethrough:"strikethrough",sub:"subscript",suggestion:"suggestion",sup:"superscript",table:"table",tag:"tag",taskList:"taskList",td:"td",th:"th",toc:"toc",toggle:"toggle",tr:"tr",ulClassic:"ul",underline:"underline",video:"video"},{backgroundColor:"backgroundColor",color:"color",fontFamily:"fontFamily",fontSize:"fontSize",fontWeight:"fontWeight",indent:"indent",lineHeight:"lineHeight",listType:"listStyleType",textAlign:"textAlign",textIndent:"textIndent"}),{autoformat:"autoformat",blockMenu:"blockMenu",blockPlaceholder:"blockPlaceholder",blockSelection:"blockSelection",caption:"caption",copilot:"copilot",csv:"csv",cursorOverlay:"cursorOverlay",delete:"delete",dnd:"dnd",docx:"docx",emoji:"emoji",exitBreak:"exitBreak",heading:["h1","h2","h3","h4","h5","h6"],html:"html",juice:"juice",list:"list",listChecked:"checked",listClassic:"listClassic",listRestart:"listRestart",listRestartPolite:"listRestartPolite",listStart:"listStart",listTodo:"todo",markdown:"markdown",nodeId:"nodeId",normalizeTypes:"normalizeTypes",ol:"decimal",placeholder:"placeholder",playwright:"playwright",removeEmptyNodes:"removeEmptyNodes",resetNode:"resetNode",singleBlock:"singleBlock",singleLine:"singleLine",slashCommand:"slash_command",softBreak:"softBreak",tabbable:"tabbable",trailingBlock:"trailingBlock",ul:"disc",yjs:"yjs",codeDrawing:"code_drawing"})},83064:(e,t,n)=>{n.r(t),n.d(t,{RemoteCursorOverlay:()=>h});var r=n(99019),o=n(5147),i=n(54568),s=n(99680),l=n(7620),c=n(32694),a=n(57354),d=n(28268);function h(){let e,t=(0,s.c)(1);return(0,d.gO)(c.W,"_isSynced")?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(u,{}),t[0]=e):e=t[0],e):null}function u(){let e,t,n,r=(0,s.c)(6),o=(0,d.T3)();r[0]!==o?(e={containerRef:o},r[0]=o,r[1]=e):e=r[1];let[l]=(0,a.aG)(e);return r[2]!==l?(t=l.map(p),r[2]=l,r[3]=t):t=r[3],r[4]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),r[4]=t,r[5]=n):n=r[5],n}function p(e){return(0,i.jsx)(y,(0,r._)({},e),e.clientId)}function y(e){let t,n,o,l=(0,s.c)(9),{caretPosition:c,data:a,selectionRects:d}=e;if(!a)return null;if(l[0]!==a.color||l[1]!==d){let e={backgroundColor:a.color+Math.round(255*Math.min(Math.max(.5,0),1)).toString(16).padStart(2,"0").toUpperCase()};t=d.map((t,n)=>(0,i.jsx)("div",{className:"pointer-events-none absolute",style:(0,r._)({},e,t)},n)),l[0]=a.color,l[1]=d,l[2]=t}else t=l[2];return l[3]!==c||l[4]!==a?(n=c&&(0,i.jsx)(g,{data:a,caretPosition:c}),l[3]=c,l[4]=a,l[5]=n):n=l[5],l[6]!==t||l[7]!==n?(o=(0,i.jsxs)(i.Fragment,{children:[t,n]}),l[6]=t,l[7]=n,l[8]=o):o=l[8],o}function g(e){let t,n,c,a,d,h,u,p,y=(0,s.c)(17),{caretPosition:g,data:f}=e,[m,v]=l.useState(!1);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{v(!0)},y[0]=t):t=y[0];let _=t;y[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{v(!1)},y[1]=n):n=y[1];let b=n,S=null==f?void 0:f.color;y[2]!==g||y[3]!==S?(c=(0,o._)((0,r._)({},g),{background:S,opacity:.7,transition:"opacity 0.2s"}),y[2]=g,y[3]=S,y[4]=c):c=y[4];let w=c;y[5]!==w?(a=(0,o._)((0,r._)({},w),{opacity:1}),y[5]=w,y[6]=a):a=y[6];let C=a,k=null==f?void 0:f.color;y[7]!==k?(d={background:k,opacity:.7,transform:"translateY(-100%)",transition:"opacity 0.2s"},y[7]=k,y[8]=d):d=y[8];let E=d;y[9]!==E?(h=(0,o._)((0,r._)({},E),{opacity:1}),y[9]=E,y[10]=h):h=y[10];let x=h,j=m?C:w,I=m?x:E,A=null==f?void 0:f.name;return y[11]!==I||y[12]!==A?(u=(0,i.jsx)("div",{className:"absolute top-0 whitespace-nowrap rounded rounded-bl-none px-1.5 py-0.5 text-white text-xs",style:I,onMouseEnter:_,onMouseLeave:b,children:A}),y[11]=I,y[12]=A,y[13]=u):u=y[13],y[14]!==u||y[15]!==j?(p=(0,i.jsx)("div",{className:"absolute w-0.5",style:j,children:u}),y[14]=u,y[15]=j,y[16]=p):p=y[16],p}}}]);