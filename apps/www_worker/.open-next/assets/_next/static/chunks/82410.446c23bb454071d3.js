"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82410],{82410:(e,t,a)=>{a.r(t),a.d(t,{CodeDrawingElement:()=>T});var n=a(99019),s=a(5147),l=a(54568),o=a(99680),i=a(7620),r=a(76095),c=a(28268),d=a(92405),u=a(64090),m=a.n(u),f=a(7473),h=a(49854),x=a(70414),p=a(93955),g=a(54866),v=a(98752),b=a(15457),j=a(57064),_=a(36351),y=a(9851),w=a(94710),N=a(87536);function z(e){let t,a,s=(0,o.c)(4);return s[0]!==e?(t=(0,v._)({},e),s[0]=e,s[1]=t):t=s[1],s[2]!==t?(a=(0,l.jsx)(j.bL,(0,n._)({"data-slot":"select"},t)),s[2]=t,s[3]=a):a=s[3],a}function C(e){let t,a,s=(0,o.c)(4);return s[0]!==e?(t=(0,v._)({},e),s[0]=e,s[1]=t):t=s[1],s[2]!==t?(a=(0,l.jsx)(j.WT,(0,n._)({"data-slot":"select-value"},t)),s[2]=t,s[3]=a):a=s[3],a}function M(e){let t,a,i,r,c,d,u,m=(0,o.c)(13);m[0]!==e?({children:t,className:a,size:r}=e,i=(0,b._)(e,["children","className","size"]),m[0]=e,m[1]=t,m[2]=a,m[3]=i,m[4]=r):(t=m[1],a=m[2],i=m[3],r=m[4]);let f=void 0===r?"default":r;return m[5]!==a?(c=(0,N.cn)("flex w-fit items-center justify-between gap-2 whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs outline-none transition-[color,box-shadow] focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[size=default]:h-9 data-[size=sm]:h-8 data-[placeholder]:text-muted-foreground *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 dark:bg-input/30 dark:aria-invalid:ring-destructive/40 dark:hover:bg-input/50 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0",a),m[5]=a,m[6]=c):c=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)(j.In,{asChild:!0,children:(0,l.jsx)(_.A,{className:"size-4 opacity-50"})}),m[7]=d):d=m[7],m[8]!==t||m[9]!==i||m[10]!==f||m[11]!==c?(u=(0,l.jsxs)(j.l9,(0,s._)((0,n._)({className:c,"data-size":f,"data-slot":"select-trigger"},i),{children:[t,d]})),m[8]=t,m[9]=i,m[10]=f,m[11]=c,m[12]=u):u=m[12],u}function S(e){let t,a,i,r,c,d,u,m,f,h,x=(0,o.c)(20);x[0]!==e?({children:t,className:a,position:r}=e,i=(0,b._)(e,["children","className","position"]),x[0]=e,x[1]=t,x[2]=a,x[3]=i,x[4]=r):(t=x[1],a=x[2],i=x[3],r=x[4]);let p=void 0===r?"popper":r,g="popper"===p&&"data-[side=left]:-translate-x-1 data-[side=top]:-translate-y-1 data-[side=right]:translate-x-1 data-[side=bottom]:translate-y-1";x[5]!==a||x[6]!==g?(c=(0,N.cn)("data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=closed]:animate-out data-[state=open]:animate-in",g,a),x[5]=a,x[6]=g,x[7]=c):c=x[7],x[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)(E,{}),x[8]=d):d=x[8];let v="popper"===p&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";return x[9]!==v?(u=(0,N.cn)("p-1",v),x[9]=v,x[10]=u):u=x[10],x[11]!==t||x[12]!==u?(m=(0,l.jsx)(j.LM,{className:u,children:t}),x[11]=t,x[12]=u,x[13]=m):m=x[13],x[14]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)(O,{}),x[14]=f):f=x[14],x[15]!==p||x[16]!==i||x[17]!==c||x[18]!==m?(h=(0,l.jsx)(j.ZL,{children:(0,l.jsxs)(j.UC,(0,s._)((0,n._)({className:c,"data-slot":"select-content",position:p},i),{children:[d,m,f]}))}),x[15]=p,x[16]=i,x[17]=c,x[18]=m,x[19]=h):h=x[19],h}function k(e){let t,a,i,r,c,d,u,m=(0,o.c)(13);return m[0]!==e?({children:t,className:a}=e,i=(0,b._)(e,["children","className"]),m[0]=e,m[1]=t,m[2]=a,m[3]=i):(t=m[1],a=m[2],i=m[3]),m[4]!==a?(r=(0,N.cn)("relative flex w-full cursor-pointer select-none items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),m[4]=a,m[5]=r):r=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,l.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,l.jsx)(j.VF,{children:(0,l.jsx)(y.A,{className:"size-4"})})}),m[6]=c):c=m[6],m[7]!==t?(d=(0,l.jsx)(j.p4,{children:t}),m[7]=t,m[8]=d):d=m[8],m[9]!==i||m[10]!==r||m[11]!==d?(u=(0,l.jsxs)(j.q7,(0,s._)((0,n._)({className:r,"data-slot":"select-item"},i),{children:[c,d]})),m[9]=i,m[10]=r,m[11]=d,m[12]=u):u=m[12],u}function E(e){let t,a,i,r,c,d=(0,o.c)(9);return d[0]!==e?({className:t}=e,a=(0,b._)(e,["className"]),d[0]=e,d[1]=t,d[2]=a):(t=d[1],a=d[2]),d[3]!==t?(i=(0,N.cn)("flex cursor-pointer items-center justify-center py-1",t),d[3]=t,d[4]=i):i=d[4],d[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)(w.A,{className:"size-4"}),d[5]=r):r=d[5],d[6]!==a||d[7]!==i?(c=(0,l.jsx)(j.PP,(0,s._)((0,n._)({className:i,"data-slot":"select-scroll-up-button"},a),{children:r})),d[6]=a,d[7]=i,d[8]=c):c=d[8],c}function O(e){let t,a,i,r,c,d=(0,o.c)(9);return d[0]!==e?({className:t}=e,a=(0,b._)(e,["className"]),d[0]=e,d[1]=t,d[2]=a):(t=d[1],a=d[2]),d[3]!==t?(i=(0,N.cn)("flex cursor-pointer items-center justify-center py-1",t),d[3]=t,d[4]=i):i=d[4],d[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)(_.A,{className:"size-4"}),d[5]=r):r=d[5],d[6]!==a||d[7]!==i?(c=(0,l.jsx)(j.wn,(0,s._)((0,n._)({className:i,"data-slot":"select-scroll-down-button"},a),{children:r})),d[6]=a,d[7]=i,d[8]=c):c=d[8],c}function T(e){var t,a,u,v,b,j;let _,y,w,N,z,C,M,S,k,E,O,T,D,Q,R=(0,o.c)(46),L=(0,x.a)(),V=(0,c.Q_)(),H=(0,d.cQ)(),J=(0,d.f7)(),F=(0,c.hc)(),I=(0,c.iQ)();R[0]!==I?(_={element:I},R[0]=I,R[1]=_):_=R[1];let{removeNode:Z,image:$,loading:q}=function(e){var t,a;let{element:n}=e,s=(0,c.Q_)(),l=(0,d.cQ)(),[o,u]=i.useState(!1),[f,h]=i.useState(null),[x,p]=i.useState(""),g=i.useRef(0),v=i.useMemo(()=>m()(async(e,t)=>{g.current+=1;let a=g.current;if(!e||!e.trim()||!t){p(""),u(!1),h(null);return}u(!0),h(null);try{let n=await (0,r.ud)(t,e);g.current===a&&(p(n),h(null))}catch(e){g.current===a&&(h(e instanceof Error?e.message:"Rendering failed"),p(""))}finally{g.current===a&&u(!1)}},r.vZ),[]);return i.useEffect(()=>{var e,t;return v(null==(e=n.data)?void 0:e.code,null==(t=n.data)?void 0:t.drawingType),()=>{v.cancel()}},[null==(t=n.data)?void 0:t.code,null==(a=n.data)?void 0:a.drawingType,v]),{loading:o,error:f,image:x,removeNode:()=>{if(l)return;let e=s.api.findPath(n);e&&s.tf.removeNodes({at:e})}}}(_);R[2]!==$?(y=()=>{$&&(0,r.GV)($,r.Pg)},R[2]=$,R[3]=y):y=R[3];let G=y;R[4]!==V.api||R[5]!==V.tf||R[6]!==I?(w=e=>{let t=V.api.findPath(I);t&&V.tf.setNodes({data:(0,s._)((0,n._)({},I.data),{code:e})},{at:t})},R[4]=V.api,R[5]=V.tf,R[6]=I,R[7]=w):w=R[7];let U=w;R[8]!==V.api||R[9]!==V.tf||R[10]!==I?(N=e=>{let t=V.api.findPath(I);t&&V.tf.setNodes({data:(0,s._)((0,n._)({},I.data),{drawingType:e})},{at:t})},R[8]=V.api,R[9]=V.tf,R[10]=I,R[11]=N):N=R[11];let W=N;R[12]!==V.api||R[13]!==V.tf||R[14]!==I?(z=e=>{let t=V.api.findPath(I);t&&V.tf.setNodes({data:(0,s._)((0,n._)({},I.data),{drawingMode:e})},{at:t})},R[12]=V.api,R[13]=V.tf,R[14]=I,R[15]=z):z=R[15];let K=z,X=null!=(t=null==(v=I.data)?void 0:v.code)?t:"",Y=null!=(a=null==(b=I.data)?void 0:b.drawingType)?a:"Mermaid",ee=null!=(u=null==(j=I.data)?void 0:j.drawingMode)?u:"Both";R[16]===Symbol.for("react.memo_cache_sentinel")?(C=[],R[16]=C):C=R[16];let et=(0,c.QR)(B,C),ea=F&&!H&&J&&et;R[17]!==X||R[18]!==ee||R[19]!==Y||R[20]!==U||R[21]!==K||R[22]!==W||R[23]!==$||R[24]!==L||R[25]!==q||R[26]!==H?(M=(0,l.jsx)("div",{contentEditable:!1,children:(0,l.jsx)(P,{code:X,drawingType:Y,drawingMode:ee,image:$,loading:q,onCodeChange:U,onDrawingTypeChange:W,onDrawingModeChange:K,readOnly:H,isMobile:L})}),R[17]=X,R[18]=ee,R[19]=Y,R[20]=U,R[21]=K,R[22]=W,R[23]=$,R[24]=L,R[25]=q,R[26]=H,R[27]=M):M=R[27],R[28]!==e||R[29]!==M?(S=(0,l.jsx)(c.tc,(0,s._)((0,n._)({},e),{children:M})),R[28]=e,R[29]=M,R[30]=S):S=R[30];let en=S;return H?en:(R[31]!==en?(k=(0,l.jsx)(g.dT,{asChild:!0,children:en}),R[31]=en,R[32]=k):k=R[32],R[33]!==G||R[34]!==$?(E=$&&(0,l.jsx)(p.$,{size:"icon",variant:"ghost",className:"size-8",onClick:G,title:"Export",children:(0,l.jsx)(f.A,{className:"size-4"})}),R[33]=G,R[34]=$,R[35]=E):E=R[35],R[36]===Symbol.for("react.memo_cache_sentinel")?(O=(0,l.jsx)(h.A,{className:"size-4"}),R[36]=O):O=R[36],R[37]!==Z?(T=(0,l.jsx)(p.$,{size:"icon",variant:"ghost",className:"size-8",onClick:Z,title:"Delete",children:O}),R[37]=Z,R[38]=T):T=R[38],R[39]!==T||R[40]!==E?(D=(0,l.jsx)(g.hl,{className:"w-auto p-1",contentEditable:!1,onOpenAutoFocus:A,children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[E,T]})}),R[39]=T,R[40]=E,R[41]=D):D=R[41],R[42]!==ea||R[43]!==D||R[44]!==k?(Q=(0,l.jsxs)(g.AM,{open:ea,modal:!1,children:[k,D]}),R[42]=ea,R[43]=D,R[44]=k,R[45]=Q):Q=R[45],Q)}function A(e){return e.preventDefault()}function B(e){return!e.api.isExpanded()}function P(e){let t,a,n,s,i,c,d=(0,o.c)(32),{code:u,drawingType:m,drawingMode:f,image:h,loading:x,onCodeChange:p,onDrawingTypeChange:g,onDrawingModeChange:v,readOnly:b,isMobile:j}=e,_=void 0!==b&&b,y=void 0!==j&&j,w=f===r.aj.Both||f===r.aj.Code,N=f===r.aj.Both;d[0]!==p?(t=e=>{p(e.target.value)},d[0]=p,d[1]=t):t=d[1];let z=t;d[2]!==m||d[3]!==y||d[4]!==v||d[5]!==g||d[6]!==_||d[7]!==f?(a=_?null:(0,l.jsx)(D,{drawingType:m,viewMode:f,readOnly:_,isMobile:y,onDrawingTypeChange:g,onDrawingModeChange:v}),d[2]=m,d[3]=y,d[4]=v,d[5]=g,d[6]=_,d[7]=f,d[8]=a):a=d[8];let C=a,M="flex ".concat(y?"flex-col-reverse":"flex-col"," group my-4 w-full items-stretch border bg-muted/50 md:flex-row");return d[9]===Symbol.for("react.memo_cache_sentinel")?(n={minHeight:"".concat(r.TJ,"px")},d[9]=n):n=d[9],d[10]!==u||d[11]!==z||d[12]!==y||d[13]!==_||d[14]!==N||d[15]!==w||d[16]!==C||d[17]!==f?(s=w&&(0,l.jsx)(L,{code:u,viewMode:f,readOnly:_,isMobile:y,showBorder:N,onCodeChange:z,toolbar:f===r.aj.Code?C:null}),d[10]=u,d[11]=z,d[12]=y,d[13]=_,d[14]=N,d[15]=w,d[16]=C,d[17]=f,d[18]=s):s=d[18],d[19]!==u||d[20]!==h||d[21]!==y||d[22]!==x||d[23]!==_||d[24]!==N||d[25]!==C||d[26]!==f?(i=f!==r.aj.Code&&(0,l.jsx)(V,{image:h,loading:x,code:u,viewMode:f,readOnly:_,isMobile:y,showBorder:N,toolbar:C}),d[19]=u,d[20]=h,d[21]=y,d[22]=x,d[23]=_,d[24]=N,d[25]=C,d[26]=f,d[27]=i):i=d[27],d[28]!==M||d[29]!==s||d[30]!==i?(c=(0,l.jsxs)("div",{className:M,style:n,children:[s,i]}),d[28]=M,d[29]=s,d[30]=i,d[31]=c):c=d[31],c}function D(e){let t,a,n,s,c,d=(0,o.c)(21),{drawingType:u,viewMode:m,readOnly:f,isMobile:h,onDrawingTypeChange:x,onDrawingModeChange:p}=e,g=void 0!==f&&f,v=void 0!==h&&h,[b,j]=i.useState(!1),[_,y]=i.useState(!1),[w,N]=i.useState(!1),k=v||b||_||w?"opacity-100":"opacity-0 group-hover:opacity-100",E=v?"flex items-center gap-2":"absolute right-2 z-10 flex items-center gap-2",O="".concat(E," transition-opacity ").concat(k);return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>j(!0),d[0]=t):t=d[0],d[1]!==_||d[2]!==w?(a=()=>{_||w||j(!1)},d[1]=_,d[2]=w,d[3]=a):a=d[3],d[4]!==u||d[5]!==v||d[6]!==_||d[7]!==x||d[8]!==g?(n=!g&&(0,l.jsxs)(z,{value:u,onValueChange:x,open:_,onOpenChange:y,children:[(0,l.jsx)(M,{className:"h-8 w-[120px] border-0 bg-muted/50 text-xs shadow-none ".concat(v?"":"transition-colors hover:bg-zinc-200"),children:(0,l.jsx)(C,{})}),(0,l.jsx)(S,{className:"z-[100]",children:r.eu.map(R)})]}),d[4]=u,d[5]=v,d[6]=_,d[7]=x,d[8]=g,d[9]=n):n=d[9],d[10]!==v||d[11]!==p||d[12]!==g||d[13]!==m||d[14]!==w?(s=!g&&(0,l.jsxs)(z,{value:m,onValueChange:p,open:w,onOpenChange:N,children:[(0,l.jsx)(M,{className:"h-8 w-[80px] border-0 bg-muted/50 text-xs shadow-none ".concat(v?"":"transition-colors hover:bg-zinc-200"),children:(0,l.jsx)(C,{})}),(0,l.jsx)(S,{className:"z-[100]",children:r.Ci.map(Q)})]}),d[10]=v,d[11]=p,d[12]=g,d[13]=m,d[14]=w,d[15]=s):s=d[15],d[16]!==O||d[17]!==a||d[18]!==n||d[19]!==s?(c=(0,l.jsxs)("div",{role:"toolbar",className:O,onMouseEnter:t,onMouseLeave:a,children:[n,s]}),d[16]=O,d[17]=a,d[18]=n,d[19]=s,d[20]=c):c=d[20],c}function Q(e){return(0,l.jsx)(k,{value:e.value,children:e.label},e.value)}function R(e){return(0,l.jsx)(k,{value:e.value,children:e.label},e.value)}function L(e){let t,a,n,s,c,d,u,m,f=(0,o.c)(19),{code:h,viewMode:x,readOnly:p,isMobile:g,showBorder:v,onCodeChange:b,toolbar:j}=e,_=void 0!==p&&p,y=void 0!==g&&g,w=i.useRef(null),N=x===r.aj.Code,[z,C]=i.useState(h),M=i.useRef(h);f[0]!==h?(t=()=>{h!==M.current&&(M.current=h,C(h))},a=[h],f[0]=h,f[1]=t,f[2]=a):(t=f[1],a=f[2]),i.useEffect(t,a),f[3]!==b?(n=e=>{C(e.target.value),b(e)},f[3]=b,f[4]=n):n=f[4];let S=n,k="".concat(N?"w-full":"min-w-0 flex-1"," flex flex-col ").concat(N&&!y?"relative":""," ").concat(void 0!==v&&v&&!y?"border-r":"");return f[5]!==N||f[6]!==y||f[7]!==j?(s=j&&N&&(0,l.jsx)("div",{className:y?"mt-2 mb-2 flex justify-end px-2":"absolute right-2 z-10 mt-2",children:j}),f[5]=N,f[6]=y,f[7]=j,f[8]=s):s=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(c={minHeight:"".concat(r.TJ,"px"),height:"100%"},f[9]=c):c=f[9],f[10]===Symbol.for("react.memo_cache_sentinel")?(d={minHeight:"".concat(r.TJ,"px")},f[10]=d):d=f[10],f[11]!==S||f[12]!==z||f[13]!==_?(u=(0,l.jsx)("div",{className:"relative flex-1 rounded-md",children:(0,l.jsx)("pre",{className:"m-0 overflow-x-auto p-8 pr-4 font-mono text-sm leading-[normal] [tab-size:2] print:break-inside-avoid",style:c,children:(0,l.jsx)("code",{className:"block h-full w-full",children:(0,l.jsx)("textarea",{ref:w,value:z,onChange:S,readOnly:_,className:"m-0 h-full w-full resize-none overflow-auto border-0 bg-transparent p-0 font-mono text-sm outline-none",style:d,placeholder:"Enter your code here...",spellCheck:!1})})})}),f[11]=S,f[12]=z,f[13]=_,f[14]=u):u=f[14],f[15]!==u||f[16]!==k||f[17]!==s?(m=(0,l.jsxs)("div",{className:k,children:[s,u]}),f[15]=u,f[16]=k,f[17]=s,f[18]=m):m=f[18],m}function V(e){let t,a,n,s=(0,o.c)(12),{image:i,loading:c,code:d,viewMode:u,readOnly:m,isMobile:f,showBorder:h,toolbar:x}=e,p=void 0!==f&&f,g=u===r.aj.Both||u===r.aj.Image,v="flex min-w-0 flex-1 flex-col ".concat(p?"":"relative"," ").concat(void 0!==h&&h&&p?"border-b":"");return s[0]!==p||s[1]!==x?(t=x&&(0,l.jsx)("div",{className:p?"mt-2 mb-2 flex justify-end px-2":"absolute right-2 z-10 mt-2",children:x}),s[0]=p,s[1]=x,s[2]=t):t=s[2],s[3]!==d||s[4]!==i||s[5]!==c||s[6]!==g?(a=g?(0,l.jsxs)("div",{className:"flex flex-1 items-center justify-center rounded-md bg-muted/30 p-4",children:[c&&(0,l.jsx)("div",{className:"text-muted-foreground",children:"Loading..."}),!c&&i&&(0,l.jsx)("img",{src:i,alt:"Code drawing",className:"max-h-full max-w-full object-contain"}),!c&&!i&&(0,l.jsx)("div",{className:"text-muted-foreground",children:d.trim()?"Rendering...":"Preview will appear here"})]}):(0,l.jsx)("div",{className:"pointer-events-none flex flex-1 items-center justify-center rounded-md border bg-muted/30 p-4 opacity-0"}),s[3]=d,s[4]=i,s[5]=c,s[6]=g,s[7]=a):a=s[7],s[8]!==v||s[9]!==t||s[10]!==a?(n=(0,l.jsxs)("div",{className:v,children:[t,a]}),s[8]=v,s[9]=t,s[10]=a,s[11]=n):n=s[11],n}}}]);