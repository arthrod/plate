"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66475],{66475:(e,t,i)=>{i.d(t,{E:()=>w,a:()=>W,b:()=>S,i:()=>M,k:()=>C,n:()=>q,o:()=>Y,r:()=>P,t:()=>K,v:()=>I,w:()=>E});var r,l=i(99019),n=i(5147),s=i(48674),a=i(14796),o=i(50357),p=i(2498);let c=(e,t)=>{var i,r;return(null==(r=e.api.parent(t))||null==(i=r[0])?void 0:i.type)===e.getType(s.t.li)},f=e=>[e.getType(s.t.olClassic),e.getType(s.t.ulClassic),e.getType(s.t.taskList)],d=(e,t)=>{let{diffListPath:i,liPath:r}=t,l=e.api.above({at:r,match:{type:f(e)}});if(!l)return;let[n,o]=l;if(!i||!a.s2.equals(o,i)){if(n.children.length<2){let t=e.api.above({at:o,match:{type:e.getType(s.t.li)}});if(t)return d(e,{diffListPath:i,liPath:t[1]})||o}return r}},u=function(e){let t,{at:i=e.selection}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.getType(s.t.li);if((t=a.Cb.isRange(i)&&!a.Cb.isCollapsed(i)?i.focus.path:a.Cb.isRange(i)?i.anchor.path:i)&&a.lZ.get(e,t)){let i=e.api.above({at:t,match:{type:r}});if(i)return{list:e.api.parent(i[1]),listItem:i}}},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection;if(!t)return;let i=e.api.above({at:t,match:{type:f(e)}});if(i){var r;let[,t]=i;return null!=(r=h(e,t))?r:i}},m=(e,t)=>{let{inherit:i=!1,liNode:r}=t;return e.getType(s.t.li)===r.type&&"checked"in r?{checked:!!i&&r.checked}:void 0},y=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.getType(s.t.taskList)===t?(0,l._)({checked:!1},i):void 0},g=function(e){let t,{at:i=e.selection}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.getType(s.t.listTodoClassic);if((t=a.Cb.isRange(i)&&!a.Cb.isCollapsed(i)?i.focus.path:a.Cb.isRange(i)?i.anchor.path:i)&&a.lZ.get(e,t)){let i=e.api.above({at:t,match:{type:r}});if(i)return{list:e.api.parent(i[1]),listItem:i}}},v=(e,t)=>t.children.some(t=>(0,a.YW)(t,[],{type:f(e)})),N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection;return!(!t||a.Cb.isCollapsed(t))&&!!e.api.isAt({at:t,blocks:!0})&&e.api.some({at:t,match:{type:e.getType(s.t.li)}})},k=(e,t)=>a.$7.isElement(t)&&f(e).includes(t.type),T=(e,t)=>{let i,{deleteFromList:r=!0,fromList:l,fromListItem:n,fromStartIndex:s,to:o,toList:p,toListIndex:c=null}=t,d=!1;return e.tf.withoutNormalizing(()=>{if(n){let t=e.api.descendant({at:n[1],match:{type:f(e)}});if(!t)return;i=null==t?void 0:t[1]}else{if(!l)return;i=l[1]}let t=null;if(o&&(t=o),p)if(null===c){var u;let i=null==(u=a.lZ.lastChild(e,p[1]))?void 0:u[1];t=i?a.s2.next(i):p[1].concat([0])}else t=p[1].concat([c]);t&&(d=e.tf.moveNodes({at:i,children:!0,fromIndex:s,to:t}),r&&e.tf.delete({at:i}))}),d},C=function(e){let{at:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=()=>{if(e.api.above({at:t,match:{type:f(e)}}))return!0;if(!t&&e.selection){let t=a.lZ.common(e,e.selection.anchor.path,e.selection.focus.path);if(a.$7.isElement(t[0])&&f(e).includes(t[0].type))return!0}return!1};e.tf.withoutNormalizing(()=>{do e.tf.unwrapNodes({at:t,match:{type:e.getType(s.t.li)},split:!0}),e.tf.unwrapNodes({at:t,match:{type:f(e)},split:!0});while(i())})},L=(e,t)=>{let{list:i,listItem:r}=t,l=!1;return e.tf.withoutNormalizing(()=>{l=(()=>{let[t,l]=i,[n,o]=r,p=e.api.above({at:l,match:{type:e.getType(s.t.li)}});if(!p){let s;try{s=a.s2.next(l)}catch(e){return}let p=v(e,n),c=!a.lZ.isLastChild(e,o);if((p||c)&&e.tf.insertNodes({children:[],type:t.type},{at:s}),p){let t=a.lZ.get(e,s);if(!t)return;T(e,{fromListItem:r,toList:[t,s]})}if(c){let t=a.lZ.get(e,s);if(!t)return;T(e,{deleteFromList:!1,fromList:i,fromStartIndex:o.at(-1)+1,toList:[t,s]})}return C(e,{at:o.concat(0)}),!0}let[,c]=p,f=o.concat([1]);if(!a.lZ.isLastChild(e,o)){v(e,n)||e.tf.insertNodes({children:[],type:t.type},{at:f});let i=a.lZ.get(e,f);if(!i)return;T(e,{deleteFromList:!1,fromListItem:p,fromStartIndex:o.at(-1)+1,toList:[i,f]})}let d=a.s2.next(c);return e.tf.moveNodes({at:o,to:d}),!0})()}),l},b=(e,t)=>{let{list:i,listItem:r}=t,[,l]=i;return!c(e,l)&&(L(e,{list:i,listItem:r}),!0)},w=function(e){let{at:t=null!=(r=e.selection)?r:void 0,enableResetOnShiftTab:i,increase:l=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.from(e.api.nodes({at:t,match:{type:e.getType(s.t.lic)}}));if(0===n.length)return;let o=[],p=[];n.forEach(t=>{let i=t[1],r=a.s2.parent(i);o.some(e=>{let t=a.s2.parent(e);return a.s2.isAncestor(t,r)})||(o.push(i),p.push(e.api.pathRef(i)))});let d=l?p:p.reverse();return e.tf.withoutNormalizing(()=>{let t=!1;return d.forEach(r=>{let n,s=r.unref();if(!s)return;let o=e.api.parent(s);if(!o)return;let p=e.api.parent(o[1]);p&&(l?n=((e,t)=>{let{list:i,listItem:r}=t,l=!1,[n]=i,[,s]=r,o=a.s2.previous(s);if(!o)return;let p=e.api.node(o);if(p){let[t,i]=p,r=t.children.find(t=>(0,a.YW)(t,[],{type:f(e)})),o=i.concat(r?[1,r.children.length]:[1]);e.tf.withoutNormalizing(()=>{r||e.tf.wrapNodes({children:[],type:n.type},{at:s}),e.tf.moveNodes({at:s,to:o}),l=!0})}return l})(e,{list:p,listItem:o}):c(e,p[1])?n=L(e,{list:p,listItem:o}):i&&(n=b(e,{list:p,listItem:o})),t=n||t)}),t})},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.getType(s.t.li),r=e.getType(s.t.lic);if(!e.selection)return!1;let o=e.api.above({match:{type:r}});if(!o)return!1;let[,p]=o,c=e.api.parent(p);if(!c)return!1;let[f,d]=c;if(f.type!==i)return!1;let u="checked"in f?{checked:!1}:void 0,h=!1;return e.tf.withoutNormalizing(()=>{e.api.isCollapsed()||e.tf.delete();let s=e.api.isStart(e.selection.focus,p),o=e.api.isEmpty(e.selection,{after:!0}),c=a.s2.next(p),m=a.s2.next(d);if(s){u&&t.inheritCheckStateOnLineStartBreak&&(u.checked=f.checked),e.tf.insertNodes((0,n._)((0,l._)({children:[{children:[{text:""}],type:r}]},u),{type:i}),{at:d}),h=!0;return}if(o){let s=e.api.marks()||{};u&&t.inheritCheckStateOnLineEndBreak&&(u.checked=f.checked),e.tf.insertNodes((0,n._)((0,l._)({children:[{children:[(0,l._)({text:""},s)],type:r}]},u),{type:i}),{at:m}),e.tf.select(m)}else e.tf.withoutNormalizing(()=>{e.tf.splitNodes(),e.tf.wrapNodes((0,n._)((0,l._)({children:[]},u),{type:i}),{at:c}),e.tf.moveNodes({at:c,to:m}),e.tf.select(m),e.tf.collapse({edge:"start"})});f.children.length>1&&e.tf.moveNodes({at:c,to:m.concat(1)}),h=!0}),h},E=(0,o.Kt)({key:s.t.listTodoClassic,node:{isElement:!0},options:{inheritCheckStateOnLineEndBreak:!1,inheritCheckStateOnLineStartBreak:!1}}).overrideEditor(e=>{let{editor:t,tf:{insertBreak:i}}=e;return{transforms:{insertBreak(){(()=>{if(t.selection&&g(t)&&Z(t))return!0})()||i()}}}}).extendTransforms(e=>{let{editor:t,type:i}=e;return{toggle:()=>{t.tf.toggleBlock(i)}}}),Z=e=>{let{inheritCheckStateOnLineEndBreak:t,inheritCheckStateOnLineStartBreak:i}=e.getOptions(E),r=e.getType(s.t.listTodoClassic);if(!e.selection)return!1;let n=e.api.above({match:{type:r}});if(!n)return!1;let[o,p]=n,c=!1;return e.tf.withoutNormalizing(()=>{e.api.isCollapsed()||e.tf.delete();let n=e.api.isStart(e.selection.focus,p),s=e.api.isEmpty(e.selection,{after:!0}),f=a.s2.next(p);if(n){e.tf.insertNodes({checked:!!i&&o.checked,children:[{text:""}],type:r},{at:p}),c=!0;return}if(s){let i=e.api.marks()||{};e.tf.insertNodes({checked:!!t&&o.checked,children:[(0,l._)({text:""},i)],type:r},{at:f}),e.tf.select(f)}else e.tf.withoutNormalizing(()=>{e.tf.splitNodes()});c=!0}),c},_=(e,t)=>{let{fromListItem:i,start:r,toListItem:l}=t,[,n]=i,[,s]=l,o=!1;return e.tf.withoutNormalizing(()=>{let t,i=e.api.descendant({at:n,match:{type:f(e)}});if(!i)return;let[,l]=i,p=e.api.descendant({at:s,match:{type:f(e)}});if(p)if(r){let[,e]=p;t=e.concat([0])}else t=a.s2.next(a.lZ.lastChild(e,p[1])[1]);else{let i=e.api.parent(n);if(!i)return;let[r]=i,l=r.type,a=s.concat([1]);e.tf.insertNodes({children:[],type:l},{at:a}),t=a.concat([0])}o=e.tf.moveNodes({at:l,children:!0,to:t}),e.tf.delete({at:l})}),o},z=(e,t)=>{let{list:i,listItem:r,reverse:o=!0}=t,[p,c]=r;if(e.api.isExpanded()||!v(e,p))return!1;let f=a.s2.previous(c),d=!1;return e.tf.withoutNormalizing(()=>{if(f){let t=e.api.node(f);if(!t)return;let i=a.s2.next(c);e.tf.insertNodes((0,n._)((0,l._)({children:[{children:[{text:""}],type:e.getType(s.t.lic)}]},m(e,{inherit:!0,liNode:t[0]})),{type:e.getType(s.t.li)}),{at:i});let p=e.api.node(i);if(!p)return;let u=e.api.pathRef(p[1]);_(e,{fromListItem:r,toListItem:p}),(0,a.ul)(e,{reverse:o}),i=u.unref(),_(e,{fromListItem:[p[0],i],toListItem:t}),e.tf.removeNodes({at:i}),d=!0;return}T(e,{fromListItem:r,toList:i,toListIndex:1})}),d},A=(e,t)=>{let{checked:i=!1,type:r}=t;return e.tf.withoutNormalizing(()=>{if(!e.selection)return;let{validLiChildrenTypes:t}=e.getOptions(M);if(e.api.isCollapsed()||!e.api.isAt({blocks:!0})){let o=u(e);if(o){let{list:t}=o;t[0].type===r?C(e):e.tf.setNodes({type:r},{at:e.selection,mode:"lowest",match:t=>a.$7.isElement(t)&&f(e).includes(t.type)})}else{e.tf.wrapNodes({children:[],type:r});let a=Array.from(e.api.nodes({match:{type:e.getType(s.t.p)}}));e.api.block({match:{type:t}})||e.tf.setNodes({type:e.getType(s.t.lic)});let o=(0,n._)((0,l._)({children:[]},y(e,r,{checked:i})),{type:e.getType(s.t.li)});for(let[,t]of a)e.tf.wrapNodes(o,{at:t})}}else{let[o,p]=a.Cb.edges(e.selection),c=a.lZ.common(e,o.path,p.path);if(f(e).includes(c[0].type)||c[0].type===e.getType(s.t.li))if(c[0].type===r)C(e);else{let t=e.api.node({at:a.Cb.start(e.selection),match:{type:f(e)},mode:"lowest"}),i=e.api.node({at:a.Cb.end(e.selection),match:{type:f(e)},mode:"lowest"}),l=Math.min(t[1].length,i[1].length);e.tf.setNodes({type:r},{at:e.selection,mode:"all",match:(t,i)=>a.$7.isElement(t)&&f(e).includes(t.type)&&i.length>=l})}else{let o=c[1].length;Array.from(e.api.nodes({mode:"all"})).filter(e=>{let[,t]=e;return t.length===o+1}).forEach(o=>{if(f(e).includes(o[0].type))e.tf.setNodes({type:r},{at:o[1],mode:"all",match:t=>a.$7.isElement(t)&&f(e).includes(t.type)});else{(null==t?void 0:t.includes(o[0].type))||e.tf.setNodes({type:e.getType(s.t.lic)},{at:o[1]});let a=(0,n._)((0,l._)({children:[]},y(e,r,{checked:i})),{type:e.getType(s.t.li)});e.tf.wrapNodes(a,{at:o[1]}),e.tf.wrapNodes({children:[],type:r},{at:o[1]})}})}}})},I=(e,t)=>{let{type:i}=t;return A(e,{type:i})},B=e=>I(e,{type:e.getType(s.t.ulClassic)}),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return A(e,{checked:t,type:e.getType(s.t.taskList)})},R=e=>I(e,{type:e.getType(s.t.olClassic)}),O=function(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"character",{listItem:l}=t;if(!v(e,l[0])){let t=e.getType(s.t.li),n=Array.from(e.api.nodes({at:l[1],mode:"lowest",match:(i,r)=>{var l;if(0===r.length)return!1;let n=i.type===t,s=(null==(l=a.lZ.get(e,a.s2.next(r)))?void 0:l.type)===t;return n&&s}}),e=>e[1])[0];if(!n){let t=e.api.after(l[1]);if(t){let i=u(e,{at:t});if(i){let t=h(e,l[1]);return T(e,{deleteFromList:!0,fromList:i.list,toList:t}),!0}}return!1}let o=e.api.node(a.s2.next(n));if(!o)return!1;let p=e.api.parent(o[1]);if(p&&z(e,{list:p,listItem:o,reverse:!1}))return!0;let c=e.api.after(e.selection.focus);if(!c||!N(e,{anchor:e.selection.anchor,focus:c}))return!1;let f=e.getType(s.t.lic),d=[...e.api.nodes({at:c.path,mode:"lowest",match:e=>e.type===f})][0];if(d[0].children.length<2)return!1;i(r);let m=e.api.node(a.s2.parent(d[1]));return m&&0===m[0].children.length&&e.tf.removeNodes({at:m[1]}),!0}let n=e.api.node(a.s2.next([...l[1],0]));if(!n)return!1;let o=Array.from(a.lZ.children(e,n[1]))[0];return!!(b(e,{list:n,listItem:o})||z(e,{list:n,listItem:o}))},F=e=>{let t=e.api.start(e.selection);return e.api.above({at:t,match:{type:e.getType(s.t.li)}})},$=(e,t)=>{let{children:i}=t,r=[];for(let t of i)e.api.isBlock(t[0])?r.push(...$(e,{children:Array.from(a.lZ.children(e,t[1]))})):r.push(t);return r},K=(0,o.Kt)({key:s.t.ulClassic,node:{isContainer:!0,isElement:!0},parsers:{html:{deserializer:{rules:[{validNodeName:"UL"}]}}},render:{as:"ul"}}).extendTransforms(e=>{let{editor:t}=e;return{toggle:()=>{B(t)}}}),W=(0,o.Kt)({key:s.t.olClassic,node:{isContainer:!0,isElement:!0},parsers:{html:{deserializer:{rules:[{validNodeName:"OL"}]}}},render:{as:"ol"}}).extendTransforms(e=>{let{editor:t}=e;return{toggle:()=>{R(t)}}}),Y=(0,o.Kt)({key:s.t.taskList,node:{isContainer:!0,isElement:!0},options:{inheritCheckStateOnLineEndBreak:!1,inheritCheckStateOnLineStartBreak:!1},render:{as:"ul"}}).extendTransforms(e=>{let{editor:t}=e;return{toggle:()=>{S(t)}}}),P=(0,o.Kt)({key:s.t.li,inject:{plugins:{[s.t.html]:{parser:{preInsert:e=>{let{editor:t,type:i}=e;return t.api.some({match:{type:i}})}}}}},node:{isContainer:!0,isElement:!0,isStrictSiblings:!0},parsers:{html:{deserializer:{rules:[{validNodeName:"LI"}]}}},render:{as:"li"}}),q=(0,o.Kt)({key:s.t.lic,node:{isElement:!0}}),M=(0,o.qt)({key:s.t.listClassic,plugins:[K,W,Y,P,q]}).overrideEditor(e=>{let{editor:t,getOptions:i,tf:{resetBlock:r,tab:o}}=e;return{transforms:(0,l._)({resetBlock:e=>t.api.block({at:null==e?void 0:e.at,match:{type:t.getType(s.t.li)}})?void C(t):r(e),tab:e=>!!(()=>{let r=t.selection;if(t.selection){let{selection:n}=t;if(!t.api.isCollapsed()){let{anchor:e,focus:i}=a.Cb.isBackward(n)?{anchor:(0,l._)({},n.focus),focus:(0,l._)({},n.anchor)}:{anchor:(0,l._)({},n.anchor),focus:(0,l._)({},n.focus)},s=t.api.unhangRange({anchor:e,focus:i});s&&(r=s,t.tf.select(s))}let o=t.api.some({match:{type:t.getType(s.t.li)}});if(r&&o)return w(t,{at:r,enableResetOnShiftTab:i().enableResetOnShiftTab,increase:!e.reverse}),!0}})()||o(e)},(e=>{let{editor:t,getOptions:i,tf:{insertBreak:r}}=e;return{transforms:{insertBreak(){(()=>{let e;if(!t.selection)return;let r=u(t,{});if(r){let{list:i,listItem:l}=r;if(t.api.isEmpty(t.selection,{block:!0})&&(e=L(t,{list:i,listItem:l})))return!0}let l=t.api.block({match:{type:t.getType(s.t.li)}});if(l&&t.api.isEmpty(t.selection,{block:!0})&&t.tf.resetBlock({at:l[1]})||!e&&x(t,i()))return!0})()||r()}}}})(e).transforms,(e=>{let{editor:t,tf:{deleteBackward:i}}=e;return{transforms:{deleteBackward(e){(()=>{let i=u(t,{}),r=!1;if(i){let{list:l,listItem:n}=i;t.api.isAt({start:!0,match:e=>e.type===t.getType(s.t.li)})&&t.tf.withoutNormalizing(()=>{let i;if((r=b(t,{list:l,listItem:n}))||(r=z(t,{list:l,listItem:n})))return!0;if(!a.s2.hasPrevious(n[1])&&!c(t,l[1])){t.tf.resetBlock({at:n[1]}),r=!0;return}let o=t.api.before(t.selection.focus),p=!1;if(o&&N(t,{anchor:t.selection.anchor,focus:o})){let e=t.getType(s.t.lic);p=(i=[...t.api.nodes({at:n[1],mode:"lowest",match:t=>t.type===e})][0])[0].children.length>1}if((0,a.ul)(t,{reverse:!0,unit:e}),r=!0,!i||!p)return;let f=t.api.node(a.s2.parent(i[1]));f&&0===f[0].children.length&&t.tf.removeNodes({at:f[1]})})}return r})()||i(e)}}}})(e).transforms,(e=>{let{editor:t,tf:{deleteForward:i}}=e;return{transforms:{deleteForward(e){let r;r=!1,(null==t?void 0:t.selection)&&t.api.isAt({end:!0})&&t.tf.withoutNormalizing(()=>{let l=u(t,{});if(!l){r=(e=>{let t=e.api.after(e.selection.focus);if(t){let i=u(e,{at:t});if(i){let{listItem:t}=i,r=e.api.block({at:e.selection.anchor});if(!e.api.string(r[1]))return e.tf.removeNodes(),!0;v(e,t[0])&&L(e,u(e,{at:[...t[1],1,0,0]}))}}return!1})(t);return}r=O(t,l,i,e)}),r||i(e)}}}})(e).transforms,(e=>{let{editor:t,tf:{deleteFragment:i}}=e;return{transforms:{deleteFragment(e){let r;r=!1,t.tf.withoutNormalizing(()=>{if(!N(t))return;let e=t.api.end(t.selection),i=t.api.above({at:e,match:{type:t.getType(s.t.li)}}),l=i&&!v(t,i[0])?t.api.pathRef(i[1]):void 0;if(!F(t)||!i){r=!1;return}(0,a.ul)(t);let n=F(t);if(l){var o;let e=l.unref(),i=d(t,{diffListPath:null==(o=n&&t.api.parent(n[1]))?void 0:o[1],liPath:e});i&&t.tf.removeNodes({at:i}),r=!0}}),r||i(e)}}}})(e).transforms,(e=>{let{editor:t,tf:{insertFragment:i}}=e,r=t.getType(s.t.li),o=t.getType(s.t.lic),p=e=>{if(!k(t,e))return[e];let i=Array.from(a.lZ.texts(e)),l=i.reduce((t,i)=>a.s2.isAncestor(t[1],i[1])?t:a.lZ.common(e,i[1],t[1]),((e,t,i)=>{let r=a.s2.parent(t[1]);for(;a.lZ.get(e,r).type!==i;)r=a.s2.parent(r);return[a.lZ.get(e,r),r]})(e,i[0],r)),[n,...s]=k(t,l[0])?l[0].children:[l[0]];return[...(e=>{let i=null,l=e;for(;k(t,l)||l.type===r&&l.children[0].type!==o;)i=l,[l]=l.children;return i?i.children:[l]})(n),...s]};return{transforms:{insertFragment(e){let s=t.api.node({match:{type:r},mode:"lowest"});if(!s||(i([{text:""}]),!(s=t.api.node({match:{type:r},mode:"lowest"}))))return i(k(t,e[0])?[{text:""},...e]:e);let c=t.api.node({match:{type:o},mode:"lowest"});if(!c)return i(k(t,e[0])?[{text:""},...e]:e);let{listItemNodes:f,textNode:d}=((e,i,s)=>{let c,f,[,d]=i,[u,h]=s,y=!a.lZ.string(u),[g,...v]=e.flatMap(p).map(e=>{let s;return s=m(t,{inherit:!0,liNode:i[0]}),e.type===r?e:(0,n._)((0,l._)({children:[e]},s),{type:r})});if(k(t,e[0]))if(1===e.length&&k(t,e[0])&&1===[...a.lZ.nodes({children:e})].filter(e=>a.$7.isElement(e[0])).filter(e=>{let[t]=e;return t.type===o}).length)c=g,f=v;else if(y){let[,...e]=a.lZ.get(t,d).children,[i,...r]=g.children;if(t.tf.insertNodes(i,{at:a.s2.next(h),select:!0}),t.tf.removeNodes({at:h}),null==r?void 0:r.length)if(null==e?void 0:e.length){let e=[...d,1,0];t.tf.insertNodes(r[0].children,{at:e,select:!0})}else t.tf.insertNodes(r,{at:a.s2.next(h),select:!0});c={text:""},f=v}else c={text:""},f=[g,...v];else c=g,f=v;return{listItemNodes:f,textNode:c}})(e,s,c);i([d]);let[,u]=s;return t.tf.insertNodes(f,{at:a.s2.next(u),select:!0})}}}})(e).transforms,(e=>{let{editor:t,getOptions:i,tf:{normalizeNode:r}}=e;return{transforms:{normalizeNode(e){var l;let[n,o]=e,p=t.getType(s.t.li),c=t.getType(s.t.lic),d=t.getType(s.t.p);if(!a.$7.isElement(n))return r([n,o]);if(k(t,n)){let e=Array.from(a.lZ.children(t,o)).find(e=>{let[t]=e;return t.type!==p});if(e)return t.tf.wrapNodes({children:[],type:p},{at:e[1]});if(n.type===t.getType(s.t.taskList)){let e=Array.from(a.lZ.children(t,o)).filter(e=>{let[t]=e;return t.type===p&&!("checked"in t)});if(e.length>0)return t.tf.withoutNormalizing(()=>e.forEach(e=>{let[,i]=e;t.tf.setNodes({checked:!1},{at:i})}))}else{let e=Array.from(a.lZ.children(t,o)).filter(e=>{let[t]=e;return t.type===p&&"checked"in t});if(e.length>0)return t.tf.withoutNormalizing(()=>e.forEach(e=>{let[,i]=e;t.tf.unsetNodes("checked",{at:i})}))}}if((0,a.YW)(n,[],{type:f(t)})){if(0===n.children.length||!n.children.some(e=>e.type===p))return t.tf.removeNodes({at:o});let e=a.s2.next(o),i=a.lZ.get(t,e);(null==i?void 0:i.type)===n.type&&T(t,{deleteFromList:!0,fromList:[i,e],toList:[n,o]});let r=a.s2.previous(o),l=a.lZ.get(t,r);if((null==l?void 0:l.type)===n.type)return void t.tf.normalizeNode([l,r]);if(((e,t)=>{let{nestedListItem:i}=t,[,r]=i,l=e.api.parent(r);if(!(l&&(0,a.YW)(l[0],[],{type:f(e)})))return!1;let n=a.s2.previous(r);if(!n)return!1;let s=e.api.node(n);if(s){let[,t]=s,i=t.concat([1]);return e.tf.moveNodes({at:r,to:i}),!0}})(t,{nestedListItem:[n,o]}))return}if(!(n.type===t.getType(s.t.li)&&((e,t)=>{let{listItem:i,validLiChildrenTypes:r=[]}=t,l=!1,n=new Set([e.getType(s.t.lic),e.getType(s.t.olClassic),e.getType(s.t.taskList),e.getType(s.t.ulClassic),...r]),[,o]=i,p=Array.from(a.lZ.children(e,i[1])),c=p.filter(e=>{let[t]=e;return!n.has(t.type)}).map(t=>{let[,i]=t;return e.api.pathRef(i)}),d=p[0],[u,h]=null!=d?d:[];if(!d||!e.api.isBlock(u))return e.tf.insertNodes(e.api.create.block({type:e.getType(s.t.lic)}),{at:o.concat([0])}),!0;if(e.api.isBlock(u)&&!(0,a.YW)(u,[],{type:e.getType(s.t.lic)})){if((0,a.YW)(u,[],{type:f(e)})){let t=e.api.parent(i[1]);return Array.from(a.lZ.children(e,d[1])).reverse().forEach(t=>{L(e,{list:d,listItem:t})}),e.tf.removeNodes({at:[...t[1],0]}),!0}if(r.includes(u.type))return!0;e.tf.setNodes({type:e.getType(s.t.lic)},{at:h}),l=!0}let m=Array.from(a.lZ.children(e,d[1]));if(m.length>0){let t=[],i=[];for(let r of m){if(!e.api.isBlock(r[0]))break;t.push(e.api.pathRef(r[1])),i.push(...$(e,{children:Array.from(a.lZ.children(e,r[1]))}))}let r=a.s2.next(m.at(-1)[1]);i.reverse().forEach(t=>{let[,i]=t;e.tf.moveNodes({at:i,to:r})}),t.forEach(t=>{let i=t.unref();i&&e.tf.removeNodes({at:i})}),t.length>0&&(l=!0)}return!!l||(c.reverse().forEach(t=>{let i=t.unref();i&&e.tf.moveNodes({at:i,to:h.concat([0])})}),c.length>0)})(t,{listItem:[n,o],validLiChildrenTypes:i().validLiChildrenTypes}))){if(n.type===c&&c!==d&&(null==(l=t.api.parent(o))?void 0:l[0].type)!==p)return void t.tf.setNodes({type:d},{at:o});r([n,o])}}}}})(e).transforms)}}).extendEditorTransforms(e=>{let{editor:t}=e;return{toggle:{bulletedList:(0,p.gv)(B,t),list:(0,p.gv)(I,t),numberedList:(0,p.gv)(R,t),taskList:(0,p.gv)(S,t)}}})}}]);