(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77719],{1654:(e,t,n)=>{"use strict";n.d(t,{_9:()=>i,S8:()=>s,gZ:()=>o}),crypto.subtle;let r=crypto.getRandomValues.bind(crypto),i=Math.random,s=()=>r(new Uint32Array(1))[0],o=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^s()&15>>e/4).toString(16))},3515:(e,t,n)=>{"use strict";n.d(t,{Af:()=>l,QV:()=>i,db:()=>c,jN:()=>a,tv:()=>u,ux:()=>h});var r=n(49911);let i=String.fromCharCode;i(65535);let s=/^\s*/g,o=/([A-Z])/g,a=(e,t)=>e.replace(o,e=>`${t}${e.toLowerCase()}`).replace(s,""),c="u">typeof TextEncoder?new TextEncoder:null,l=c?e=>c.encode(e):e=>{let t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r},u="u"<typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});u&&1===u.decode(new Uint8Array).length&&(u=null);let h=(e,t)=>r.t8(t,()=>e).join("")},5572:(e,t,n)=>{var r,i,s;r=Math.floor,i=Math.abs,s=Math.pow,e.exports=(function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){if(s)return s(o,!0);var c=Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){return i(t[o][1][e]||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var s=void 0,o=0;o<r.length;o++)i(r[o]);return i})({1:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0<t%4)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}n.byteLength=function(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i},n.toByteArray=function(e){var t,n,i=r(e),a=i[0],c=i[1],l=new o(3*(a+c)/4-c),u=0,h=0<c?a-4:a;for(n=0;n<h;n+=4)t=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],l[u++]=255&t>>16,l[u++]=255&t>>8,l[u++]=255&t;return 2===c&&(t=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===c&&(t=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,l[u++]=255&t>>8,l[u++]=255&t),l},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,s=[],o=0,a=n-r;o<a;o+=16383)s.push(function(e,t,n){for(var r,s=[],o=t;o<n;o+=3)s.push(i[63&(r=(0xff0000&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2]))>>18]+i[63&r>>12]+i[63&r>>6]+i[63&r]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===r?s.push(i[(t=e[n-1])>>2]+i[63&t<<4]+"=="):2===r&&s.push(i[(t=(e[n-2]<<8)+e[n-1])>>10]+i[63&t>>4]+i[63&t<<2]+"="),s.join("")};for(var i=[],s=[],o="u"<typeof Uint8Array?Array:Uint8Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=a.length;c<l;++c)i[c]=a[c],s[a.charCodeAt(c)]=c;s[45]=62,s[95]=63},{}],2:[function(){},{}],3:[function(e,t,n){(function(){(function(){"use strict";var t=String.fromCharCode,r=Math.min;function i(e){if(0x7fffffff<e)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e){var r=e,s=t;if(("string"!=typeof s||""===s)&&(s="utf8"),!o.isEncoding(s))throw TypeError("Unknown encoding: "+s);var a=0|d(r,s),c=i(a),l=c.write(r,s);return l!==a&&(c=c.slice(0,l)),c}if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(T(e,ArrayBuffer)||e&&T(e.buffer,ArrayBuffer)){var f,p=e,g=t,y=n;if(0>g||p.byteLength<g)throw RangeError('"offset" is outside of buffer bounds');if(p.byteLength<g+(y||0))throw RangeError('"length" is outside of buffer bounds');return(f=void 0===g&&void 0===y?new Uint8Array(p):void 0===y?new Uint8Array(p,g):new Uint8Array(p,g,y)).__proto__=o.prototype,f}if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var b=e.valueOf&&e.valueOf();if(null!=b&&b!==e)return o.from(b,t,n);var m=function(e){if(o.isBuffer(e)){var t=0|h(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0:"number"!=typeof e.length||function(e){return e!=e}(e.length)?i(0):u(e)}(e);if(m)return m;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(0>e)throw RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return c(e),i(0>e?0:0|h(e))}function u(e){for(var t=0>e.length?0:0|h(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function d(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||T(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return C(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(i)return r?-1:C(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,n,i){var s,o,a,c=!1;if((void 0===n||0>n)&&(n=0),n>this.length||((void 0===i||i>this.length)&&(i=this.length),0>=i)||(i>>>=0)<=(n>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var r,i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var s="",o=t;o<n;++o){s+=16>(r=e[o])?"0"+r.toString(16):r.toString(16)}return s}(this,n,i);case"utf8":case"utf-8":return b(this,n,i);case"ascii":return function(e,n,i){var s="";i=r(e.length,i);for(var o=n;o<i;++o)s+=t(127&e[o]);return s}(this,n,i);case"latin1":case"binary":return function(e,n,i){var s="";i=r(e.length,i);for(var o=n;o<i;++o)s+=t(e[o]);return s}(this,n,i);case"base64":return s=this,o=n,a=i,0===o&&a===s.length?A.fromByteArray(s):A.fromByteArray(s.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,n,r){for(var i=e.slice(n,r),s="",o=0;o<i.length;o+=2)s+=t(i[o]+256*i[o+1]);return s}(this,n,i);default:if(c)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),c=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){var s;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):0x7fffffff<n?n=0x7fffffff:-0x80000000>n&&(n=-0x80000000),(s=n*=1)!=s&&(n=i?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(i)return -1;n=e.length-1}else if(0>n)if(!i)return -1;else n=0;if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){function s(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var o,a=1,c=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=(r+"").toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>e.length||2>t.length)return -1;a=2,c/=2,l/=2,n/=2}if(i){var u=-1;for(o=n;o<c;o++)if(s(e,o)!==s(t,-1===u?0:o-u))-1!==u&&(o-=o-u),u=-1;else if(-1===u&&(u=o),o-u+1===l)return u*a}else for(n+l>c&&(n=c-l),o=n;0<=o;o--){for(var h=!0,d=0;d<l;d++)if(s(e,o+d)!==s(t,d)){h=!1;break}if(h)return o}return -1}function b(e,n,i){i=r(e.length,i);for(var s=[],o=n;o<i;){var a,c,l,u,h=e[o],d=null,f=239<h?4:223<h?3:191<h?2:1;o+f<=i&&(1===f?128>h&&(d=h):2===f?128==(192&(a=e[o+1]))&&127<(u=(31&h)<<6|63&a)&&(d=u):3===f?(a=e[o+1],c=e[o+2],128==(192&a)&&128==(192&c)&&2047<(u=(15&h)<<12|(63&a)<<6|63&c)&&(55296>u||57343<u)&&(d=u)):4===f&&(a=e[o+1],c=e[o+2],l=e[o+3],128==(192&a)&&128==(192&c)&&128==(192&l)&&65535<(u=(15&h)<<18|(63&a)<<12|(63&c)<<6|63&l)&&1114112>u&&(d=u))),null===d?(d=65533,f=1):65535<d&&(d-=65536,s.push(55296|1023&d>>>10),d=56320|1023&d),s.push(d),o+=f}var p=s,g=p.length;if(g<=4096)return t.apply(String,p);for(var y="",b=0;b<g;)y+=t.apply(String,p.slice(b,b+=4096));return y}function m(e,t,n){if(0!=e%1||0>e)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function w(e,t,n,r,i,s){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function v(e,t,n,r){if(n+r>e.length||0>n)throw RangeError("Index out of range")}function _(e,t,n,r,i){return t*=1,n>>>=0,i||v(e,t,n,4,34028234663852886e22,-34028234663852886e22),x.write(e,t,n,r,23,4),n+4}function E(e,t,n,r,i){return t*=1,n>>>=0,i||v(e,t,n,8,17976931348623157e292,-17976931348623157e292),x.write(e,t,n,r,52,8),n+8}function C(e,t){t=t||1/0;for(var n,r=e.length,i=null,s=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&57344>n){if(!i){if(56319<n||o+1===r){-1<(t-=3)&&s.push(239,191,189);continue}i=n;continue}if(56320>n){-1<(t-=3)&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,128>n){if(0>(t-=1))break;s.push(n)}else if(2048>n){if(0>(t-=2))break;s.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;s.push(224|n>>12,128|63&n>>6,128|63&n)}else if(1114112>n){if(0>(t-=4))break;s.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}else throw Error("Invalid code point")}return s}function S(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function R(e){return A.toByteArray(function(e){if(2>(e=(e=e.split("=")[0]).trim().replace(O,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}(e))}function k(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function T(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var A=e("base64-js"),x=e("ieee754");n.Buffer=o,n.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"u"<typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){return o.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return o.isBuffer(this)?this.byteOffset:void 0}}),"u">typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,n){return c(e),0>=e||void 0===t?i(e):"string"==typeof n?i(e).fill(t,n):i(e).fill(t)},o.allocUnsafe=function(e){return l(e)},o.allocUnsafeSlow=function(e){return l(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(T(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),T(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,s=0,a=r(n,i);s<a;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:+(i<n)},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var n,r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(T(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=d,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):f.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,i,s){if(T(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),0>t||n>e.length||0>i||s>this.length)throw RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var a=s-i,c=n-t,l=r(a,c),u=this.slice(i,s),h=e.slice(t,n),d=0;d<l;++d)if(u[d]!==h[d]){a=u[d],c=h[d];break}return a<c?-1:+(c<a)},o.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,s,o,a,c,l,u,h,d=this.length-t;if((void 0===n||n>d)&&(n=d),0<e.length&&(0>n||0>t)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var f=!1;;)switch(r){case"hex":return function(e,t,n,r){n=+n||0;var i=e.length-n;r?(r*=1)>i&&(r=i):r=i;var s=t.length;r>s/2&&(r=s/2);for(var o,a,c=0;c<r&&(o=a=parseInt(t.substr(2*c,2),16))==o;++c)e[n+c]=a;return c}(this,e,t,n);case"utf8":case"utf-8":return i=t,s=n,k(C(e,this.length-i),this,i,s);case"ascii":return o=t,a=n,k(S(e),this,o,a);case"latin1":case"binary":return function(e,t,n,r){return k(S(t),e,n,r)}(this,e,t,n);case"base64":return c=t,l=n,k(R(e),this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,h=n,k(function(e,t){for(var n,r,i=[],s=0;s<e.length&&!(0>(t-=2));++s)r=(n=e.charCodeAt(s))>>8,i.push(n%256),i.push(r);return i}(e,this.length-u),this,u,h);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?0>(e+=n)&&(e=0):e>n&&(e=n),0>t?0>(t+=n)&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=o.prototype,r},o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return e>>>=0,t||m(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=s(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=s(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||m(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||m(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?0xffff0000|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||m(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?0xffff0000|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||m(e,4,this.length),x.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||m(e,4,this.length),x.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||m(e,8,this.length),x.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||m(e,8,this.length),x.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){var i=s(2,8*n)-1;w(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=255&e/o;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){var i=s(2,8*n)-1;w(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;0<=--o&&(a*=256);)this[t+o]=255&e/a;return t+n},o.prototype.writeUInt8=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e*=1,t>>>=0,!r){var i=s(2,8*n-1);w(this,e,t,n,i-1,-i)}var o=0,a=1,c=0;for(this[t]=255&e;++o<n&&(a*=256);)0>e&&0===c&&0!==this[t+o-1]&&(c=1),this[t+o]=255&(e/a|0)-c;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e*=1,t>>>=0,!r){var i=s(2,8*n-1);w(this,e,t,n,i-1,-i)}var o=n-1,a=1,c=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)0>e&&0===c&&0!==this[t+o+1]&&(c=1),this[t+o]=255&(e/a|0)-c;return t+n},o.prototype.writeInt8=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,4,0x7fffffff,-0x80000000),0>e&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return _(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return _(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return E(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return E(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(0>t)throw RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw RangeError("Index out of range");if(0>r)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var s=i-1;0<=s;--s)e[s+t]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var i,s=e.charCodeAt(0);("utf8"===r&&128>s||"latin1"===r)&&(e=s)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=o.isBuffer(e)?e:o.from(e,r),c=a.length;if(0===c)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%c]}return this};var O=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(e,t,n){(function(r){(function(){let i;n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"===e||(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},n.useColors=function(){return!!("u">typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))||!("u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("u">typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"u">typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),i=!1,n.destroy=()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))},n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(n);let{formatters:s}=t.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))},{"./common":5,_process:12}],5:[function(e,t){t.exports=function(t){function n(e){function t(...e){if(!t.enabled)return;let r=+new Date;t.diff=r-(i||r),t.prev=i,t.curr=r,i=r,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if("%%"===r)return"%";s++;let o=n.formatters[i];if("function"==typeof o){let n=e[s];r=o.call(t,n),e.splice(s,1),s--}return r}),n.formatArgs.call(t,e),(t.log||n.log).apply(t,e)}let i,s=null;return t.namespace=e,t.useColors=n.useColors(),t.color=n.selectColor(e),t.extend=r,t.destroy=n.destroy,Object.defineProperty(t,"enabled",{enumerable:!0,configurable:!1,get:()=>null===s?n.enabled(e):s,set:e=>{s=e}}),"function"==typeof n.init&&n.init(t),t}function r(e,t){let r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){let e=[...n.names.map(s),...n.skips.map(s).map(e=>"-"+e)].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.names=[],n.skips=[];let r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(RegExp("^"+e.substr(1)+"$")):n.names.push(RegExp("^"+e+"$")))},n.enabled=function(e){let t,r;if("*"===e[e.length-1])return!0;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{n[e]=t[e]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return n.colors[i(t)%n.colors.length]},n.enable(n.load()),n}},{ms:11}],6:[function(e,t){"use strict";function n(e,t){for(let n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}t.exports=function(e,t,r){if(!e||"string"==typeof e)throw TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof t&&(r=t,t=""),t&&(r.code=t);try{return n(e,r)}catch(i){r.message=e.message,r.stack=e.stack;let t=function(){};return t.prototype=Object.create(Object.getPrototypeOf(e)),n(new t,r)}}},{}],7:[function(e,t){"use strict";function n(){n.init.call(this)}function r(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function s(e,t,n,s){var o,a,c;if(r(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),c=a[t]),void 0===c)c=a[t]=n,++e._eventsCount;else if("function"==typeof c?c=a[t]=s?[n,c]:[c,n]:s?c.unshift(n):c.push(n),0<(o=i(e))&&c.length>o&&!c.warned){c.warned=!0;var l=Error("Possible EventEmitter memory leak detected. "+c.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,console&&console.warn&&console.warn(l)}return e}function o(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.bind(r);return i.listener=n,r.wrapFn=i,i}function c(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):u(i,i.length)}function l(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function u(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var d,f="object"==typeof Reflect?Reflect:null,p=f&&"function"==typeof f.apply?f.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};d=f&&"function"==typeof f.ownKeys?f.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var g=Number.isNaN||function(e){return e!=e};t.exports=n,t.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}h(e,t,s,{once:!0}),"error"!==t&&"function"==typeof e.on&&h(e,"error",i,{once:!0})})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var y=10;Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(e){if("number"!=typeof e||0>e||g(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");y=e}}),n.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||g(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return i(this)},n.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){if(0<t.length&&(s=t[0]),s instanceof Error)throw s;var s,o=Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)p(a,this,t);else for(var c=a.length,l=u(a,c),n=0;n<c;++n)p(l[n],this,t);return!0},n.prototype.addListener=function(e,t){return s(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return s(this,e,t,!0)},n.prototype.once=function(e,t){return r(t),this.on(e,a(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return r(t),this.prependListener(e,a(this,e,t)),this},n.prototype.removeListener=function(e,t){var n,i,s,o,a;if(r(t),void 0===(i=this._events)||void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(s=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,s=o;break}if(0>s)return this;0===s?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,s),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},n.prototype.listeners=function(e){return c(this,e,!0)},n.prototype.rawListeners=function(e){return c(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},n.prototype.listenerCount=l,n.prototype.eventNames=function(){return 0<this._eventsCount?d(this._events):[]}},{}],8:[function(e,t){t.exports=function(){if("u"<typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],9:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,c=8*i-r-1,l=(1<<c)-1,u=l>>1,h=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-h)-1,p>>=-h,h+=c;0<h;o=256*o+e[t+d],d+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=r;0<h;a=256*a+e[t+d],d+=f,h-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=s(2,r),o-=u}return(p?-1:1)*a*s(2,o-r)},n.write=function(e,t,n,o,a,c){var l,u,h,d=Math.LN2,f=Math.log,p=8*c-a-1,g=(1<<p)-1,y=g>>1,b=23===a?s(2,-24)-s(2,-77):0,m=o?0:c-1,w=o?1:-1,v=+(0>t||0===t&&0>1/t);for(isNaN(t=i(t))||t===1/0?(u=+!!isNaN(t),l=g):(l=r(f(t)/d),1>t*(h=s(2,-l))&&(l--,h*=2),2<=(t+=1<=l+y?b/h:b*s(2,1-y))*h&&(l++,h/=2),l+y>=g?(u=0,l=g):1<=l+y?(u=(t*h-1)*s(2,a),l+=y):(u=t*s(2,y-1)*s(2,a),l=0));8<=a;e[n+m]=255&u,m+=w,u/=256,a-=8);for(l=l<<a|u,p+=a;0<p;e[n+m]=255&l,m+=w,l/=256,p-=8);e[n+m-w]|=128*v}},{}],10:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],11:[function(e,t){var n=Math.round;function r(e,t,r,i){return n(e/r)+" "+i+(t>=1.5*r?"s":"")}t.exports=function(e,t){t=t||{};var s,o,a=typeof e;if("string"==a&&0<e.length){var c=e;if(!(100<(c+="").length)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(l){var u=parseFloat(l[1]),h=(l[2]||"ms").toLowerCase();return"years"===h||"year"===h||"yrs"===h||"yr"===h||"y"===h?315576e5*u:"weeks"===h||"week"===h||"w"===h?6048e5*u:"days"===h||"day"===h||"d"===h?864e5*u:"hours"===h||"hour"===h||"hrs"===h||"hr"===h||"h"===h?36e5*u:"minutes"===h||"minute"===h||"mins"===h||"min"===h||"m"===h?6e4*u:"seconds"===h||"second"===h||"secs"===h||"sec"===h||"s"===h?1e3*u:"milliseconds"===h||"millisecond"===h||"msecs"===h||"msec"===h||"ms"===h?u:void 0}}return}if("number"===a&&isFinite(e))return t.long?864e5<=(s=i(e))?r(e,s,864e5,"day"):36e5<=s?r(e,s,36e5,"hour"):6e4<=s?r(e,s,6e4,"minute"):1e3<=s?r(e,s,1e3,"second"):e+" ms":864e5<=(o=i(e))?n(e/864e5)+"d":36e5<=o?n(e/36e5)+"h":6e4<=o?n(e/6e4)+"m":1e3<=o?n(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],12:[function(e,t){function n(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function s(){p&&d&&(p=!1,d.length?f=d.concat(f):g=-1,f.length&&o())}function o(){if(!p){var e=i(s);p=!0;for(var t=f.length;t;){for(d=f,f=[];++g<t;)d&&d[g].run();g=-1,t=f.length}d=null,p=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function c(){}var l,u,h=t.exports={};try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(e){u=r}var d,f=[],p=!1,g=-1;h.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new a(e,t)),1!==f.length||p||i(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(){return[]},h.binding=function(){throw Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],13:[function(e,t){(function(e){(function(){let n;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("u"<typeof window?e:window):e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))}).call(this)}).call(this,void 0===n.g?"u"<typeof self?"u"<typeof window?{}:window:self:n.g)},{}],14:[function(e,t){(function(n,r){(function(){"use strict";var i=e("safe-buffer").Buffer,s=r.crypto||r.msCrypto;t.exports=s&&s.getRandomValues?function(e,t){if(e>0xffffffff)throw RangeError("requested too many random bytes");var r=i.allocUnsafe(e);if(0<e)if(65536<e)for(var o=0;o<e;o+=65536)s.getRandomValues(r.slice(o,o+65536));else s.getRandomValues(r);return"function"==typeof t?n.nextTick(function(){t(null,r)}):r}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("_process"),void 0===n.g?"u"<typeof self?"u"<typeof window?{}:window:self:n.g)},{_process:12,"safe-buffer":30}],15:[function(e,t){"use strict";function n(e,t,n){n||(n=Error);var r=function(e){function n(n,r,i){return e.call(this,"string"==typeof t?t:t(n,r,i))||this}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e,n}(n);r.prototype.name=n.name,r.prototype.code=e,i[e]=r}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return e+""}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}var i={};n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(e,t,n){if("string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(c="must not be",t=t.replace(/^not /,"")):c="must be",s=" argument",(void 0===o||o>e.length)&&(o=e.length),e.substring(o-s.length,o)===s)l="The ".concat(e," ").concat(c," ").concat(r(t,"type"));else{var i,s,o,a,c,l,u=("number"!=typeof a&&(a=0),a+1>e.length||-1===e.indexOf(".",a))?"argument":"property";l='The "'.concat(e,'" ').concat(u," ").concat(c," ").concat(r(t,"type"))}return l+". Received type ".concat(typeof n)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},{}],16:[function(e,t){(function(n){(function(){"use strict";function r(e){return this instanceof r?void(a.call(this,e),c.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i)))):new r(e)}function i(){this._writableState.ended||n.nextTick(s,this)}function s(e){e.end()}var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var a=e("./_stream_readable"),c=e("./_stream_writable");e("inherits")(r,a);for(var l,u=o(c.prototype),h=0;h<u.length;h++)l=u[h],r.prototype[l]||(r.prototype[l]=c.prototype[l]);Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(e,t){"use strict";function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform");e("inherits")(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":19,inherits:10}],18:[function(e,t){(function(n,r){(function(){"use strict";function i(t,n,r){_=_||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof _),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=L(this,t,"readableHighWaterMark",r),this.buffer=new D,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(A||(A=e("string_decoder/").StringDecoder),this.decoder=new A(t.encoding),this.encoding=t.encoding)}function s(t){if(_=_||e("./_stream_duplex"),!(this instanceof s))return new s(t);var n=this instanceof _;this._readableState=new i(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),S.call(this)}function o(e,t,n,r,i){E("readableAddChunk",t);var s,o,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(E("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?l(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,u(e)))}}(e,c);else if(i||(o=function(e,t){var n;return R.isBuffer(t)||t instanceof k||"string"==typeof t||void 0===t||e.objectMode||(n=new I("chunk",["string","Buffer","Uint8Array"],t)),n}(c,t)),o)F(e,o);else if(c.objectMode||t&&0<t.length)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===R.prototype||(s=t,t=R.from(s)),r)c.endEmitted?F(e,new U):a(e,c,t,!0);else if(c.ended)F(e,new j);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?a(e,c,t,!1):h(e,c)):a(e,c,t,!1)}else r||(c.reading=!1,h(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function a(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e)),h(e,t)}function c(e,t){var n;return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(0x40000000<=(n=e)?n=0x40000000:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),t.highWaterMark=n),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function l(e){var t=e._readableState;E("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(E("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(u,e))}function u(e){var t=e._readableState;E("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,y(e)}function h(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(d,e,t))}function d(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(E("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function f(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function p(e){E("readable nexttick read 0"),e.read(0)}function g(e,t){E("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;for(E("flow",t.flowing);t.flowing&&null!==e.read(););}function b(e,t){var n;return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n)}function m(e){var t=e._readableState;E("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(w,t,e))}function w(e,t){if(E("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function v(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1}t.exports=s,s.ReadableState=i,e("events").EventEmitter;var _,E,C=function(e,t){return e.listeners(t).length},S=e("./internal/streams/stream"),R=e("buffer").Buffer,k=r.Uint8Array||function(){},T=e("util");E=T&&T.debuglog?T.debuglog("stream"):function(){};var A,x,O,D=e("./internal/streams/buffer_list"),P=e("./internal/streams/destroy"),L=e("./internal/streams/state").getHighWaterMark,M=e("../errors").codes,I=M.ERR_INVALID_ARG_TYPE,j=M.ERR_STREAM_PUSH_AFTER_EOF,N=M.ERR_METHOD_NOT_IMPLEMENTED,U=M.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(s,S);var F=P.errorOrDestroy,B=["error","close","destroy","pause","resume"];Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),s.prototype.destroy=P.destroy,s.prototype._undestroy=P.undestroy,s.prototype._destroy=function(e,t){t(e)},s.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=R.from(e,t),t=""),n=!0),o(this,e,t,!1,n)},s.prototype.unshift=function(e){return o(this,e,null,!0,!1)},s.prototype.isPaused=function(){return!1===this._readableState.flowing},s.prototype.setEncoding=function(t){A||(A=e("string_decoder/").StringDecoder);var n=new A(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},s.prototype.read=function(e){E("read",e),e=parseInt(e,10);var t,n=this._readableState,r=e;if(0!==e&&(n.emittedReadable=!1),0===e&&n.needReadable&&((0===n.highWaterMark?0<n.length:n.length>=n.highWaterMark)||n.ended))return E("read: emitReadable",n.length,n.ended),0===n.length&&n.ended?m(this):l(this),null;if(0===(e=c(e,n))&&n.ended)return 0===n.length&&m(this),null;var i=n.needReadable;return E("need readable",i),(0===n.length||n.length-e<n.highWaterMark)&&E("length less than watermark",i=!0),n.ended||n.reading?E("reading or ended",i=!1):i&&(E("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(e=c(r,n))),null===(t=0<e?b(e,n):null)?(n.needReadable=n.length<=n.highWaterMark,e=0):(n.length-=e,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),r!==e&&n.ended&&m(this)),null!==t&&this.emit("data",t),t},s.prototype._read=function(){F(this,new N("_read()"))},s.prototype.pipe=function(e,t){function r(){E("onend"),e.end()}function i(t){E("ondata");var n=e.write(t);E("dest.write",n),!1===n&&((1===h.pipesCount&&h.pipes===e||1<h.pipesCount&&-1!==v(h.pipes,e))&&!p&&(E("false write response, pause",h.awaitDrain),h.awaitDrain++),u.pause())}function s(t){E("onerror",t),c(),e.removeListener("error",s),0===C(e,"error")&&F(e,t)}function o(){e.removeListener("finish",a),c()}function a(){E("onfinish"),e.removeListener("close",o),c()}function c(){E("unpipe"),u.unpipe(e)}var l,u=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,E("pipe count=%d opts=%j",h.pipesCount,t);var d=t&&!1===t.end||e===n.stdout||e===n.stderr?c:r;h.endEmitted?n.nextTick(d):u.once("end",d),e.on("unpipe",function t(n,l){E("onunpipe"),n===u&&l&&!1===l.hasUnpiped&&(l.hasUnpiped=!0,E("cleanup"),e.removeListener("close",o),e.removeListener("finish",a),e.removeListener("drain",f),e.removeListener("error",s),e.removeListener("unpipe",t),u.removeListener("end",r),u.removeListener("end",c),u.removeListener("data",i),p=!0,h.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f())});var f=function(){var e=u._readableState;E("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&C(u,"data")&&(e.flowing=!0,y(u))};e.on("drain",f);var p=!1;return u.on("data",i),l="error","function"==typeof e.prependListener?e.prependListener(l,s):e._events&&e._events[l]?Array.isArray(e._events[l])?e._events[l].unshift(s):e._events[l]=[s,e._events[l]]:e.on(l,s),e.once("close",o),e.once("finish",a),e.emit("pipe",u),h.flowing||(E("pipe resume"),u.resume()),e},s.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=v(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},s.prototype.on=function(e,t){var r=S.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"!=e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,E("on readable",i.length,i.reading),i.length?l(this):i.reading||n.nextTick(p,this)),r},s.prototype.addListener=s.prototype.on,s.prototype.removeListener=function(e,t){var r=S.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(f,this),r},s.prototype.removeAllListeners=function(e){var t=S.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(f,this),t},s.prototype.resume=function(){var e=this._readableState;return e.flowing||(E("resume"),e.flowing=!e.readableListening,e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(g,this,e))),e.paused=!1,this},s.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},s.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(E("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){if(E("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!(n.objectMode&&null==i)&&(n.objectMode||i&&i.length)){var s=t.push(i);s||(r=!0,e.pause())}}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<B.length;s++)e.on(B[s],this.emit.bind(this,B[s]));return this._read=function(t){E("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(s.prototype[Symbol.asyncIterator]=function(){return void 0===x&&(x=e("./internal/streams/async_iterator")),x(this)}),Object.defineProperty(s.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(s.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(s.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),s._fromList=b,Object.defineProperty(s.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(s.from=function(t,n){return void 0===O&&(O=e("./internal/streams/from")),O(s,t,n)})}).call(this)}).call(this,e("_process"),void 0===n.g?"u"<typeof self?"u"<typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(e,t){"use strict";function n(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new c);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function r(e){return this instanceof r?void(h.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",i)):new r(e)}function i(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?s(this,null,null):this._flush(function(t,n){s(e,t,n)})}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new u;if(e._transformState.transforming)throw new l;return e.push(null)}t.exports=r;var o=e("../errors").codes,a=o.ERR_METHOD_NOT_IMPLEMENTED,c=o.ERR_MULTIPLE_CALLBACK,l=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=o.ERR_TRANSFORM_WITH_LENGTH_0,h=e("./_stream_duplex");e("inherits")(r,h),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,h.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){n(new a("_transform()"))},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},r.prototype._destroy=function(e,t){h.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(e,t){(function(n,r){(function(){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){var n=t,r=e,i=n.entry;for(n.entry=null;i;){var s=i.callback;r.pendingcb--,s(void 0),i=i.next}r.corkedRequestsFree.next=n}}function s(){}function o(t,r,s){p=p||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=r instanceof p),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=_(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if("function"!=typeof s)throw new R;if(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t)--r.pendingcb,i?(n.nextTick(s,t),n.nextTick(f,e,r),e._writableState.errorEmitted=!0,D(e,t)):(s(t),e._writableState.errorEmitted=!0,D(e,t),f(e,r));else{var o=h(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||u(e,r),i?n.nextTick(l,e,r,o,s):l(e,r,o,s)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function a(t){var n=this instanceof(p=p||e("./_stream_duplex"));return n||g.call(a,this)?void(this._writableState=new o(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),b.call(this)):new a(t)}function c(e,t,n,r,i,s,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new T("write")):n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function l(e,t,n,r){var i,s;n||(i=e,0===(s=t).length&&s.needDrain&&(s.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),f(e,t)}function u(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=Array(t.bufferedRequestCount),s=t.corkedRequestsFree;s.entry=n;for(var o=0,a=!0;n;)r[o]=n,n.isBuf||(a=!1),n=n.next,o+=1;r.allBuffers=a,c(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,h=n.callback,d=t.objectMode?1:l.length;if(c(e,t,!1,d,l,u,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function h(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function d(e,t){e._final(function(n){t.pendingcb--,n&&D(e,n),t.prefinished=!0,e.emit("prefinish"),f(e,t)})}function f(e,t){var r=h(t);if(r&&(t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(d,e,t))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}t.exports=a,a.WritableState=o;var p,g,y={deprecate:e("util-deprecate")},b=e("./internal/streams/stream"),m=e("buffer").Buffer,w=r.Uint8Array||function(){},v=e("./internal/streams/destroy"),_=e("./internal/streams/state").getHighWaterMark,E=e("../errors").codes,C=E.ERR_INVALID_ARG_TYPE,S=E.ERR_METHOD_NOT_IMPLEMENTED,R=E.ERR_MULTIPLE_CALLBACK,k=E.ERR_STREAM_CANNOT_PIPE,T=E.ERR_STREAM_DESTROYED,A=E.ERR_STREAM_NULL_VALUES,x=E.ERR_STREAM_WRITE_AFTER_END,O=E.ERR_UNKNOWN_ENCODING,D=v.errorOrDestroy;e("inherits")(a,b),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(e){return!!g.call(this,e)||this===a&&e&&e._writableState instanceof o}})):g=function(e){return e instanceof this},a.prototype.pipe=function(){D(this,new k)},a.prototype.write=function(e,t,r){var i,o,a,l,u,h,d,f=this._writableState,p=!1,g=!f.objectMode&&(i=e,m.isBuffer(i)||i instanceof w);return g&&!m.isBuffer(e)&&(o=e,e=m.from(o)),"function"==typeof t&&(r=t,t=null),g?t="buffer":t||(t=f.defaultEncoding),"function"!=typeof r&&(r=s),f.ending?(a=r,D(this,l=new x),n.nextTick(a,l)):(g||(u=e,h=r,null===u?d=new A:"string"==typeof u||f.objectMode||(d=new C("chunk",["string","Buffer"],u)),!d||(D(this,d),n.nextTick(h,d),0)))&&(f.pendingcb++,p=function(e,t,n,r,i,s){if(!n){var o,a,l=(o=r,a=i,t.objectMode||!1===t.decodeStrings||"string"!=typeof o||(o=m.from(o,a)),o);r!==l&&(n=!0,i="buffer",r=l)}var u=t.objectMode?1:r.length;t.length+=u;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else c(e,t,!1,u,r,i,s);return h}(this,f,g,e,t,r)),p},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||u(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new O(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),a.prototype._write=function(e,t,n){n(new S("_write()"))},a.prototype._writev=null,a.prototype.end=function(e,t,r){var i,s=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||(i=r,s.ending=!0,f(this,s),i&&(s.finished?n.nextTick(i):this.once("finish",i)),s.ended=!0,this.writable=!1),this},Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),a.prototype.destroy=v.destroy,a.prototype._undestroy=v.undestroy,a.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),void 0===n.g?"u"<typeof self?"u"<typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(e,t){(function(n){(function(){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return{value:e,done:t}}function s(e){var t=e[l];if(null!==t){var n=e[g].read();null!==n&&(e[f]=null,e[l]=null,e[u]=null,t(i(n,!1)))}}function o(e){n.nextTick(s,e)}var a,c=e("./end-of-stream"),l=Symbol("lastResolve"),u=Symbol("lastReject"),h=Symbol("error"),d=Symbol("ended"),f=Symbol("lastPromise"),p=Symbol("handlePromise"),g=Symbol("stream"),y=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((r(a={get stream(){return this[g]},next:function(){var e,t=this,r=this[h];if(null!==r)return Promise.reject(r);if(this[d])return Promise.resolve(i(void 0,!0));if(this[g].destroyed)return new Promise(function(e,r){n.nextTick(function(){t[h]?r(t[h]):e(i(void 0,!0))})});var s,o=this[f];if(o)s=new Promise((e=this,function(t,n){o.then(function(){return e[d]?void t(i(void 0,!0)):void e[p](t,n)},n)}));else{var a=this[g].read();if(null!==a)return Promise.resolve(i(a,!1));s=new Promise(this[p])}return this[f]=s,s}},Symbol.asyncIterator,function(){return this}),r(a,"return",function(){var e=this;return new Promise(function(t,n){e[g].destroy(null,function(e){return e?void n(e):void t(i(void 0,!0))})})}),a),y);t.exports=function(e){var t,n=Object.create(b,(r(t={},g,{value:e,writable:!0}),r(t,l,{value:null,writable:!0}),r(t,u,{value:null,writable:!0}),r(t,h,{value:null,writable:!0}),r(t,d,{value:e._readableState.endEmitted,writable:!0}),r(t,p,{value:function(e,t){var r=n[g].read();r?(n[f]=null,n[l]=null,n[u]=null,e(i(r,!1))):(n[l]=e,n[u]=t)},writable:!0}),t));return n[f]=null,c(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[u];return null!==t&&(n[f]=null,n[l]=null,n[u]=null,t(e)),void(n[h]=e)}var r=n[l];null!==r&&(n[f]=null,n[l]=null,n[u]=null,r(i(void 0,!0))),n[d]=!0}),e.on("readable",o.bind(null,n)),n}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":24,_process:12}],22:[function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var r=e("buffer").Buffer,i=e("util").inspect,s=i&&i.custom||"inspect";t.exports=function(){var e;function t(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}return e=[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return r.alloc(0);for(var t,n,i=r.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,n=o,r.prototype.copy.call(t,i,n),o+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(r+=s===i.length?i:i.slice(0,e),0==(e-=s)){s===i.length?(++n,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=i.slice(s));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=r.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,o),0==(e-=o)){o===s.length?(++i,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=s.slice(o));break}++i}return this.length-=i,t}},{key:s,value:function(e,t){return i(this,function(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?n(Object(t),!0).forEach(function(n){var r,i,s;r=e,i=n,s=t[n],i in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}({},t,{depth:0,customInspect:!1}))}}],function(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}(t.prototype,e),t}()},{buffer:3,util:2}],23:[function(e,t){(function(e){(function(){"use strict";function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var o=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!s&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(r,o):(o._writableState.errorEmitted=!0,e.nextTick(n,o,t)):e.nextTick(n,o,t):s?(e.nextTick(r,o),s(t)):e.nextTick(r,o)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:12}],24:[function(e,t){"use strict";function n(){}var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=function e(t,i,s){if("function"==typeof i)return e(t,null,i);i||(i={}),o=s||n,a=!1,s=function(){if(!a){a=!0;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(this,t)}};var o,a,c=i.readable||!1!==i.readable&&t.readable,l=i.writable||!1!==i.writable&&t.writable,u=function(){t.writable||d()},h=t._writableState&&t._writableState.finished,d=function(){l=!1,h=!0,c||s.call(t)},f=t._readableState&&t._readableState.endEmitted,p=function(){c=!1,f=!0,l||s.call(t)},g=function(e){s.call(t,e)},y=function(){var e;return c&&!f?(t._readableState&&t._readableState.ended||(e=new r),s.call(t,e)):l&&!h?(t._writableState&&t._writableState.ended||(e=new r),s.call(t,e)):void 0},b=function(){t.req.on("finish",d)};return t.setHeader&&"function"==typeof t.abort?(t.on("complete",d),t.on("abort",y),t.req?b():t.on("request",b)):l&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",p),t.on("finish",d),!1!==i.error&&t.on("error",g),t.on("close",y),function(){t.removeListener("complete",d),t.removeListener("abort",y),t.removeListener("request",b),t.req&&t.req.removeListener("finish",d),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",d),t.removeListener("end",p),t.removeListener("error",g),t.removeListener("close",y)}}},{"../../../errors":15}],25:[function(e,t){t.exports=function(){throw Error("Readable.from is not available in the browser")}},{}],26:[function(e,t){"use strict";function n(e){if(e)throw e}function r(e){e()}function i(e,t){return e.pipe(t)}var s,o=e("../../../errors").codes,a=o.ERR_MISSING_ARGS,c=o.ERR_STREAM_DESTROYED;t.exports=function(){for(var t=arguments.length,o=Array(t),l=0;l<t;l++)o[l]=arguments[l];var u=(h=o).length&&"function"==typeof h[h.length-1]?h.pop():n;if(Array.isArray(o[0])&&(o=o[0]),2>o.length)throw new a("streams");var h,d,f=o.map(function(t,n){var i,a,l,h,p,g,y=n<o.length-1;return i=0<n,l=a=function(e){d||(d=e),e&&f.forEach(r),y||(f.forEach(r),u(d))},h=!1,a=function(){h||(h=!0,l.apply(void 0,arguments))},p=!1,t.on("close",function(){p=!0}),void 0===s&&(s=e("./end-of-stream")),s(t,{readable:y,writable:i},function(e){return e?a(e):void(p=!0,a())}),g=!1,function(e){if(!p)return g?void 0:(g=!0,t.setHeader&&"function"==typeof t.abort?t.abort():"function"==typeof t.destroy?t.destroy():void a(e||new c("pipe")))}});return o.reduce(i)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(e,t){"use strict";var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,i,s){var o=null==t.highWaterMark?s?t[i]:null:t.highWaterMark;if(null!=o){if(!(isFinite(o)&&r(o)===o)||0>o)throw new n(s?i:"highWaterMark",o);return r(o)}return e.objectMode?16:16384}}},{"../../../errors":15}],28:[function(e,t){t.exports=e("events").EventEmitter},{events:7}],29:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return o(e,t,n)}var s=e("buffer"),o=s.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=s:(r(s,n),n.Buffer=i),i.prototype=Object.create(o.prototype),r(o,i),i.from=function(e,t,n){if("number"==typeof e)throw TypeError("Argument must not be a number");return o(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw TypeError("Argument must be a number");var r=o(e);return void 0===t?r.fill(0):"string"==typeof n?r.fill(t,n):r.fill(t),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return s.SlowBuffer(e)}},{buffer:3}],31:[function(e,t,n){"use strict";function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(d.isEncoding===f||!f(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=o,this.end=a,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=l,t=3;break;default:return this.write=u,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(t)}function i(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length):n}function o(e,t){if(0==(e.length-t)%2){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function a(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}var d=e("safe-buffer").Buffer,f=d.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=r,r.prototype.write=function(e){var t,n;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},r.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var s=i(t[r]);return 0<=s?(0<s&&(e.lastNeed=s-1),s):--r<n||-2===s?0:0<=(s=i(t[r]))?(0<s&&(e.lastNeed=s-2),s):--r<n||-2===s?0:0<=(s=i(t[r]))?(0<s&&(2===s?s=0:e.lastNeed=s-3),s):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},r.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length)}},{"safe-buffer":30}],32:[function(e,t){(function(e){(function(){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,void 0===n.g?"u"<typeof self?"u"<typeof window?{}:window:self:n.g)},{}],"/":[function(e,t){function n(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}let r=e("debug")("simple-peer"),i=e("get-browser-rtc"),s=e("randombytes"),o=e("readable-stream"),a=e("queue-microtask"),c=e("err-code"),{Buffer:l}=e("buffer");class u extends o.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||u.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},u.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:i(),!this._wrtc)if("u"<typeof window)throw c(Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT");else throw c(Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void this.destroy(c(e,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(e=>{this.destroy(c(e,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw c(Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(c(Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){let t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?console.warn("Ignoring unsupported ICE candidate."):this.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw c(Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw c(Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(c(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw c(Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let n=this._senderMap.get(e)||new Map,r=n.get(t);if(r)if(r.removed)throw c(Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED");else throw c(Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw c(Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let r=this._senderMap.get(e),i=r?r.get(n):null;if(!i)throw c(Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null==i.replaceTrack?this.destroy(c(Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):i.replaceTrack(t)}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw c(Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(r):this.destroy(c(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw c(Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw c(Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),a(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy(c(Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{let t=e.error instanceof Error?e.error:Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(c(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(c(Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(!this.destroyed){let e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(!this.destroyed){let t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(!this.destroyed){let t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c(Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(c(Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(c(Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){let t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{let r=[];n.forEach(e=>{r.push(t(e))}),e(null,r)},t=>e(t)):0<this._pc.getStats.length?this._pc.getStats(n=>{if(this.destroyed)return;let r=[];n.result().forEach(e=>{let n={};e.names().forEach(t=>{n[t]=e.stat(t)}),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))}),e(null,r)},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);let r={},i={},s={},o=!1;n.forEach(e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(r[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(i[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(s[e.id]=e)});let a=e=>{o=!0;let t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)}),!o&&(!Object.keys(s).length||Object.keys(i).length))return void setTimeout(e,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>65536)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=l.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)}}u.WEBRTC_SUPPORT=!!i(),u.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},u.channelConfig={},t.exports=u},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")},6936:(e,t,n)=>{"use strict";n.d(t,{C:()=>i,Tj:()=>o,_4:()=>s,bz:()=>a,vt:()=>r});let r=()=>new Map,i=e=>{let t=r();return e.forEach((e,n)=>{t.set(n,e)}),t},s=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},o=(e,t)=>{let n=[];for(let[r,i]of e)n.push(t(i,r));return n},a=(e,t)=>{for(let[n,r]of e)if(t(r,n))return!0;return!1}},8910:(e,t,n)=>{"use strict";n.d(t,{EK:()=>u,OK:()=>o,id:()=>c,mT:()=>a,vo:()=>l});var r=n(49911),i=n(56077),s=n(96407);let o=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&o(e,t,n+1)}},a=()=>{},c=e=>e,l=(e,t)=>{if(e===t)return!0;if(null==e||null==t||e.constructor!==t.constructor&&(e.constructor||Object)!==(t.constructor||Object))return!1;if(null!=e[s.B])return e[s.B](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(let n of e.keys())if(!t.has(n)||!l(e.get(n),t.get(n)))return!1;break;case void 0:case Object:if(i.Ej(e)!==i.Ej(t))return!1;for(let n in e)if(!i.i5(e,n)||!l(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1;break;default:return!1}return!0},u=(e,t)=>t.includes(e);r.cy},10592:(e,t,n)=>{"use strict";n.d(t,{RI:()=>r,T9:()=>a,YL:()=>s,jk:()=>o,sj:()=>c,tn:()=>i});let r=Math.floor,i=Math.abs,s=Math.log10,o=(e,t)=>e<t?e:t,a=(e,t)=>e>t?e:t,c=e=>0!==e?e<0:1/e<0},16337:(e,t,n)=>{"use strict";n.d(t,{ft:()=>u,Y:()=>c,AV:()=>d,Qu:()=>h,hN:()=>g,hr:()=>p,UH:()=>f,Ny:()=>l,Tx:()=>y,ET:()=>b,Xv:()=>_});let r=Symbol;var i=n(23371),s=n(52769),o=n(8910);let a=JSON.stringify,c=r(),l=r(),u=r(),h=r(),d=r(),f=r(),p=r(),g=r(),y=r(),b=e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],n=[],r=0;for(;r<e.length;r++){let n=e[r];if(void 0===n)break;if(n.constructor===String||n.constructor===Number)t.push(n);else if(n.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){let t=e[r];t instanceof Symbol||n.push(t)}return n},m=[d,p,g,u],w=0,v=i._g(),_=(e,t)=>{let n=m[w],r=s.dn("log"),c=null!==r&&("*"===r||"true"===r||RegExp(r,"gi").test(t));return w=(w+1)%m.length,t+=": ",c?(...r)=>{1===r.length&&r[0]?.constructor===Function&&(r=r[0]());let s=i._g(),o=s-v;v=s,e(n,t,y,...r.map(e=>{switch(null!=e&&e.constructor===Uint8Array&&(e=Array.from(e)),typeof e){case"string":case"symbol":return e;default:return a(e)}}),n," +"+o+"ms")}:o.mT}},23371:(e,t,n)=>{"use strict";n.d(t,{_g:()=>r});let r=Date.now},30950:(e,t,n)=>{"use strict";n.d(t,{vt:()=>r});let r=()=>new Set},37267:(e,t,n)=>{"use strict";n.d(t,{JT:()=>o,k9:()=>a,o6:()=>c});class r{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let i=new r,s=!0;try{"u">typeof localStorage&&localStorage&&(i=localStorage,s=!1)}catch(e){}let o=i,a=e=>s||addEventListener("storage",e),c=e=>s||removeEventListener("storage",e)},41212:(e,t,n)=>{"use strict";n.d(t,{D5:()=>b,Hz:()=>w,aL:()=>m});var r=n(62483),i=n(7620);let s=Symbol(),o=Symbol(),a=Object.getPrototypeOf,c=new WeakMap,l=e=>"object"==typeof e&&null!==e,u=e=>e[o]||e,h=(e,t,n,r)=>{var i;let l,d,f,p;if(!(e&&(c.has(e)?c.get(e):a(e)===Object.prototype||a(e)===Array.prototype)))return e;let g=r&&r.get(e);if(!g){let t=u(e);g=Object.values(Object.getOwnPropertyDescriptors(t)).some(e=>!e.configurable&&!e.writable)?[t,(e=>{if(Array.isArray(e))return Array.from(e);let t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(e=>{e.configurable=!0}),Object.create(a(e),t)})(t)]:[t],null==r||r.set(e,g)}let[y,b]=g,m=n&&n.get(y);return m&&!!b===m[1].f||(l={f:i=!!b},d=!1,f=(e,t)=>{if(!d){let n=l.a.get(y);if(n||(n={},l.a.set(y,n)),"w"===e)n.w=!0;else{let r=n[e];r||(r=new Set,n[e]=r),r.add(t)}}},p={get:(e,t)=>t===o?y:(f("k",t),h(Reflect.get(e,t),l.a,l.c,l.t)),has:(e,t)=>t===s?(d=!0,l.a.delete(y),!0):(f("h",t),Reflect.has(e,t)),getOwnPropertyDescriptor:(e,t)=>(f("o",t),Reflect.getOwnPropertyDescriptor(e,t)),ownKeys:e=>(f("w"),Reflect.ownKeys(e))},i&&(p.set=p.deleteProperty=()=>!1),(m=[p,l])[1].p=new Proxy(b||y,m[0]),n&&n.set(y,m)),m[1].a=t,m[1].c=n,m[1].t=r,m[1].p},d=(e,t,n,r,i=Object.is)=>{if(i(e,t))return!1;if(!l(e)||!l(t))return!0;let s=n.get(u(e));if(!s)return!0;if(r){let n=r.get(e);if(n&&n.n===t)return n.g;r.set(e,{n:t,g:!1})}let o=null;try{for(let n of s.h||[])if(o=Reflect.has(e,n)!==Reflect.has(t,n))return o;if(!0===s.w){let n,r;if(n=Reflect.ownKeys(e),r=Reflect.ownKeys(t),o=n.length!==r.length||n.some((e,t)=>e!==r[t]))return o}else for(let n of s.o||[])if(o=!!Reflect.getOwnPropertyDescriptor(e,n)!=!!Reflect.getOwnPropertyDescriptor(t,n))return o;for(let a of s.k||[])if(o=d(e[a],t[a],n,r,i))return o;return null===o&&(o=!0),o}finally{r&&r.set(e,{n:t,g:o})}};n(40459);var f=n(45698),p=n(23884);let{useSyncExternalStoreWithSelector:g}=f,y=(e,t)=>{let n=(0,p.y)(e),r=(e,r=t)=>(function(e,t=e=>e,n){let r=g(e.subscribe,e.getState,e.getInitialState,t,n);return i.useDebugValue(r),r})(n,e,r);return Object.assign(r,n),r};var b=(e,t)=>{let n,s,o,a=(0,r.sV)(e,t),c=(n=a.stateCreator)?y(n,s):y,l=()=>{let[,e]=(0,i.useReducer)(e=>e+1,0),t=new WeakMap,n=(0,i.useRef)(),r=(0,i.useRef)(),s=(0,i.useRef)();return(0,i.useEffect)(()=>{n.current=t,r.current!==s.current&&d(r.current,s.current,t,new WeakMap)&&(r.current=s.current,e())}),h(c((0,i.useCallback)(e=>(s.current=e,r.current&&r.current!==e&&n.current&&!d(r.current,e,n.current,new WeakMap))?r.current:(r.current=e,e),[])),t,(0,i.useMemo)(()=>new WeakMap,[]))},u=(0,r.wx)(c,{name:a.name,isMutative:a.isMutative}),f=(e,t)=>c(t=>t[e],t);return o={...u,store:c,useStore:c,useValue:f,useState:(e,t)=>[f(e,t),t=>u.set(e,t)],useTracked:e=>l()[e],useTrackedStore:l},(0,r.S_)(o,{extendSelectors:(e,t)=>(0,r.tW)(e,t,{selectWithStore:(e,n)=>t.useStore(e,n)}),extendActions:(e,t)=>(0,r.WK)(e,t)})};function m(e,t,...n){return e.useValue(t,...n)}var w=(e,t,n)=>e.useStore(t,n)},43572:(e,t,n)=>{"use strict";n.d(t,{Ey:()=>l,HR:()=>u,nk:()=>c,zS:()=>a});var r=n(3515),i=n(52769),s=n(58863).Buffer;let o=e=>new Uint8Array(e),a=e=>new Uint8Array(e),c=i.Bd?e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=r.QV(e[n]);return btoa(t)}:e=>s.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),l=i.Bd?e=>{let t=atob(e),n=o(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}:e=>{let t,n=s.from(e,"base64");return t=n.buffer,new Uint8Array(t,n.byteOffset,n.byteLength)},u=e=>{let t=o(e.byteLength);return t.set(e),t}},45698:(e,t,n)=>{"use strict";e.exports=n(91932)},47048:(e,t,n)=>{"use strict";n.d(t,{Mq:()=>s,bD:()=>i,vt:()=>r});let r=e=>Error(e),i=()=>{throw r("Method unimplemented")},s=()=>{throw r("Unexpected case")}},49911:(e,t,n)=>{"use strict";n.d(t,{HT:()=>s,HV:()=>r,S2:()=>i,Si:()=>o,cy:()=>l,t8:()=>c,zN:()=>a});let r=e=>e[e.length-1],i=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},s=Array.from,o=(e,t)=>{for(let n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},a=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},c=(e,t)=>{let n=Array(e);for(let r=0;r<e;r++)n[r]=t(r,n);return n},l=Array.isArray},51844:(e,t,n)=>{"use strict";n.d(t,{$5:()=>i,n:()=>s});let r=e=>({[Symbol.iterator](){return this},next:e}),i=(e,t)=>r(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),s=(e,t)=>r(()=>{let{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}})},52495:(e,t,n)=>{"use strict";n.d(t,{CW:()=>p,D1:()=>s,D7:()=>c,Dk:()=>r,KD:()=>i,KJ:()=>a,P1:()=>h,WD:()=>d,WY:()=>u,vZ:()=>f,wn:()=>o,wt:()=>l});let r=1,i=2,s=4,o=8,a=32,c=64,l=128,u=31,h=63,d=127,f=0x7fffffff,p=0xffffffff},52769:(e,t,n)=>{"use strict";let r;n.d(t,{dn:()=>p,Bd:()=>h,IA:()=>y,WI:()=>b});var i=n(6936),s=n(3515);let o=e=>void 0===e?null:e;var a=n(37267),c=n(8910),l=n(40459);let u=void 0!==l&&l.release&&/node|io\.js/.test(l.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==l?l:0),h="u">typeof window&&"u">typeof document&&!u;"u">typeof navigator&&/Mac/.test(navigator.platform);let d=[],f=e=>(()=>{if(void 0===r)if(u){r=i.vt();let e=l.argv,t=null;for(let n=0;n<e.length;n++){let i=e[n];"-"===i[0]?(null!==t&&r.set(t,""),t=i):null!==t?(r.set(t,i),t=null):d.push(i)}null!==t&&r.set(t,"")}else"object"==typeof location?(r=i.vt(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[t,n]=e.split("=");r.set(`--${s.jN(t,"-")}`,n),r.set(`-${s.jN(t,"-")}`,n)}})):r=i.vt();return r})().has(e),p=e=>u?o(l.env[e.toUpperCase().replaceAll("-","_")]):o(a.JT.getItem(e)),g=e=>f("--"+e)||null!==p(e),y=g("production"),b=u&&c.EK(l.env.FORCE_COLOR,["true","1","2"])||!f("--no-colors")&&!g("no-color")&&(!u||l.stdout.isTTY)&&(!u||f("--color")||null!==p("COLORTERM")||(p("TERM")||"").includes("color"))},55043:(e,t,n)=>{"use strict";n.d(t,{Fq:()=>a,Is:()=>s,YH:()=>o});var r=n(10592),i=n(52495);let s=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;i.vZ,i.CW;let a=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&r.RI(e)===e)},56077:(e,t,n)=>{"use strict";n.d(t,{Ej:()=>c,Gv:()=>i,Im:()=>l,SQ:()=>d,Si:()=>u,i5:()=>h,jJ:()=>a,kp:()=>s,ol:()=>p});var r=n(96407);let i=e=>"object"==typeof e,s=Object.assign,o=Object.keys,a=(e,t)=>{for(let n in e)t(e[n],n)},c=e=>o(e).length,l=e=>{for(let t in e)return!1;return!0},u=(e,t)=>{for(let n in e)if(!t(e[n],n))return!1;return!0},h=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d=(e,t)=>e===t||c(e)===c(t)&&u(e,(e,n)=>(void 0!==e||h(t,n))&&r.a(t[n],e)),f=Object.freeze,p=e=>{for(let t in e){let n=e[t];("object"==typeof n||"function"==typeof n)&&p(e[t])}return f(e)}},57354:(e,t,n)=>{"use strict";n.d(t,{aG:()=>_});var r=n(7620),i=n(65284),s=n(92405),o=n(63108);n(45698);var a=n(83751),c=Object.defineProperty,l=Object.defineProperties,u=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))d.call(t,n)&&p(e,n,t[n]);if(h)for(var n of h(t))f.call(t,n)&&p(e,n,t[n]);return e},y=new WeakMap;function b(e,t){if(!t.relativeSelection)return null;let n=y.get(e.children);n||(n=new WeakMap,y.set(e.children,n));let r=n.get(t);if(void 0===r)try{r=(0,i.dM)(e.sharedRoot,e,t.relativeSelection),n.set(t,r)}catch(e){return null}return r}function m(){let e=(0,s.RV)();if(!i.ud.isCursorEditor(e))throw Error("Cannot use useSyncExternalStore outside the context of a RemoteCursorEditor");return e}var w=new WeakMap,v=Object.freeze([]);function _(e={}){var t,{containerRef:n,shouldGenerateOverlay:c}=e,p=((e,t)=>{var n={};for(var r in e)d.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&h)for(var r of h(e))0>t.indexOf(r)&&f.call(e,r)&&(n[r]=e[r]);return n})(e,["containerRef","shouldGenerateOverlay"]);let y=m(),E=function(){let[e,t]=function(e){let t,n,r,s,o,a=w.get(e);if(a)return a;let c=(t={},r=(n=new Set).add.bind(n),s=new Set,o=null,[t=>(s.add(t),o||(o=e=>{e.added.forEach(r),e.removed.forEach(r),e.updated.forEach(r),s.forEach(e=>e())},i.ud.on(e,"change",o)),()=>{s.delete(t),o&&0===s.size&&(i.ud.off(e,"change",o),o=null)}),()=>0===n.size?t:(n.forEach(n=>{let r=i.ud.cursorState(e,n);null===r?delete t[n.toString()]:t[n]=r}),n.clear(),t=g({},t))]);return w.set(e,c),c}(m());return(0,o.useSyncExternalStore)(e,t)}(),C=function(){let[,e]=(0,r.useReducer)(e=>e+1,0),t=(0,r.useRef)(null),n=()=>{t.current&&(cancelAnimationFrame(t.current),t.current=0)};return(0,r.useEffect)(n),(0,r.useEffect)(()=>n,[]),(0,r.useCallback)((n=!1)=>{n?e():t.current||(t.current=requestAnimationFrame(e))},[])}(),S=(0,r.useRef)(new WeakMap),[R,k]=(0,r.useState)({}),T=!("refreshOnResize"in p)||null==(t=p.refreshOnResize)||t;return!function(e,t){let n=(0,r.useRef)(t);n.current=t;let[i]=(0,r.useState)(()=>new ResizeObserver(()=>{n.current()}));(0,r.useEffect)(()=>{if(!(null==e?void 0:e.current))return;let{current:t}=e;return i.observe(t),()=>i.unobserve(t)},[i,e])}(T?n:void 0,()=>{S.current=new WeakMap,C("debounced"!==T)}),(0,r.useLayoutEffect)(()=>{var e,t,r;if(n&&!n.current)return;let i=null==(e=null==n?void 0:n.current)?void 0:e.getBoundingClientRect(),o=null!=(t=null==i?void 0:i.x)?t:0,l=null!=(r=null==i?void 0:i.y)?r:0,u=Object.keys(R).length!==Object.keys(E).length,h=Object.fromEntries(Object.entries(E).map(([e,t])=>{let n=t.relativeSelection&&b(y,t);if(!n)return[e,v];let r=S.current.get(n);if(r)return[e,r];let i=function(e,t,{yOffset:n,xOffset:r,shouldGenerateOverlay:i}){let[o,c]=a.Q6.edges(t),l=function(e,t){try{return s.rL.toDOMRange(e,t)}catch(e){return null}}(e,t);if(!l)return{caretPosition:null,selectionRects:[]};let u=[],h=a.KE.nodes(e,{at:t,match:(e,t)=>a.EY.isText(e)&&(!i||i(e,t))}),d=null,f=a.Q6.isBackward(t);for(let[i,p]of h){let h=s.rL.toDOMNode(e,i),g=a.wA.equals(p,o.path),y=a.wA.equals(p,c.path),b=null;if(g||y){let e=document.createRange();e.selectNode(h),g&&e.setStart(l.startContainer,l.startOffset),y&&e.setEnd(l.endContainer,l.endOffset),b=e.getClientRects()}else b=h.getClientRects();let m=f?g:y;for(let e=0;e<b.length;e++){let i=b.item(e);if(!i)continue;let s=m&&(f?0===e:e===b.length-1),o=i.top-n,c=i.left-r;s&&(d={height:i.height,top:o,left:c+(f||a.Q6.isCollapsed(t)?0:i.width)}),u.push({width:i.width,height:i.height,top:o,left:c})}}return{selectionRects:u,caretPosition:d}}(y,n,{xOffset:o,yOffset:l,shouldGenerateOverlay:c});return u=!0,S.current.set(n,i),[e,i]}));u&&k(h)}),[(0,r.useMemo)(()=>Object.entries(E).map(([e,t])=>{var n,r;let i=t.relativeSelection&&b(y,t),s=R[e];return l(g({},t),u({range:i,caretPosition:null!=(n=null==s?void 0:s.caretPosition)?n:null,selectionRects:null!=(r=null==s?void 0:s.selectionRects)?r:v}))}),[E,y,R]),(0,r.useCallback)(()=>{S.current=new WeakMap,C(!0)},[C])]}},58027:(e,t,n)=>{"use strict";var r=n(7620),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,c=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var u="u"<typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a(function(){i.value=n,i.getSnapshot=t,l(i)&&u({inst:i})},[e,n,t]),o(function(){return l(i)&&u({inst:i}),e(function(){l(i)&&u({inst:i})})},[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},58199:(e,t,n)=>{"use strict";n.d(t,{D$:()=>R,FA:()=>T,Fo:()=>u,Gu:()=>w,IO:()=>E,LH:()=>m,QJ:()=>d,Qj:()=>b,Sj:()=>p,Sw:()=>A,cq:()=>C,xv:()=>l,zd:()=>f});var r=n(10592),i=n(55043),s=n(52495),o=n(3515),a=n(49911);class c{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let l=()=>new c,u=e=>{let t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e)),n=0;for(let r=0;r<e.bufs.length;r++){let i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},h=(e,t)=>{let n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},d=h,f=(e,t)=>{for(;t>s.WD;)h(e,s.wt|s.WD&t),t=r.RI(t/128);h(e,s.WD&t)},p=(e,t)=>{let n=r.sj(t);for(n&&(t=-t),h(e,(t>s.P1?s.wt:0)|(n?s.D7:0)|s.P1&t),t=r.RI(t/64);t>0;)h(e,(t>s.WD?s.wt:0)|s.WD&t),t=r.RI(t/128)},g=new Uint8Array(3e4),y=g.length/3,b=o.db&&o.db.encodeInto?(e,t)=>{if(t.length<y){let n=o.db.encodeInto(t,g).written||0;f(e,n);for(let t=0;t<n;t++)h(e,g[t])}else w(e,o.Af(t))}:(e,t)=>{let n=unescape(encodeURIComponent(t)),r=n.length;f(e,r);for(let t=0;t<r;t++)h(e,n.codePointAt(t))},m=(e,t)=>{let n=e.cbuf.length,i=e.cpos,s=r.jk(n-i,t.length),o=t.length-s;e.cbuf.set(t.subarray(0,s),i),e.cpos+=s,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(r.T9(2*n,o)),e.cbuf.set(t.subarray(s)),e.cpos=o)},w=(e,t)=>{f(e,t.byteLength),m(e,t)},v=(e,t)=>{let n;(n=e.cbuf.length)-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*r.T9(n,t)),e.cpos=0);let i=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,i},_=new DataView(new ArrayBuffer(4)),E=(e,t)=>{switch(typeof t){case"string":h(e,119),b(e,t);break;case"number":if(i.Fq(t)&&r.tn(t)<=s.vZ)h(e,125),p(e,t);else if(_.setFloat32(0,t),_.getFloat32(0)===t)h(e,124),v(e,4).setFloat32(0,t,!1);else h(e,123),v(e,8).setFloat64(0,t,!1);break;case"bigint":h(e,122),v(e,8).setBigInt64(0,t,!1);break;case"object":if(null===t)h(e,126);else if(a.cy(t)){h(e,117),f(e,t.length);for(let n=0;n<t.length;n++)E(e,t[n])}else if(t instanceof Uint8Array)h(e,116),w(e,t);else{h(e,118);let n=Object.keys(t);f(e,n.length);for(let r=0;r<n.length;r++){let i=n[r];b(e,i),E(e,t[i])}}break;case"boolean":h(e,t?120:121);break;default:h(e,127)}};class C extends c{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&f(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}let S=e=>{e.count>0&&(p(e.encoder,1===e.count?e.s:-e.s),e.count>1&&f(e.encoder,e.count-2))};class R{constructor(){this.encoder=new c,this.s=0,this.count=0}write(e){this.s===e?this.count++:(S(this),this.count=1,this.s=e)}toUint8Array(){return S(this),u(this.encoder)}}let k=e=>{if(e.count>0){let t=2*e.diff+ +(1!==e.count);p(e.encoder,t),e.count>1&&f(e.encoder,e.count-2)}};class T{constructor(){this.encoder=new c,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(k(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return k(this),u(this.encoder)}}class A{constructor(){this.sarr=[],this.s="",this.lensE=new R}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new c;return this.sarr.push(this.s),this.s="",b(e,this.sarr.join("")),m(e,this.lensE.toUint8Array()),u(e)}}},58613:(e,t,n)=>{"use strict";let r,i,s;n.d(t,{Xv:()=>eW,yy:()=>eU,R8:()=>eF});var o=n(52769),a=n(30950);class c{constructor(e,t){this.left=e,this.right=t}}let l=(e,t)=>new c(e,t);var u=n(6936),h=n(56077),d=n(49911),f=n(47048),p=n(96407),g=n(8910),y=n(3515),b=n(10592);let m=e=>e.next()>=.5,w=(e,t,n)=>b.RI(e.next()*(n+1-t)+t),v=(e,t,n)=>b.RI(e.next()*(n+1-t)+t),_=e=>(0,y.QV)(v(e,97,122)),E=(e,t)=>t[v(e,0,t.length-1)];var C=n(55043);let S=Symbol("0schema");class R{constructor(){this._rerrs=[]}extend(e,t,n,r=null){this._rerrs.push({path:e,expected:t,has:n,message:r})}toString(){let e=[];for(let t=this._rerrs.length-1;t>0;t--){let n=this._rerrs[t];e.push(y.ux(" ",(this._rerrs.length-t)*2)+`${null!=n.path?`[${n.path}] `:""}${n.has} doesn't match ${n.expected}. ${n.message}`)}return e.join("\n")}}let k=(e,t)=>e===t||null!=e&&null!=t&&e.constructor===t.constructor&&(e[p.B]?p.a(e,t):d.cy(e)?d.Si(e,e=>d.zN(t,t=>k(e,t))):!!h.Gv(e)&&h.Si(e,(e,n)=>k(e,t[n])));class T{static _dilutes=!1;extends(e){let[t,n]=[this.shape,e.shape];return this.constructor._dilutes&&([n,t]=[t,n]),k(t,n)}equals(e){return this.constructor===e.constructor&&g.vo(this.shape,e.shape)}[S](){return!0}[p.B](e){return this.equals(e)}validate(e){return this.check(e)}check(e,t){f.bD()}get nullable(){return eo(this,e_)}get optional(){return new F(this)}cast(e){return eR(e,this),e}expect(e){return eR(e,this),e}}class A extends T{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t){let n=e?.constructor===this.shape&&(null==this._c||this._c(e));return n||t?.extend(null,this.shape.name,e?.constructor.name,e?.constructor!==this.shape?"Constructor match failed":"Check failed"),n}}let x=(e,t=null)=>new A(e,t);x(A);class O extends T{constructor(e){super(),this.shape=e}check(e,t){let n=this.shape(e);return n||t?.extend(null,"custom prop",e?.constructor.name,"failed to check custom prop"),n}}let D=e=>new O(e);x(O);class P extends T{constructor(e){super(),this.shape=e}check(e,t){let n=this.shape.some(t=>t===e);return n||t?.extend(null,this.shape.join(" | "),e.toString()),n}}let L=(...e)=>new P(e),M=x(P),I=RegExp.escape||(e=>e.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),j=e=>ey.check(e)?[I(e)]:M.check(e)?e.shape.map(e=>e+""):eg.check(e)?["[+-]?\\d+.?\\d*"]:eb.check(e)?[".*"]:ea.check(e)?e.shape.map(j).flat(1):void f.Mq();class N extends T{constructor(e){super(),this.shape=e,this._r=RegExp("^"+e.map(j).map(e=>`(${e.join("|")})`).join("")+"$")}check(e,t){let n=null!=this._r.exec(e);return n||t?.extend(null,this._r.toString(),e.toString(),"String doesn't match string template."),n}}x(N);let U=Symbol("optional");class F extends T{constructor(e){super(),this.shape=e}check(e,t){let n=void 0===e||this.shape.check(e);return n||t?.extend(null,"undefined (optional)","()"),n}get[U](){return!0}}let B=x(F);class W extends T{check(e,t){return t?.extend(null,"never",typeof e),!1}}new W,x(W);class q extends T{constructor(e,t=!1){super(),this.shape=e,this._isPartial=t}static _dilutes=!0;get partial(){return new q(this.shape,!0)}check(e,t){return null==e?(t?.extend(null,"object","null"),!1):h.Si(this.shape,(n,r)=>{let i=this._isPartial&&!h.i5(e,r)||n.check(e[r],t);return i||t?.extend(r.toString(),n.toString(),typeof e[r],"Object property does not match"),i})}}let H=x(q),z=D(e=>null!=e&&(e.constructor===Object||null==e.constructor));class Y extends T{constructor(e,t){super(),this.shape={keys:e,values:t}}check(e,t){return null!=e&&h.Si(e,(n,r)=>{let i=this.shape.keys.check(r,t);return i||t?.extend(r+"","Record",typeof e,i?"Key doesn't match schema":"Value doesn't match value"),i&&this.shape.values.check(n,t)})}}let V=(e,t)=>new Y(e,t),$=x(Y);class Q extends T{constructor(e){super(),this.shape=e}check(e,t){return null!=e&&h.Si(this.shape,(n,r)=>{let i=n.check(e[r],t);return i||t?.extend(r.toString(),"Tuple",typeof n),i})}}x(Q);class G extends T{constructor(e){super(),this.shape=1===e.length?e[0]:new es(e)}check(e,t){let n=d.cy(e)&&d.Si(e,e=>this.shape.check(e));return n||t?.extend(null,"Array",""),n}}let K=(...e)=>new G(e),J=x(G),Z=D(e=>d.cy(e));class X extends T{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t){let n=e instanceof this.shape&&(null==this._c||this._c(e));return n||t?.extend(null,this.shape.name,e?.constructor.name),n}}x(X);let ee=((e,t=null)=>new X(e,t))(T);class et extends T{constructor(e){super(),this.len=e.length-1,this.args=((...e)=>new Q(e))(...e.slice(-1)),this.res=e[this.len]}check(e,t){let n=e.constructor===Function&&e.length<=this.len;return n||t?.extend(null,"function",typeof e),n}}let en=x(et),er=D(e=>"function"==typeof e);class ei extends T{constructor(e){super(),this.shape=e}check(e,t){let n=d.Si(this.shape,n=>n.check(e,t));return n||t?.extend(null,"Intersectinon",typeof e),n}}x(ei,e=>e.shape.length>0);class es extends T{static _dilutes=!0;constructor(e){super(),this.shape=e}check(e,t){let n=d.zN(this.shape,n=>n.check(e,t));return t?.extend(null,"Union",typeof e),n}}let eo=(...e)=>e.findIndex(e=>ea.check(e))>=0?eo(...e.map(e=>eS(e)).map(e=>ea.check(e)?e.shape:[e]).flat(1)):1===e.length?e[0]:new es(e),ea=x(es),ec=()=>!0,el=D(ec),eu=x(O,e=>e.shape===ec),eh=D(e=>"bigint"==typeof e),ed=D(e=>e===eh),ef=D(e=>"symbol"==typeof e);D(e=>e===ef);let ep=D(e=>"number"==typeof e),eg=D(e=>e===ep),ey=D(e=>"string"==typeof e),eb=D(e=>e===ey),em=D(e=>"boolean"==typeof e),ew=D(e=>e===em),ev=L(void 0);x(P,e=>1===e.shape.length&&void 0===e.shape[0]),L(void 0);let e_=L(null),eE=x(P,e=>1===e.shape.length&&null===e.shape[0]);x(Uint8Array),x(A,e=>e.shape===Uint8Array);let eC=eo(ep,ey,e_,ev,eh,em,ef);r=K(el),i=V(ey,el),s=eo(ep,ey,e_,em,r,i),r.shape=s,i.shape.values=s;let eS=e=>{if(ee.check(e))return e;if(z.check(e)){let t={};for(let n in e)t[n]=eS(e[n]);return new q(t)}if(Z.check(e))return eo(...e.map(eS));if(eC.check(e))return L(e);if(er.check(e))return x(e);f.Mq()},eR=o.IA?()=>{}:(e,t)=>{let n=new R;if(!t.check(e,n))throw f.vt(`Expected value to be of type ${t.constructor.name}.
${n.toString()}`)};class ek{constructor(e){this.patterns=[],this.$state=e}if(e,t){return this.patterns.push({if:eS(e),h:t}),this}else(e){return this.if(el,e)}done(){return(e,t)=>{for(let n=0;n<this.patterns.length;n++){let r=this.patterns[n];if(r.if.check(e))return r.h(e,t)}throw f.vt("Unhandled pattern")}}}let eT=new ek(el).if(eg,(e,t)=>w(t,C.YH,C.Is)).if(eb,(e,t)=>((e,t=0,n=20)=>{let r=v(e,t,n),i="";for(let t=0;t<r;t++)i+=_(e);return i})(t)).if(ew,(e,t)=>m(t)).if(ed,(e,t)=>BigInt(w(t,C.YH,C.Is))).if(ea,(e,t)=>eA(t,E(t,e.shape))).if(H,(e,t)=>{let n={};for(let r in e.shape){let i=e.shape[r];if(B.check(i)){if(m(t))continue;i=i.shape}n[r]=eT(i,t)}return n}).if(J,(e,t)=>{let n=[],r=v(t,0,42);for(let i=0;i<r;i++)n.push(eA(t,e.shape));return n}).if(M,(e,t)=>E(t,e.shape)).if(eE,(e,t)=>null).if(en,(e,t)=>{let n=eA(t,e.res);return()=>n}).if(eu,(e,t)=>eA(t,E(t,[ep,ey,e_,ev,eh,em,K(ep),V(eo("a","b","c"),ep)]))).if($,(e,t)=>{let n={},r=w(t,0,3);for(let i=0;i<r;i++){let r=eA(t,e.shape.keys),i=eA(t,e.shape.values);n[r]=i}return n}).done(),eA=(e,t)=>eT(eS(t),e),ex="u">typeof document?document:{};D(e=>e.nodeType===eM),"u">typeof DOMParser&&new DOMParser,D(e=>e.nodeType===eD),D(e=>e.nodeType===eP);let eO=e=>u.Tj(e,(e,t)=>`${t}:${e};`).join(""),eD=ex.ELEMENT_NODE,eP=ex.TEXT_NODE;ex.CDATA_SECTION_NODE,ex.COMMENT_NODE;let eL=ex.DOCUMENT_NODE;ex.DOCUMENT_TYPE_NODE;let eM=ex.DOCUMENT_FRAGMENT_NODE;D(e=>e.nodeType===eL);var eI=n(16337);let ej={[eI.Y]:l("font-weight","bold"),[eI.Ny]:l("font-weight","normal"),[eI.ft]:l("color","blue"),[eI.AV]:l("color","green"),[eI.Qu]:l("color","grey"),[eI.UH]:l("color","red"),[eI.hr]:l("color","purple"),[eI.hN]:l("color","orange"),[eI.Tx]:l("color","black")},eN=o.WI?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],n=[],r=u.vt(),i=[],s=0;for(;s<e.length;s++){let i=e[s],o=ej[i];if(void 0!==o)r.set(o.left,o.right);else{if(void 0===i)break;if(i.constructor===String||i.constructor===Number){let e=eO(r);s>0||e.length>0?(t.push("%c"+i),n.push(e)):t.push(i)}else break}}for(s>0&&(i=n).unshift(t.join(""));s<e.length;s++){let t=e[s];t instanceof Symbol||i.push(t)}return i}:eI.ET,eU=(...e)=>{console.log(...eN(e)),eB.forEach(t=>t.print(e))},eF=(...e)=>{console.warn(...eN(e)),e.unshift(eI.hN),eB.forEach(t=>t.print(e))},eB=a.vt(),eW=e=>eI.Xv(eU,e)},59820:(e,t,n)=>{"use strict";n.d(t,{$C:()=>h,Ib:()=>S,Jg:()=>v,VQ:()=>E,bo:()=>f,cQ:()=>_,cw:()=>g,ov:()=>d,pT:()=>y,t3:()=>b,xK:()=>C,xh:()=>p});var r=n(52495),i=n(10592),s=n(55043),o=n(3515),a=n(47048);let c=a.vt("Unexpected end of array"),l=a.vt("Integer out of Range");class u{constructor(e){this.arr=e,this.pos=0}}let h=e=>new u(e),d=e=>e.pos!==e.arr.length,f=e=>{var t;let n;return t=g(e),n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t),e.pos+=t,n},p=e=>e.arr[e.pos++],g=e=>{let t=0,n=1,i=e.arr.length;for(;e.pos<i;){let i=e.arr[e.pos++];if(t+=(i&r.WD)*n,n*=128,i<r.wt)return t;if(t>s.Is)throw l}throw c},y=e=>{let t=e.arr[e.pos++],n=t&r.P1,i=64,o=(t&r.D7)>0?-1:1;if((t&r.wt)==0)return o*n;let a=e.arr.length;for(;e.pos<a;){if(n+=((t=e.arr[e.pos++])&r.WD)*i,i*=128,t<r.wt)return o*n;if(n>s.Is)throw l}throw c},b=o.tv?e=>o.tv.decode(f(e)):e=>{let t=g(e);if(0===t)return"";{let n=String.fromCodePoint(p(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(p(e));else for(;t>0;){let r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},m=(e,t)=>{let n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},w=[e=>void 0,e=>null,y,e=>m(e,4).getFloat32(0,!1),e=>m(e,8).getFloat64(0,!1),e=>m(e,8).getBigInt64(0,!1),e=>!1,e=>!0,b,e=>{let t=g(e),n={};for(let r=0;r<t;r++)n[b(e)]=v(e);return n},e=>{let t=g(e),n=[];for(let r=0;r<t;r++)n.push(v(e));return n},f],v=e=>w[127-p(e)](e);class _ extends u{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),d(this)?this.count=g(this)+1:this.count=-1),this.count--,this.s}}class E extends u{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=y(this);let e=i.sj(this.s);this.count=1,e&&(this.s=-this.s,this.count=g(this)+2)}return this.count--,this.s}}class C extends u{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){let e=y(this);this.diff=i.RI(e/2),this.count=1,1&e&&(this.count=g(this)+2)}return this.s+=this.diff,this.count--,this.s}}class S{constructor(e){this.decoder=new E(e),this.str=b(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}},60955:(e,t,n)=>{"use strict";n.d(t,{hd:()=>s,ku:()=>i,vt:()=>r});let r=e=>new Promise(e);Promise.all.bind(Promise);let i=e=>Promise.reject(e),s=e=>Promise.resolve(e)},63108:(e,t,n)=>{"use strict";e.exports=n(58027)},65284:(e,t,n)=>{"use strict";n.d(t,{cj:()=>Z,dM:()=>W,ud:()=>ee,x5:()=>R,y8:()=>et,yt:()=>Q,z6:()=>G});var r=n(83751),i=n(80115),s=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&h(e,n,t[n]);if(c)for(var n of c(t))u.call(t,n)&&h(e,n,t[n]);return e},f=(e,t)=>o(e,a(t)),p=(e,t)=>{var n={};for(var r in e)l.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&c)for(var r of c(e))0>t.indexOf(r)&&u.call(e,r)&&(n[r]=e[r]);return n};function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){if(!g(e))return!1;let t=e.constructor;if(void 0===t)return!0;let n=t.prototype;return!1!==g(n)&&!1!==n.hasOwnProperty("isPrototypeOf")}function b(e,t){for(let n in e){let r=e[n],i=t[n];if(y(r)&&y(i)){if(!b(r,i))return!1}else if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1}else if(r!==i)return!1}for(let n in t)if(void 0===e[n]&&void 0!==t[n])return!1;return!0}function m(e){return function(e){var t,n;let r=[];for(let i of e){if("string"==typeof i.insert&&0===i.insert.length)continue;let e=r[r.length-1];if(!e||"string"!=typeof e.insert||"string"!=typeof i.insert){r.push(i);continue}if(e.attributes===i.attributes||!e.attributes==!i.attributes&&b(null!=(t=e.attributes)?t:{},null!=(n=i.attributes)?n:{})){e.insert+=i.insert;continue}r.push(i)}return r}(e.toDelta())}function w({insert:e}){return"string"==typeof e?e.length:1}function v(e){return e.reduce((e,t)=>e+w(t),0)}function _(e,t,n){if(n<1)return[];let r=0,i=[],s=t+n;for(let n=0;n<e.length&&!(r>=s);n++){let o=e[n],a=w(o);if(r+a<=t){r+=a;continue}if("string"!=typeof o.insert){r+=a,i.push(o);continue}let c=Math.max(0,t-r),l=Math.min(a,a-(r+a-s));i.push(f(d({},o),{insert:o.insert.slice(c,l)})),r+=a}return i}function E(e){return function(e,...t){return Object.fromEntries(Object.entries(e).filter(([e])=>!t.includes(e)))}(e,r.EY.isText(e)?"text":"children")}function C(e){let t=m(e),n=t.length>0?t.map(S):[{text:""}];return f(d({},e.getAttributes()),{children:n})}function S(e){return"string"==typeof e.insert?f(d({},e.attributes),{text:e.insert}):C(e.insert)}function R(e){return e.map(e=>r.EY.isText(e)?{insert:e.text,attributes:E(e)}:{insert:k(e)})}function k(e){var{children:t}=e,n=p(e,["children"]);let r=new i.ZQ;return Object.entries(n).forEach(([e,t])=>{r.setAttribute(e,t)}),r.applyDelta(R(t),{sanitize:!1}),r}function T(e){return e?r.EY.isText(e)?e.text.length:1:0}function A(e,t,n){var s;if(0===n.length)throw Error("Path has to a have a length >= 1");if(r.EY.isText(t))throw Error("Cannot descent into slate text");let[o,...a]=n,c=t.children.slice(0,o).reduce((e,t)=>e+T(t),0),l=t.children[o],u=m(e),h=T(l),d=_(u,c,h);if(d.length>1)throw Error("Path doesn't match yText, yTarget spans multiple nodes");let f=null==(s=d[0])?void 0:s.insert;if(a.length>0){if(!(f instanceof i.ZQ))throw Error("Path doesn't match yText, cannot descent into non-yText");return A(f,l,a)}return{yParent:e,textRange:{start:c,end:c+h},yTarget:f instanceof i.ZQ?f:void 0,slateParent:t,slateTarget:l,targetDelta:d}}function x(e,t,n={}){let{assoc:i=0,insert:s=!1}=n,o=0,a=0;for(let n=0;n<e.children.length;n++){let s=e.children[n],c=r.EY.isText(s)?s.text.length:1;c>0&&(a=n);let l=o+c;if(c>0&&(i>=0?l>t:l>=t))return[n,t-o];o+=c}if(t>o+ +!!s)throw Error("yOffset out of bounds");if(s)return[e.children.length,0];let c=e.children[a];return[a,r.EY.isText(c)?c.text.length:1]}function O(e,t,n){let s=[n];for(;s[0]!==e;){let{parent:e}=s[0];if(!e)throw Error("yText isn't a descendant of root element");if(!(e instanceof i.ZQ))throw Error("Unexpected y parent type");s.unshift(e)}if(s.length<2)return[];let o=t;return s.reduce((e,t,n)=>{let i=s[n+1];if(!i)return e;let a=0;for(let e of m(t)){if(e.insert===i)break;a+="string"==typeof e.insert?e.insert.length:1}if(r.EY.isText(o))throw Error("Cannot descent into slate text");let[c]=x(o,a);return o=o.children[c],e.concat(c)},[])}function D(e){return e.map(e=>{var t;let n;return"string"==typeof e.insert?e:f(d({},e),{insert:(t=e.insert,n=new i.ZQ,Object.entries(t.getAttributes()).forEach(([e,t])=>{n.setAttribute(e,t)}),n.applyDelta(D(m(t)),{sanitize:!1}),n)})})}function P(e){if(!e.doc)throw Error("shared type isn't attached to a document")}var L="__slateYjsStoredPosition_";function M(e,t,n){let{yTarget:r,yParent:s,textRange:o}=A(e,t,n.path);if(r)throw Error("Slate point points to a non-text element inside sharedRoot");let a=o.start+n.offset;return i.SF(s,a,a===o.end?-1:0)}function I(e,t,n){if(!e.doc)throw Error("sharedRoot isn't attach to a yDoc");let s=i.IT(n,e.doc);return s&&function(e,t,{type:n,index:s,assoc:o}){if(!(n instanceof i.ZQ))throw Error("Absolute position points to a non-XMLText");let a=O(e,t,n),c=r.bP.get(t,a);if(r.EY.isText(c))throw Error("Absolute position doesn't match slateRoot, cannot descent into text");let[l,u]=x(c,s,{assoc:o}),h=c.children[l];return r.EY.isText(h)?{path:[...a,l],offset:u}:null}(e,t,s)}function j(e,t,n){e.setAttribute(L+t,i.YV(n))}function N(e,t,n){return Object.fromEntries(Object.entries(e).filter(([,e])=>e.type===t&&(!n||(e.assoc>=0?e.index>=n.start&&e.index<n.end:e.index>n.start&&e.index>=n.end))))}function U(e,t,n,r=0){let s=(P(e),Object.fromEntries(Object.entries(e.getAttributes()).filter(([e])=>e.startsWith(L)).map(([t,n])=>[t.slice(L.length),i.IT(i.Wo(n),e.doc)]).filter(([,e])=>e))),o={"":N(s,t,{start:r,end:r+v(n)})};return n.forEach(({insert:e},t)=>{e instanceof i.ZQ&&Object.assign(o,function e(t,n,r=""){let s={[r]:N(t,n)};return m(n).forEach(({insert:n},o)=>{n instanceof i.ZQ&&Object.assign(s,e(t,n,r?`${r}.${o}`:o.toString()))}),s}(s,e,t.toString()))}),o}function F(e,t,n,r,s=0,o=0,a=""){let c=n[a];c&&Object.entries(c).forEach(([n,r])=>{j(e,n,i.SF(t,r.index-o+s,r.assoc))}),r.forEach(({insert:t},r)=>{t instanceof i.ZQ&&F(e,t,n,m(t),0,0,a?`${a}.${r}`:r.toString())})}function B(e,t,n){return{anchor:M(e,t,n.anchor),focus:M(e,t,n.focus)}}function W(e,t,n){let r=I(e,t,n.anchor);if(!r)return null;let i=I(e,t,n.focus);return i?{anchor:r,focus:i}:null}var q=f(d(d({},{insert_text:function(e,t,n){let{yParent:i,textRange:s}=A(e,t,n.path),o=r.bP.get(t,n.path);if(!r.EY.isText(o))throw Error("Cannot insert text into non-text node");i.insert(s.start+n.offset,n.text,E(o))},remove_text:function(e,t,n){let{yParent:r,textRange:i}=A(e,t,n.path);r.delete(i.start+n.offset,n.text.length)}}),{insert_node:function(e,t,n){let{yParent:i,textRange:s}=A(e,t,n.path);if(r.EY.isText(n.node))return i.insert(s.start,n.node.text,E(n.node));i.insertEmbed(s.start,k(n.node))},remove_node:function(e,t,n){let{yParent:r,textRange:i}=A(e,t,n.path);r.delete(i.start,i.end-i.start)},set_node:function(e,t,n){let{yTarget:r,textRange:i,yParent:s}=A(e,t,n.path);if(r)return Object.entries(n.newProperties).forEach(([e,t])=>{if(null===t)return r.removeAttribute(e);r.setAttribute(e,t)}),Object.entries(n.properties).forEach(([e])=>{n.newProperties.hasOwnProperty(e)||r.removeAttribute(e)});let o=d(d({},Object.fromEntries(Object.keys(n.properties).map(e=>[e,null]))),n.newProperties);s.format(i.start,i.end-i.start,o)},merge_node:function(e,t,n){let i=A(e,t,n.path),s=A(i.yParent,i.slateParent,r.wA.previous(n.path.slice(-1)));if(!i.yTarget!=!s.yTarget)throw Error("Cannot merge y text with y element");if(!s.yTarget||!i.yTarget){let{yParent:e,textRange:s,slateTarget:o}=i;if(!o)throw Error("Expected Slate target node for merge op.");let a=r.bP.get(t,r.wA.previous(n.path));if(!r.EY.isText(a))throw Error("Path points to Y.Text but not a Slate text node.");let c=E(o),l=E(a),u=Object.keys(c).reduce((e,t)=>t in l?e:f(d({},e),{[t]:null}),{});return e.format(s.start,s.end-s.start,d(d({},u),l))}let o=s.yTarget.length,a=m(i.yTarget),c=D(a),l=U(e,i.yTarget,a,o),u=[{retain:o},...c];s.yTarget.applyDelta(u,{sanitize:!1}),i.yParent.delete(i.textRange.start,i.textRange.end-i.textRange.start),F(e,s.yTarget,l,c,o)},move_node:function(e,t,n){let i=r.wA.parent(n.newPath),s=n.newPath[n.newPath.length-1],o=r.bP.get(t,i);if(r.EY.isText(o))throw Error("Cannot move slate node into text element");let a=[...i,Math.min(s,o.children.length)],c=A(e,t,n.path),l=A(e,t,a),u=D(c.targetDelta),h=U(e,c.yParent,c.targetDelta);c.yParent.delete(c.textRange.start,c.textRange.end-c.textRange.start);let d=v(m(l.yParent)),f=Math.min(l.textRange.start,d),p=[{retain:f},...u];l.yParent.applyDelta(p,{sanitize:!1}),F(e,l.yParent,h,u,f,c.textRange.start)},split_node:function(e,t,n){let s=A(e,t,n.path);if(!s.slateTarget)throw Error("Y target without corresponding slate node");if(!s.yTarget){if(!r.EY.isText(s.slateTarget))throw Error("Mismatch node type between y target and slate node");let e={};return s.targetDelta.forEach(t=>{t.attributes&&Object.keys(t.attributes).forEach(t=>{e[t]=null})}),s.yParent.format(s.textRange.start,s.textRange.end-s.textRange.start,d(d({},e),n.properties))}if(r.EY.isText(s.slateTarget))throw Error("Mismatch node type between y target and slate node");let o=A(s.yTarget,s.slateTarget,[n.position]),a=s.slateTarget.children.slice(0,n.position).reduce((e,t)=>e+T(t),0),c=s.slateTarget.children.reduce((e,t)=>e+T(t),0),l=_(m(s.yTarget),a,c-a),u=D(l),h=U(e,s.yTarget,l,a),f=new i.ZQ;f.applyDelta(u,{sanitize:!1}),Object.entries(n.properties).forEach(([e,t])=>{f.setAttribute(e,t)}),s.yTarget.delete(o.textRange.start,s.yTarget.length-o.textRange.start),s.yParent.insertEmbed(s.textRange.end,f),F(e,f,h,u,0,a)}}),{set_selection:()=>{}}),H=Symbol("slate-yjs-operation"),z=Symbol("slate-yjs-position-storage"),Y=new WeakMap,V=new WeakMap,$=new WeakSet,Q={isYjsEditor:e=>r.KE.isEditor(e)&&e.sharedRoot instanceof i.ZQ&&"localOrigin"in e&&"positionStorageOrigin"in e&&"function"==typeof e.applyRemoteEvents&&"function"==typeof e.storeLocalChange&&"function"==typeof e.flushLocalChanges&&"function"==typeof e.isLocalOrigin&&"function"==typeof e.connect&&"function"==typeof e.disconnect,localChanges(e){var t;return null!=(t=V.get(e))?t:[]},applyRemoteEvents(e,t,n){e.applyRemoteEvents(t,n)},storeLocalChange(e,t){e.storeLocalChange(t)},flushLocalChanges(e){e.flushLocalChanges()},connected:e=>$.has(e),connect(e){e.connect()},disconnect(e){e.disconnect()},isLocal:e=>e.isLocalOrigin(Q.origin(e)),origin(e){let t=Y.get(e);return void 0!==t?t:e.localOrigin},withOrigin(e,t,n){let r=Q.origin(e);Y.set(e,t),n(),Y.set(e,r)},storePosition(e,t,n){let{sharedRoot:r,positionStorageOrigin:i}=e;P(r);let s=M(r,e,n);r.doc.transact(()=>{j(r,t,s)},i)},removeStoredPosition(e,t){let{sharedRoot:n,positionStorageOrigin:r}=e;P(n),n.doc.transact(()=>{n.removeAttribute(L+t)},r)},position(e,t){var n;let r,s=(n=e.sharedRoot,(r=n.getAttribute(L+t))?i.Wo(r):null);if(s)return I(e.sharedRoot,e,s)},storedPositionsRelative:e=>Object.fromEntries(Object.entries(e.sharedRoot.getAttributes()).filter(([e])=>e.startsWith(L)).map(([e,t])=>[e.slice(L.length),i.sH(t)]))};function G(e,t,{localOrigin:n,positionStorageOrigin:s,autoConnect:o=!1}={}){e.sharedRoot=t,e.localOrigin=null!=n?n:H,e.positionStorageOrigin=null!=s?s:z,e.applyRemoteEvents=(t,n)=>{Q.flushLocalChanges(e),r.KE.withoutNormalizing(e,()=>{Q.withOrigin(e,n,()=>{var n;n=e.sharedRoot,r.KE.withoutNormalizing(e,()=>{t.forEach(t=>{(function(e,t,n){if(n instanceof i.zN)return function(e,t,n){let s,o,{target:a,changes:c}=n,l=n.delta;if(!(a instanceof i.ZQ))throw Error("Unexpected target node type");let u=[],h=O(e,t,a),f=r.bP.get(t,h);if(r.EY.isText(f))throw Error("Cannot apply yTextEvent to text node");let p=Array.from(c.keys.entries());if(h.length>0&&p.length>0){let e=Object.fromEntries(p.map(([e,t])=>[e,"delete"===t.action?null:a.getAttribute(e)])),t=Object.fromEntries(p.map(([e])=>[e,f[e]]));u.push({type:"set_node",newProperties:e,properties:t,path:h})}return l.length>0&&u.push(...(s=[],o=l.reduce((e,t)=>"retain"in t?e+t.retain:"delete"in t?e+t.delete:e,0),l.reverse().forEach(e=>{var t;if("attributes"in e&&"retain"in e){let[t,n]=x(f,o-e.retain),[i,a]=x(f,o,{assoc:-1});for(let o=i;o>=t;o--){let c=f.children[o],l=[...h,o];if(!r.EY.isText(c))continue;let u=e.attributes,p=function(e,...t){return Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e)))}(f,...Object.keys(e.attributes));if(o===t||o===i){let e=o===t?n:0,r=o===i?a:c.text.length;if(r!==c.text.length&&s.push({type:"split_node",path:l,position:r,properties:E(c)}),0!==e){s.push({type:"split_node",path:l,position:e,properties:Object.fromEntries(Object.entries(d(d({},E(c)),u)).filter(([,e])=>null!==e))});continue}}s.push({type:"set_node",newProperties:u,path:l,properties:p})}}if("retain"in e&&(o-=e.retain),"delete"in e){let[t,n]=x(f,o-e.delete),[i,a]=x(f,o,{assoc:-1});for(let e=0===a?i-1:i;e>=t;e--){let c=f.children[e],l=[...h,e];if(r.EY.isText(c)&&(e===t||e===i)){let r=e===t?n:0,u=e===i?a:c.text.length;s.push({type:"remove_text",offset:r,text:c.text.slice(r,u),path:l}),o-=u-r;continue}s.push({type:"remove_node",node:c,path:l}),o-=T(c)}return}if("insert"in e){let[n,i]=x(f,o,{insert:!0}),a=f.children[n],c=[...h,n];if(r.EY.isText(a)){let n=s[s.length-1],o=null!=n&&"insert_node"===n.type?n.node:E(a),l=[];if(null!=n&&("insert_node"===n.type||"insert_text"===n.type||"split_node"===n.type||"set_node"===n.type)&&(l=n.path),"string"==typeof e.insert&&b(null!=(t=e.attributes)?t:{},o)&&r.wA.equals(c,l))return s.push({type:"insert_text",offset:i,text:e.insert,path:c});let u=S(e);return 0===i?s.push({type:"insert_node",path:c,node:u}):(i<a.text.length&&s.push({type:"split_node",path:c,position:i,properties:E(a)}),s.push({type:"insert_node",path:r.wA.next(c),node:u}))}return s.push({type:"insert_node",path:c,node:S(e)})}}),s)),u}(e,t,n);throw Error("Unexpected Y event type")})(n,e,t).forEach(t=>{e.apply(t)})})})})})},e.isLocalOrigin=t=>t===e.localOrigin;let a=(t,n)=>{e.isLocalOrigin(n.origin)||Q.applyRemoteEvents(e,t,n.origin)},c=null;o&&(c=setTimeout(()=>{c=null,Q.connect(e)})),e.connect=()=>{if(Q.connected(e))throw Error("already connected");e.sharedRoot.observeDeep(a);let t=C(e.sharedRoot);e.children=t.children,$.add(e),r.KE.normalize(e,{force:!0}),e.operations.length||e.onChange()},e.disconnect=()=>{c&&clearTimeout(c),Q.flushLocalChanges(e),e.sharedRoot.unobserveDeep(a),$.delete(e)},e.storeLocalChange=t=>{V.set(e,[...Q.localChanges(e),{op:t,doc:e.children,origin:Q.origin(e)}])},e.flushLocalChanges=()=>{P(e.sharedRoot);let t=Q.localChanges(e);V.delete(e);let n=[];t.forEach(e=>{let t=n[n.length-1];if(t&&t[0].origin===e.origin)return t.push(e);n.push([e])}),n.forEach(t=>{P(e.sharedRoot),e.sharedRoot.doc.transact(()=>{t.forEach(t=>{P(e.sharedRoot),function(e,t,n){let r=q[n.type];if(!r)throw Error(`Unknown operation: ${n.type}`);r(e,t,n)}(e.sharedRoot,{children:t.doc},t.op)})},t[0].origin)})};let{apply:l,onChange:u}=e;return e.apply=t=>{Q.connected(e)&&Q.isLocal(e)&&Q.storeLocalChange(e,t),l(t)},e.onChange=()=>{Q.connected(e)&&Q.flushLocalChanges(e),u()},e}var K=new WeakMap,J=Symbol("slate-yjs-history-without-saving");function Z(e,t={}){var{withoutSavingOrigin:n=J,trackedOrigins:s=new Set([e.localOrigin])}=t,o=p(t,["withoutSavingOrigin","trackedOrigins"]);let a=new i.ad(e.sharedRoot,d({trackedOrigins:s},o));e.undoManager=a,e.withoutSavingOrigin=n;let{onChange:c,isLocalOrigin:l}=e;e.onChange=()=>{c(),K.set(e,e.selection&&B(e.sharedRoot,e,e.selection))},e.isLocalOrigin=t=>t===e.withoutSavingOrigin||l(t);let u=({stackItem:t})=>{t.meta.set("selection",e.selection&&B(e.sharedRoot,e,e.selection)),t.meta.set("selectionBefore",K.get(e))},h=({stackItem:t})=>{t.meta.set("selection",e.selection&&B(e.sharedRoot,e,e.selection))},f=({stackItem:t,type:n})=>{let i="undo"===n?e.undoManager.redoStack:e.undoManager.undoStack,s=i[i.length-1];s&&(s.meta.set("selection",t.meta.get("selectionBefore")),s.meta.set("selectionBefore",t.meta.get("selection")));let o=t.meta.get("selectionBefore");if(!o)return;let a=W(e.sharedRoot,e,o);a&&r.gB.select(e,a)},{connect:g,disconnect:y}=e;return e.connect=()=>{g(),e.undoManager.on("stack-item-added",u),e.undoManager.on("stack-item-popped",f),e.undoManager.on("stack-item-updated",h)},e.disconnect=()=>{e.undoManager.off("stack-item-added",u),e.undoManager.off("stack-item-popped",f),e.undoManager.off("stack-item-updated",h),y()},e.undo=()=>{Q.connected(e)&&(Q.flushLocalChanges(e),e.undoManager.undo())},e.redo=()=>{Q.connected(e)&&(Q.flushLocalChanges(e),e.undoManager.redo())},e}var X=new WeakMap,ee={isCursorEditor:e=>Q.isYjsEditor(e)&&e.awareness&&"string"==typeof e.cursorDataField&&"string"==typeof e.selectionStateField&&"function"==typeof e.sendCursorPosition&&"function"==typeof e.sendCursorData,sendCursorPosition(e,t=e.selection){e.sendCursorPosition(t)},sendCursorData(e,t){e.sendCursorData(t)},on(e,t,n){var r;if("change"!==t)return;let i=null!=(r=X.get(e))?r:new Set;i.add(n),X.set(e,i)},off(e,t,n){if("change"!==t)return;let r=X.get(e);r&&r.delete(n)},cursorState(e,t){var n;if(t===e.awareness.clientID||!Q.connected(e))return null;let r=e.awareness.getStates().get(t);return r?{relativeSelection:null!=(n=r[e.selectionStateField])?n:null,data:r[e.cursorDataField],clientId:t}:null},cursorStates:e=>Q.connected(e)?Object.fromEntries(Array.from(e.awareness.getStates().entries(),([t,n])=>t!==e.awareness.clientID&&n?[t,{relativeSelection:n[e.selectionStateField],data:n[e.cursorDataField]}]:null).filter(Array.isArray)):{}};function et(e,t,{cursorStateField:n="selection",cursorDataField:r="data",autoSend:s=!0,data:o}={}){e.awareness=t,e.cursorDataField=r,e.selectionStateField=n,e.sendCursorData=t=>{e.awareness.setLocalStateField(e.cursorDataField,t)},e.sendCursorPosition=t=>{let r=e.awareness.getLocalState(),s=null==r?void 0:r[n];if(!t){s&&e.awareness.setLocalStateField(e.selectionStateField,null);return}let{anchor:o,focus:a}=B(e.sharedRoot,e,t);s&&i.uG(o,s)&&i.uG(a,s)||e.awareness.setLocalStateField(e.selectionStateField,{anchor:o,focus:a})};let a=t=>{let n=X.get(e);if(!n)return;let r=e.awareness.clientID,i={added:t.added.filter(e=>e!==r),removed:t.removed.filter(e=>e!==r),updated:t.updated.filter(e=>e!==r)};(i.added.length>0||i.removed.length>0||i.updated.length>0)&&n.forEach(e=>e(i))},{connect:c,disconnect:l}=e;return e.connect=()=>{if(c(),e.awareness.on("change",a),a({removed:[],added:Array.from(e.awareness.getStates().keys()),updated:[]}),s){o&&ee.sendCursorData(e,o);let{onChange:t}=e;e.onChange=()=>{t(),Q.connected(e)&&ee.sendCursorPosition(e)}}},e.disconnect=()=>{e.awareness.off("change",a),a({removed:Array.from(e.awareness.getStates().keys()),added:[],updated:[]}),l()},e}},71099:(e,t,n)=>{"use strict";n.d(t,{hU:()=>K});var r=n(89075),i=n(23371),s=n(10592);let o=e=>{if(e.shouldConnect&&null===e.ws){let t=new WebSocket(e.url),n=e.binaryType,r=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=t=>{e.lastMessageReceived=i._g();let n=t.data,s="string"==typeof n?JSON.parse(n):n;s&&"pong"===s.type&&(clearTimeout(r),r=setTimeout(c,15e3)),e.emit("message",[s,e])};let a=t=>{null!==e.ws&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:t},e])):e.unsuccessfulReconnects++,setTimeout(o,s.jk(1200*s.YL(e.unsuccessfulReconnects+1),2500),e)),clearTimeout(r)},c=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>a(null),t.onerror=e=>a(e),t.onopen=()=>{e.lastMessageReceived=i._g(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),r=setTimeout(c,15e3)}}};class a extends r.c{constructor(e,{binaryType:t}={}){super(),this.url=e,this.ws=null,this.binaryType=t||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&3e4<i._g()-this.lastMessageReceived&&this.ws.close()},15e3),o(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||o(this)}}var c=n(6936),l=n(47048),u=n(1654),h=n(58199),d=n(59820),f=n(58613),p=n(16337),g=n(60955),y=n(30950),b=n(43572),m=n(37267);let w=new Map;class v{constructor(e){this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:b.Ey(t.newValue||"")}),m.k9(this._onChange)}postMessage(e){m.JT.setItem(this.room,b.nk(b.zS(e)))}close(){m.o6(this._onChange)}}let _="u"<typeof BroadcastChannel?v:BroadcastChannel,E=e=>c._4(w,e,()=>{let t=y.vt(),n=new _(e);return n.onmessage=e=>t.forEach(t=>t(e.data,"broadcastchannel")),{bc:n,subs:t}});var C=n(5572),S=n(80115);let R=(e,t)=>{h.zd(e,0);let n=S.FX(t);h.Gu(e,n)},k=(e,t,n)=>{h.zd(e,1),h.Gu(e,S.PR(t,n))};var T=n(8910);class A extends r.c{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{let e=i._g();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());let t=[];this.meta.forEach((n,r)=>{r!==this.clientID&&3e4<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)}),t.length>0&&x(this,t,"timeout")},s.RI(3e3)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){let t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,s=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:i._g()});let o=[],a=[],c=[],l=[];null===e?l.push(t):null==s?null!=e&&o.push(t):(a.push(t),T.vo(s,e)||c.push(t)),(o.length>0||c.length>0||l.length>0)&&this.emit("change",[{added:o,updated:c,removed:l},"local"]),this.emit("update",[{added:o,updated:a,removed:l},"local"])}setLocalStateField(e,t){let n=this.getLocalState();null!==n&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}let x=(e,t,n)=>{let r=[];for(let n=0;n<t.length;n++){let s=t[n];if(e.states.has(s)){if(e.states.delete(s),s===e.clientID){let t=e.meta.get(s);e.meta.set(s,{clock:t.clock+1,lastUpdated:i._g()})}r.push(s)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},O=(e,t,n=e.states)=>{let r=t.length,i=h.xv();h.zd(i,r);for(let s=0;s<r;s++){let r=t[s],o=n.get(r)||null,a=e.meta.get(r).clock;h.zd(i,r),h.zd(i,a),h.Qj(i,JSON.stringify(o))}return h.Fo(i)};var D=n(3515);let P=(e,t)=>{if(!t)return g.hd(e);let n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then(e=>{let t=h.xv();return h.Qj(t,"AES-GCM"),h.Gu(t,n),h.Gu(t,new Uint8Array(e)),h.Fo(t)})},L=(e,t)=>{if(!t)return g.hd(e);let n=d.$C(e);"AES-GCM"!==d.t3(n)&&g.ku(l.vt("Unknown encryption algorithm"));let r=d.bo(n),i=d.bo(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:r},t,i).then(e=>new Uint8Array(e))};var M=n(40459);let I=f.Xv("y-webrtc"),j=new Map,N=new Map,U=e=>{let t=!0;e.webrtcConns.forEach(e=>{e.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),I("synced ",p.Y,e.name,p.Ny," with all peers"))},F=(e,t,n)=>{let r=d.$C(t),s=h.xv(),o=d.cw(r);if(void 0===e)return null;let a=e.awareness,c=e.doc,l=!1;switch(o){case 0:{h.zd(s,0);let t=((e,t,n,r,i)=>{let s=d.cw(e);switch(s){case 0:k(t,n,d.bo(e));break;case 1:case 2:var o=e,a=n,c=r,l=i;try{S.QE(a,d.bo(o),c)}catch(e){null!=l&&l(e),console.error("Caught error while handling a Yjs update",e)}break;default:throw Error("Unknown message type")}return s})(r,s,c,e);1!==t||e.synced||n(),0===t&&(l=!0);break}case 3:h.zd(s,1),h.Gu(s,O(a,Array.from(a.getStates().keys()))),l=!0;break;case 1:((e,t,n)=>{let r=d.$C(t),s=i._g(),o=[],a=[],c=[],l=[],u=d.cw(r);for(let t=0;t<u;t++){let t=d.cw(r),n=d.cw(r),i=JSON.parse(d.t3(r)),u=e.meta.get(t),h=e.states.get(t),f=void 0===u?0:u.clock;(f<n||f===n&&null===i&&e.states.has(t))&&(null===i?t===e.clientID&&null!=e.getLocalState()?n++:e.states.delete(t):e.states.set(t,i),e.meta.set(t,{clock:n,lastUpdated:s}),void 0===u&&null!==i?o.push(t):void 0!==u&&null===i?l.push(t):null!==i&&(T.vo(i,h)||c.push(t),a.push(t)))}(o.length>0||c.length>0||l.length>0)&&e.emit("change",[{added:o,updated:c,removed:l},n]),(o.length>0||a.length>0||l.length>0)&&e.emit("update",[{added:o,updated:a,removed:l},n])})(a,d.bo(r),e);break;case 4:{let t=1===d.xh(r),n=d.t3(r);if(n!==e.peerId&&(e.bcConns.has(n)&&!t||!e.bcConns.has(n)&&t)){let r=[],i=[];t?(e.bcConns.add(n),i.push(n)):(e.bcConns.delete(n),r.push(n)),e.provider.emit("peers",[{added:i,removed:r,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),Y(e)}break}default:return console.error("Unable to compute message"),s}return l?s:null},B=(e,t)=>{I("send message to ",p.Y,e.remotePeerId,p.Ny,p.Qu," (",e.room.name,")",p.Tx);try{e.peer.send(h.Fo(t))}catch(e){}};class W{constructor(e,t,n,r){I("establishing connection to ",p.Y,n),this.room=r,this.remotePeerId=n,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new C({initiator:t,...r.provider.peerOpts}),this.peer.on("signal",t=>{void 0===this.glareToken&&(this.glareToken=Date.now()+Math.random()),$(e,r,{to:n,from:r.peerId,type:"signal",token:this.glareToken,signal:t})}),this.peer.on("connect",()=>{I("connected to ",p.Y,n),this.connected=!0;let e=r.provider.doc,t=r.awareness,i=h.xv();h.zd(i,0),R(i,e),B(this,i);let s=t.getStates();if(s.size>0){let e=h.xv();h.zd(e,1),h.Gu(e,O(t,Array.from(s.keys()))),B(this,e)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,r.webrtcConns.has(this.remotePeerId)&&(r.webrtcConns.delete(this.remotePeerId),r.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(r.webrtcConns.keys()),bcPeers:Array.from(r.bcConns)}])),U(r),this.peer.destroy(),I("closed connection to ",p.Y,n),z(r)}),this.peer.on("error",e=>{I("Error in connection to ",p.Y,n,": ",e),z(r)}),this.peer.on("data",e=>{var t;let n,r=(t=this,n=t.room,I("received message from ",p.Y,t.remotePeerId,p.Qu," (",n.name,")",p.Ny,p.Tx),F(n,e,()=>{t.synced=!0,I("synced ",p.Y,n.name,p.Ny," with ",p.Y,t.remotePeerId),U(n)}));null!==r&&B(this,r)})}destroy(){this.peer.destroy()}}let q=(e,t)=>P(t,e.key).then(t=>e.mux(()=>((e,t,n=null)=>{let r=E(e);r.bc.postMessage(t),r.subs.forEach(e=>e(t,n))})(e.name,t))),H=(e,t)=>{e.bcconnected&&q(e,t),I("broadcast message in ",p.Y,e.name,p.Ny),e.webrtcConns.forEach(e=>{try{e.peer.send(t)}catch(e){}})},z=e=>{j.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&$(t,e,{type:"announce",from:e.peerId}))})},Y=e=>{if(e.provider.filterBcConns){let t=h.xv();h.zd(t,4),h.QJ(t,1),h.Qj(t,e.peerId),q(e,h.Fo(t))}};class V{constructor(e,t,n,r){this.peerId=u.gZ(),this.doc=e,this.awareness=t.awareness,this.provider=t,this.synced=!1,this.name=n,this.key=r,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=(()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}})(),this.bcconnected=!1,this._bcSubscriber=e=>L(new Uint8Array(e),r).then(e=>this.mux(()=>{let t=F(this,e,()=>{});t&&q(this,h.Fo(t))})),this._docUpdateHandler=(e,t)=>{let n=h.xv();h.zd(n,0),h.zd(n,2),h.Gu(n,e),H(this,h.Fo(n))},this._awarenessUpdateHandler=({added:e,updated:t,removed:n},r)=>{let i=e.concat(t).concat(n),s=h.xv();h.zd(s,1),h.Gu(s,O(this.awareness,i)),H(this,h.Fo(s))},this._beforeUnloadHandler=()=>{x(this.awareness,[e.clientID],"window unload"),N.forEach(e=>{e.disconnect()})},"u">typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):void 0!==M&&M.on("exit",this._beforeUnloadHandler)}connect(){var e,t;this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),z(this),e=this.name,t=this._bcSubscriber,E(e).subs.add(t),this.bcconnected=!0,Y(this);let n=h.xv();h.zd(n,0),R(n,this.doc),q(this,h.Fo(n));let r=h.xv();h.zd(r,0),k(r,this.doc),q(this,h.Fo(r));let i=h.xv();h.zd(i,3),q(this,h.Fo(i));let s=h.xv();h.zd(s,1),h.Gu(s,O(this.awareness,[this.doc.clientID])),q(this,h.Fo(s))}disconnect(){var e,t;let n;j.forEach(e=>{e.connected&&e.send({type:"unsubscribe",topics:[this.name]})}),x(this.awareness,[this.doc.clientID],"disconnect");let r=h.xv();h.zd(r,4),h.QJ(r,0),h.Qj(r,this.peerId),q(this,h.Fo(r)),e=this.name,t=this._bcSubscriber,(n=E(e)).subs.delete(t)&&0===n.subs.size&&(n.bc.close(),w.delete(e)),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(e=>e.destroy())}destroy(){this.disconnect(),"u">typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):void 0!==M&&M.off("exit",this._beforeUnloadHandler)}}let $=(e,t,n)=>{if(t.key){var r;let i;(r=t.key,i=h.xv(),h.IO(i,n),P(h.Fo(i),r)).then(n=>{e.send({type:"publish",topic:t.name,data:b.nk(n)})})}else e.send({type:"publish",topic:t.name,data:n})};class Q extends a{constructor(e){super(e),this.providers=new Set,this.on("connect",()=>{I(`connected (${e})`);let t=Array.from(N.keys());this.send({type:"subscribe",topics:t}),N.forEach(e=>$(this,e,{type:"announce",from:e.peerId}))}),this.on("message",e=>{if("publish"===e.type){let t=e.topic,n=N.get(t);if(null==n||"string"!=typeof t)return;let r=e=>{let t=n.webrtcConns,r=n.peerId;if(null==e||e.from===r||void 0!==e.to&&e.to!==r||n.bcConns.has(e.from))return;let i=t.has(e.from)?()=>{}:()=>n.provider.emit("peers",[{removed:[],added:[e.from],webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}]);switch(e.type){case"announce":t.size<n.provider.maxConns&&(c._4(t,e.from,()=>new W(this,!0,e.from,n)),i());break;case"signal":if("offer"===e.signal.type){let n=t.get(e.from);if(n){let t=e.token,r=n.glareToken;if(r&&r>t)return void I("offer rejected: ",e.from);n.glareToken=void 0}}"answer"===e.signal.type&&(I("offer answered by: ",e.from),t.get(e.from).glareToken=void 0),e.to===r&&(c._4(t,e.from,()=>new W(this,!1,e.from,n)).peer.signal(e.signal),i())}};if(n.key)"string"==typeof e.data&&L(b.Ey(e.data),n.key).then(e=>d.Jg(d.$C(new Uint8Array(e)))).then(r);else r(e.data)}}),this.on("disconnect",()=>I(`disconnect (${e})`))}}let G=e=>{e.emit("status",[{connected:e.connected}])};class K extends r.W{constructor(e,t,{signaling:n=["wss://y-webrtc-eu.fly.dev"],password:r=null,awareness:i=new A(t),maxConns:o=20+s.RI(15*u._9()),filterBcConns:a=!0,peerOpts:c={}}={}){super(),this.roomName=e,this.doc=t,this.filterBcConns=a,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=o,this.peerOpts=c,this.key=r?((e,t)=>{let n=D.Af(e).buffer,r=D.Af(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(e=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))})(r,e):g.hd(null),this.room=null,this.key.then(n=>{this.room=((e,t,n,r)=>{if(N.has(n))throw l.vt(`A Yjs Doc connected to room "${n}" already exists!`);let i=new V(e,t,n,r);return N.set(n,i),i})(t,this,e,n),this.shouldConnect?this.room.connect():this.room.disconnect(),G(this)}),this.connect(),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{let t=c._4(j,e,()=>new Q(e));this.signalingConns.push(t),t.providers.add(this)}),this.room&&(this.room.connect(),G(this))}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(e=>{e.providers.delete(this),0===e.providers.size&&(e.destroy(),j.delete(e.url))}),this.room&&(this.room.disconnect(),G(this))}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),N.delete(this.roomName)}),super.destroy()}}},85120:(e,t,n)=>{"use strict";let r;n.d(t,{m:()=>eZ,nU:()=>eU});let i=Math.floor,s=Number.MAX_SAFE_INTEGER,o="u">typeof TextEncoder?new TextEncoder:null,a=o?e=>o.encode(e):e=>{let t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r},c="u"<typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});c&&1===c.decode(new Uint8Array).length&&(c=null);let l=(e,t)=>{let n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},u=(e,t)=>{for(;t>127;)l(e,128|127&t),t=i(t/128);l(e,127&t)},h=new Uint8Array(3e4),d=h.length/3,f=o&&o.encodeInto?(e,t)=>{if(t.length<d){let n=o.encodeInto(t,h).written||0;u(e,n);for(let t=0;t<n;t++)l(e,h[t])}else p(e,a(t))}:(e,t)=>{let n=unescape(encodeURIComponent(t)),r=n.length;u(e,r);for(let t=0;t<r;t++)l(e,n.codePointAt(t))},p=(e,t)=>{u(e,t.byteLength),((e,t)=>{let n,r,i=e.cbuf.length,s=e.cpos,o=(n=i-s)<(r=t.length)?n:r,a=t.length-o;if(e.cbuf.set(t.subarray(0,o),s),e.cpos+=o,a>0){let n;e.bufs.push(e.cbuf),e.cbuf=new Uint8Array((n=2*i)>a?n:a),e.cbuf.set(t.subarray(o)),e.cpos=a}})(e,t)},g=Error("Unexpected end of array"),y=Error("Integer out of Range"),b=e=>e.arr[e.pos++],m=e=>{let t=0,n=1,r=e.arr.length;for(;e.pos<r;){let r=e.arr[e.pos++];if(t+=(127&r)*n,n*=128,r<128)return t;if(t>s)throw y}throw g},w=c?e=>{var t;let n;return c.decode((t=m(e),n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t),e.pos+=t,n))}:e=>{let t=m(e);if(0===t)return"";{let n=String.fromCodePoint(b(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(b(e));else for(;t>0;){let r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}};(C=R||(R={}))[C.Token=0]="Token",C[C.PermissionDenied=1]="PermissionDenied",C[C.Authenticated=2]="Authenticated";let v=e=>Array.from(e.entries()).map(([e,t])=>({clientId:e,...t}));(S=k||(k={}))[S.Connecting=0]="Connecting",S[S.Open=1]="Open",S[S.Closing=2]="Closing",S[S.Closed=3]="Closed";var _,E,C,S,R,k,T,A,x=n(80115);async function O(e){return new Promise(t=>setTimeout(t,e))}function D(e,t){let n=t.delay;if(0===n)return 0;if(t.factor&&(n*=Math.pow(t.factor,e.attemptNum-1),0!==t.maxDelay&&(n=Math.min(n,t.maxDelay))),t.jitter){let e=Math.ceil(t.minDelay);n=Math.floor(Math.random()*(Math.floor(n)-e+1))+e}return Math.round(n)}async function P(e,t){var n;let r=((n=t)||(n={}),{delay:void 0===n.delay?200:n.delay,initialDelay:void 0===n.initialDelay?0:n.initialDelay,minDelay:void 0===n.minDelay?0:n.minDelay,maxDelay:void 0===n.maxDelay?0:n.maxDelay,factor:void 0===n.factor?0:n.factor,maxAttempts:void 0===n.maxAttempts?3:n.maxAttempts,timeout:void 0===n.timeout?0:n.timeout,jitter:!0===n.jitter,initialJitter:!0===n.initialJitter,handleError:void 0===n.handleError?null:n.handleError,handleTimeout:void 0===n.handleTimeout?null:n.handleTimeout,beforeAttempt:void 0===n.beforeAttempt?null:n.beforeAttempt,calculateDelay:void 0===n.calculateDelay?null:n.calculateDelay});for(let e of["delay","initialDelay","minDelay","maxDelay","maxAttempts","timeout"]){let t=r[e];if(!Number.isInteger(t)||t<0)throw Error(`Value for ${e} must be an integer greater than or equal to 0`)}if(r.factor.constructor!==Number||r.factor<0)throw Error("Value for factor must be a number greater than or equal to 0");if(r.delay<r.minDelay)throw Error(`delay cannot be less than minDelay (delay: ${r.delay}, minDelay: ${r.minDelay}`);let i={attemptNum:0,attemptsRemaining:r.maxAttempts?r.maxAttempts:-1,aborted:!1,abort(){i.aborted=!0}},s=r.calculateDelay||D;async function o(){if(r.beforeAttempt&&r.beforeAttempt(i,r),i.aborted){let e=Error("Attempt aborted");throw e.code="ATTEMPT_ABORTED",e}let t=async e=>{if(r.handleError&&await r.handleError(e,i,r),i.aborted||0===i.attemptsRemaining)throw e;i.attemptNum++;let t=s(i,r);return t&&await O(t),o()};return(i.attemptsRemaining>0&&i.attemptsRemaining--,r.timeout)?new Promise((n,s)=>{let o=setTimeout(()=>{if(r.handleTimeout)try{n(r.handleTimeout(i,r))}catch(e){s(e)}else{let e=Error(`Retry timeout (attemptNum: ${i.attemptNum}, timeout: ${r.timeout})`);e.code="ATTEMPT_TIMEOUT",s(e)}},r.timeout);e(i,r).then(e=>{clearTimeout(o),n(e)}).catch(e=>{clearTimeout(o),t(e).then(n).catch(s)})}):e(i,r).catch(t)}let a=r.calculateDelay?r.calculateDelay(i,r):r.initialDelay;if(a&&await O(a),i.attemptNum<1&&r.initialJitter){let e=s(i,r);e&&await O(e)}return o()}var L=n(40459),M=n(58863).Buffer;let I=()=>new Map,j=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},N=()=>new Set,U=Array.from,F=String.fromCharCode,B=/^\s*/g,W=/([A-Z])/g,q=(e,t)=>e.replace(W,e=>`${t}${e.toLowerCase()}`).replace(B,""),H="u">typeof TextEncoder?new TextEncoder:null,z=H?e=>H.encode(e):e=>{let t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r},Y="u"<typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Y&&1===Y.decode(new Uint8Array).length&&(Y=null);let V=e=>void 0===e?null:e;class ${constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let Q=new $,G=!0;try{"u">typeof localStorage&&localStorage&&(Q=localStorage,G=!1)}catch(e){}let K=Q,J=Object.keys,Z=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),X=(e,t)=>{if(null==e||null==t)return e===t;if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(let n of e.keys())if(!t.has(n)||!X(e.get(n),t.get(n)))return!1;break;case Object:if(J(e).length!==J(t).length)return!1;for(let n in e)if(!Z(e,n)||!X(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!X(e[n],t[n]))return!1;break;default:return!1}return!0},ee=void 0!==L&&L.release&&/node|io\.js/.test(L.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==L?L:0),et="u">typeof window&&"u">typeof document&&!ee;"u">typeof navigator&&/Mac/.test(navigator.platform);let en=e=>(()=>{if(void 0===r)if(ee){r=I();let e=L.argv,t=null;for(let n=0;n<e.length;n++){let i=e[n];"-"===i[0]?(null!==t&&r.set(t,""),t=i):null!==t&&(r.set(t,i),t=null)}null!==t&&r.set(t,"")}else"object"==typeof location?(r=I(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[t,n]=e.split("=");r.set(`--${q(t,"-")}`,n),r.set(`-${q(t,"-")}`,n)}})):r=I();return r})().has(e),er=e=>ee?V(L.env[e.toUpperCase()]):V(K.getItem(e));en("--production")||er("production");let ei=ee&&["true","1","2"].includes(L.env.FORCE_COLOR);!en("no-colors")&&(!ee||L.stdout.isTTY||ei)&&(!ee||en("color")||ei||null!==er("COLORTERM")||(er("TERM")||"").includes("color"));let es=Math.floor,eo=Number.MAX_SAFE_INTEGER;class ea{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let ec=()=>new ea,el=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},eu=e=>{let t=new Uint8Array(el(e)),n=0;for(let r=0;r<e.bufs.length;r++){let i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},eh=(e,t)=>{let n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},ed=(e,t)=>{for(;t>127;)eh(e,128|127&t),t=es(t/128);eh(e,127&t)},ef=new Uint8Array(3e4),ep=ef.length/3,eg=H&&H.encodeInto?(e,t)=>{if(t.length<ep){let n=H.encodeInto(t,ef).written||0;ed(e,n);for(let t=0;t<n;t++)eh(e,ef[t])}else ey(e,z(t))}:(e,t)=>{let n=unescape(encodeURIComponent(t)),r=n.length;ed(e,r);for(let t=0;t<r;t++)eh(e,n.codePointAt(t))},ey=(e,t)=>{ed(e,t.byteLength),((e,t)=>{let n,r,i=e.cbuf.length,s=e.cpos,o=(n=i-s)<(r=t.length)?n:r,a=t.length-o;if(e.cbuf.set(t.subarray(0,o),s),e.cpos+=o,a>0){let n;e.bufs.push(e.cbuf),e.cbuf=new Uint8Array((n=2*i)>a?n:a),e.cbuf.set(t.subarray(o)),e.cpos=a}})(e,t)},eb=Error("Unexpected end of array"),em=Error("Integer out of Range");class ew{constructor(e){this.arr=e,this.pos=0}}let ev=e=>new ew(e),e_=e=>{var t;let n;return t=eC(e),n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t),e.pos+=t,n},eE=e=>e.arr[e.pos++],eC=e=>{let t=0,n=1,r=e.arr.length;for(;e.pos<r;){let r=e.arr[e.pos++];if(t+=(127&r)*n,n*=128,r<128)return t;if(t>eo)throw em}throw eb},eS=Y?e=>Y.decode(e_(e)):e=>{let t=eC(e);if(0===t)return"";{let n=String.fromCodePoint(eE(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(eE(e));else for(;t>0;){let r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},eR=et?e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=F(e[n]);return btoa(t)}:e=>M.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),ek=et?e=>{let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}:e=>{let t,n=M.from(e,"base64");return t=n.buffer,new Uint8Array(t,n.byteOffset,n.byteLength)},eT=new Map;class eA{constructor(e){this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:ek(t.newValue||"")}),(e=>G||addEventListener("storage",e))(this._onChange)}postMessage(e){K.setItem(this.room,eR(new Uint8Array(e)))}close(){let e;e=this._onChange,G||removeEventListener("storage",e)}}let ex="u"<typeof BroadcastChannel?eA:BroadcastChannel,eO=e=>j(eT,e,()=>{let t=N(),n=new ex(e);return n.onmessage=e=>t.forEach(t=>t(e.data,"broadcastchannel")),{bc:n,subs:t}}),eD=Date.now;class eP{constructor(){this._observers=I()}on(e,t){j(this._observers,e,N).add(t)}once(e,t){let n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){let n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return U((this._observers.get(e)||I()).values()).forEach(e=>e(...t))}destroy(){this._observers=I()}}class eL extends eP{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{let e=eD();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());let t=[];this.meta.forEach((n,r)=>{r!==this.clientID&&3e4<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)}),t.length>0&&eM(this,t,"timeout")},es(3e3)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){let t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:eD()});let s=[],o=[],a=[],c=[];null===e?c.push(t):null==i?null!=e&&s.push(t):(o.push(t),X(i,e)||a.push(t)),(s.length>0||a.length>0||c.length>0)&&this.emit("change",[{added:s,updated:a,removed:c},"local"]),this.emit("update",[{added:s,updated:o,removed:c},"local"])}setLocalStateField(e,t){let n=this.getLocalState();null!==n&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}let eM=(e,t,n)=>{let r=[];for(let n=0;n<t.length;n++){let i=t[n];if(e.states.has(i)){if(e.states.delete(i),i===e.clientID){let t=e.meta.get(i);e.meta.set(i,{clock:t.clock+1,lastUpdated:eD()})}r.push(i)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},eI=(e,t,n=e.states)=>{let r=t.length,i=ec();ed(i,r);for(let s=0;s<r;s++){let r=t[s],o=n.get(r)||null,a=e.meta.get(r).clock;ed(i,r),ed(i,a),eg(i,JSON.stringify(o))}return eu(i)};class ej{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){let n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){let n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}(_=T||(T={}))[_.Sync=0]="Sync",_[_.Awareness=1]="Awareness",_[_.Auth=2]="Auth",_[_.QueryAwareness=3]="QueryAwareness",_[_.Stateless=5]="Stateless",_[_.CLOSE=7]="CLOSE",_[_.SyncStatus=8]="SyncStatus",(E=A||(A={})).Connecting="connecting",E.Connected="connected",E.Disconnected="disconnected";class eN{constructor(e){this.data=e,this.encoder=ec(),this.decoder=ev(new Uint8Array(this.data))}peekVarString(){var e;let t,n;return t=(e=this.decoder).pos,n=eS(e),e.pos=t,n}readVarUint(){return eC(this.decoder)}readVarString(){return eS(this.decoder)}readVarUint8Array(){return e_(this.decoder)}writeVarUint(e){return ed(this.encoder,e)}writeVarString(e){return eg(this.encoder,e)}writeVarUint8Array(e){return ey(this.encoder,e)}length(){return el(this.encoder)}}class eU extends ej{constructor(e){if(super(),this.messageQueue=[],this.configuration={url:"",document:void 0,WebSocketPolyfill:void 0,parameters:{},connect:!0,broadcast:!0,forceSyncInterval:!1,messageReconnectTimeout:3e4,delay:1e3,initialDelay:0,factor:2,maxAttempts:0,minDelay:1e3,maxDelay:3e4,jitter:!0,timeout:0,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,quiet:!1,providerMap:new Map},this.webSocket=null,this.webSocketHandlers={},this.shouldConnect=!0,this.status=A.Disconnected,this.lastMessageReceived=0,this.identifier=0,this.intervals={forceSync:null,connectionChecker:null},this.connectionAttempt=null,this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.closeTries=0,this.setConfiguration(e),this.configuration.WebSocketPolyfill=e.WebSocketPolyfill?e.WebSocketPolyfill:WebSocket,this.on("open",this.configuration.onOpen),this.on("open",this.onOpen.bind(this)),this.on("connect",this.configuration.onConnect),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("status",this.configuration.onStatus),this.on("status",this.onStatus.bind(this)),this.on("disconnect",this.configuration.onDisconnect),this.on("close",this.configuration.onClose),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("close",this.onClose.bind(this)),this.on("message",this.onMessage.bind(this)),this.intervals.connectionChecker=setInterval(this.checkConnection.bind(this),this.configuration.messageReconnectTimeout/10),void 0!==e.connect&&(this.shouldConnect=e.connect),!this.shouldConnect)return;this.connect()}async onOpen(e){this.receivedOnOpenPayload=e}async onStatus(e){this.receivedOnStatusPayload=e}attach(e){let t;return this.configuration.providerMap.set(e.configuration.name,e),this.status===A.Disconnected&&this.shouldConnect&&(t=this.connect()),this.receivedOnOpenPayload&&e.onOpen(this.receivedOnOpenPayload),this.receivedOnStatusPayload&&e.onStatus(this.receivedOnStatusPayload),t}detach(e){this.configuration.providerMap.delete(e.configuration.name)}setConfiguration(e={}){this.configuration={...this.configuration,...e}}async connect(){let e;if(this.status===A.Connected)return;this.cancelWebsocketRetry&&(this.cancelWebsocketRetry(),this.cancelWebsocketRetry=void 0),this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.shouldConnect=!0;let{retryPromise:t,cancelFunc:n}=(e=!1,{retryPromise:P(this.createWebSocketConnection.bind(this),{delay:this.configuration.delay,initialDelay:this.configuration.initialDelay,factor:this.configuration.factor,maxAttempts:this.configuration.maxAttempts,minDelay:this.configuration.minDelay,maxDelay:this.configuration.maxDelay,jitter:this.configuration.jitter,timeout:this.configuration.timeout,beforeAttempt:t=>{(!this.shouldConnect||e)&&t.abort()}}).catch(e=>{if(e&&"ATTEMPT_ABORTED"!==e.code)throw e}),cancelFunc:()=>{e=!0}});return this.cancelWebsocketRetry=n,t}attachWebSocketListeners(e,t){let{identifier:n}=e,r=e=>this.emit("message",e),i=e=>this.emit("close",{event:e}),s=e=>this.emit("open",e);this.webSocketHandlers[n]={message:r,close:i,open:s,error:e=>{t(e)}};let o=this.webSocketHandlers[e.identifier];Object.keys(o).forEach(t=>{e.addEventListener(t,o[t])})}cleanupWebSocket(){if(!this.webSocket)return;let{identifier:e}=this.webSocket,t=this.webSocketHandlers[e];Object.keys(t).forEach(n=>{var r;null==(r=this.webSocket)||r.removeEventListener(n,t[n]),delete this.webSocketHandlers[e]}),this.webSocket.close(),this.webSocket=null}createWebSocketConnection(){return new Promise((e,t)=>{this.webSocket&&(this.messageQueue=[],this.cleanupWebSocket()),this.lastMessageReceived=0,this.identifier+=1;let n=new this.configuration.WebSocketPolyfill(this.url);n.binaryType="arraybuffer",n.identifier=this.identifier,this.attachWebSocketListeners(n,t),this.webSocket=n,this.status=A.Connecting,this.emit("status",{status:A.Connecting}),this.connectionAttempt={resolve:e,reject:t}})}onMessage(e){var t;this.resolveConnectionAttempt(),this.lastMessageReceived=eD();let n=new eN(e.data).peekVarString();null==(t=this.configuration.providerMap.get(n))||t.onMessage(e)}resolveConnectionAttempt(){this.connectionAttempt&&(this.connectionAttempt.resolve(),this.connectionAttempt=null,this.status=A.Connected,this.emit("status",{status:A.Connected}),this.emit("connect"),this.messageQueue.forEach(e=>this.send(e)),this.messageQueue=[])}stopConnectionAttempt(){this.connectionAttempt=null}rejectConnectionAttempt(){var e;null==(e=this.connectionAttempt)||e.reject(),this.connectionAttempt=null}checkConnection(){var e;this.status!==A.Connected||!this.lastMessageReceived||this.configuration.messageReconnectTimeout>=eD()-this.lastMessageReceived||(this.closeTries+=1,this.closeTries>2?(this.onClose({event:{code:4408,reason:"forced"}}),this.closeTries=0):(null==(e=this.webSocket)||e.close(),this.messageQueue=[]))}get serverUrl(){for(;"/"===this.configuration.url[this.configuration.url.length-1];)return this.configuration.url.slice(0,this.configuration.url.length-1);return this.configuration.url}get url(){let e=((e,t)=>{let n=[];for(let r in e)n.push(t(e[r],r));return n})(this.configuration.parameters,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&");return`${this.serverUrl}${0===e.length?"":`?${e}`}`}disconnect(){if(this.shouldConnect=!1,null!==this.webSocket)try{this.webSocket.close(),this.messageQueue=[]}catch{}}send(e){var t;(null==(t=this.webSocket)?void 0:t.readyState)===k.Open?this.webSocket.send(e):this.messageQueue.push(e)}onClose({event:e}){(this.closeTries=0,this.cleanupWebSocket(),this.status===A.Connected&&(this.status=A.Disconnected,this.emit("status",{status:A.Disconnected}),this.emit("disconnect",{event:e})),4401===e.code&&("Unauthorized"===e.reason?console.warn("[HocuspocusProvider] An authentication token is required, but you didnt send one. Try adding a `token` to your HocuspocusProvider configuration. Wont try again."):console.warn(`[HocuspocusProvider] Connection closed with status Unauthorized: ${e.reason}`),this.shouldConnect=!1),4403!==e.code||this.configuration.quiet)?(1009===e.code&&(console.warn(`[HocuspocusProvider] Connection closed with status MessageTooBig: ${e.reason}`),this.shouldConnect=!1),this.connectionAttempt?this.rejectConnectionAttempt():this.shouldConnect&&this.connect(),this.shouldConnect||this.status!==A.Disconnected&&(this.status=A.Disconnected,this.emit("status",{status:A.Disconnected}),this.emit("disconnect",{event:e}))):console.warn("[HocuspocusProvider] The provided authentication token isnt allowed to connect to this server. Will try again.")}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),clearInterval(this.intervals.connectionChecker),this.stopConnectionAttempt(),this.disconnect(),this.removeAllListeners(),this.cleanupWebSocket()}}let eF=(e,t,n)=>{ed(e,1),ey(e,x.PR(t,n))};class eB{constructor(){this.encoder=ec()}get(e){return e.encoder}toUint8Array(){return eu(this.encoder)}}class eW{constructor(e){this.broadcasted=!1,this.message=e}setBroadcasted(e){return this.broadcasted=e,this}apply(e,t){let{message:n}=this,r=n.readVarUint(),i=n.length();switch(r){case T.Sync:this.applySyncMessage(e,t);break;case T.Awareness:this.applyAwarenessMessage(e);break;case T.Auth:this.applyAuthMessage(e);break;case T.QueryAwareness:this.applyQueryAwarenessMessage(e);break;case T.Stateless:e.receiveStateless(eS(n.decoder));break;case T.SyncStatus:this.applySyncStatusMessage(e,1===(e=>{let t=e.arr[e.pos++],n=63&t,r=64,i=(64&t)>0?-1:1;if((128&t)==0)return i*n;let s=e.arr.length;for(;e.pos<s;){if(n+=(127&(t=e.arr[e.pos++]))*r,r*=128,t<128)return i*n;if(n>eo)throw em}throw eb})(n.decoder));break;default:throw Error(`Cant apply message of unknown type: ${r}`)}n.length()>i+1&&(this.broadcasted?e.broadcast(eB,{encoder:n.encoder}):e.send(eB,{encoder:n.encoder}))}applySyncMessage(e,t){let{message:n}=this;n.writeVarUint(T.Sync);let r=((e,t,n,r)=>{let i=eC(e);switch(i){case 0:eF(t,n,e_(e));break;case 1:case 2:var s=e,o=n,a=r;try{x.QE(o,e_(s),a)}catch(e){console.error("Caught error while handling a Yjs update",e)}break;default:throw Error("Unknown message type")}return i})(n.decoder,n.encoder,e.document,e);t&&1===r&&(e.synced=!0)}applySyncStatusMessage(e,t){t&&e.decrementUnsyncedChanges()}applyAwarenessMessage(e){if(!e.awareness)return;let{message:t}=this;((e,t,n)=>{let r=ev(t),i=eD(),s=[],o=[],a=[],c=[],l=eC(r);for(let t=0;t<l;t++){let t=eC(r),n=eC(r),l=JSON.parse(eS(r)),u=e.meta.get(t),h=e.states.get(t),d=void 0===u?0:u.clock;(d<n||d===n&&null===l&&e.states.has(t))&&(null===l?t===e.clientID&&null!=e.getLocalState()?n++:e.states.delete(t):e.states.set(t,l),e.meta.set(t,{clock:n,lastUpdated:i}),void 0===u&&null!==l?s.push(t):void 0!==u&&null===l?c.push(t):null!==l&&(X(l,h)||a.push(t),o.push(t)))}(s.length>0||a.length>0||c.length>0)&&e.emit("change",[{added:s,updated:a,removed:c},n]),(s.length>0||o.length>0||c.length>0)&&e.emit("update",[{added:s,updated:o,removed:c},n])})(e.awareness,t.readVarUint8Array(),e)}applyAuthMessage(e){let{message:t}=this;((e,t,n)=>{switch(m(e)){case R.PermissionDenied:t(w(e));break;case R.Authenticated:n(w(e))}})(t.decoder,e.permissionDeniedHandler.bind(e),e.authenticatedHandler.bind(e))}applyQueryAwarenessMessage(e){if(!e.awareness)return;let{message:t}=this;t.writeVarUint(T.Awareness),t.writeVarUint8Array(eI(e.awareness,Array.from(e.awareness.getStates().keys())))}}class eq{constructor(e,t={}){this.message=new e,this.encoder=this.message.get(t)}create(){return eu(this.encoder)}send(e){null==e||e.send(this.create())}broadcast(e){((e,t,n=null)=>{let r=eO(e);r.bc.postMessage(t),r.subs.forEach(e=>e(t,n))})(e,this.create())}}class eH extends eB{constructor(){super(...arguments),this.type=T.Auth,this.description="Authentication"}get(e){var t,n;if(void 0===e.token)throw Error("The authentication message requires `token` as an argument.");return eg(this.encoder,e.documentName),ed(this.encoder,this.type),t=this.encoder,n=e.token,u(t,R.Token),f(t,n),this.encoder}}class ez extends eB{constructor(){super(...arguments),this.type=T.Awareness,this.description="Awareness states update"}get(e){let t;if(void 0===e.awareness)throw Error("The awareness message requires awareness as an argument");if(void 0===e.clients)throw Error("The awareness message requires clients as an argument");return eg(this.encoder,e.documentName),ed(this.encoder,this.type),t=void 0===e.states?eI(e.awareness,e.clients):eI(e.awareness,e.clients,e.states),ey(this.encoder,t),this.encoder}}class eY extends eB{constructor(){super(...arguments),this.type=T.CLOSE,this.description="Ask the server to close the connection"}get(e){return eg(this.encoder,e.documentName),ed(this.encoder,this.type),this.encoder}}class eV extends eB{constructor(){super(...arguments),this.type=T.QueryAwareness,this.description="Queries awareness states"}get(e){return eg(this.encoder,e.documentName),ed(this.encoder,this.type),this.encoder}}class e$ extends eB{constructor(){super(...arguments),this.type=T.Stateless,this.description="A stateless message"}get(e){var t;return eg(this.encoder,e.documentName),ed(this.encoder,this.type),eg(this.encoder,null!=(t=e.payload)?t:""),this.encoder}}class eQ extends eB{constructor(){super(...arguments),this.type=T.Sync,this.description="First sync step"}get(e){var t,n;if(void 0===e.document)throw Error("The sync step one message requires document as an argument");return eg(this.encoder,e.documentName),ed(this.encoder,this.type),t=this.encoder,n=e.document,ed(t,0),ey(t,x.FX(n)),this.encoder}}class eG extends eB{constructor(){super(...arguments),this.type=T.Sync,this.description="Second sync step"}get(e){if(void 0===e.document)throw Error("The sync step two message requires document as an argument");return eg(this.encoder,e.documentName),ed(this.encoder,this.type),eF(this.encoder,e.document),this.encoder}}class eK extends eB{constructor(){super(...arguments),this.type=T.Sync,this.description="A document update"}get(e){var t,n;return eg(this.encoder,e.documentName),ed(this.encoder,this.type),t=this.encoder,n=e.update,ed(t,2),ey(t,n),this.encoder}}class eJ extends Error{constructor(){super(...arguments),this.code=1001}}class eZ extends ej{constructor(e){var t,n,r;super(),this.configuration={name:"",document:void 0,awareness:void 0,token:null,parameters:{},broadcast:!0,forceSyncInterval:!1,onAuthenticated:()=>null,onAuthenticationFailed:()=>null,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onSynced:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,onStateless:()=>null,quiet:!1,connect:!0,preserveConnection:!0},this.subscribedToBroadcastChannel=!1,this.isSynced=!1,this.unsyncedChanges=0,this.status=A.Disconnected,this.isAuthenticated=!1,this.authorizedScope=void 0,this.mux=(()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}})(),this.intervals={forceSync:null},this.isConnected=!0,this.boundDocumentUpdateHandler=this.documentUpdateHandler.bind(this),this.boundAwarenessUpdateHandler=this.awarenessUpdateHandler.bind(this),this.boundBroadcastChannelSubscriber=this.broadcastChannelSubscriber.bind(this),this.boundPageHide=this.pageHide.bind(this),this.boundOnOpen=this.onOpen.bind(this),this.boundOnClose=this.onClose.bind(this),this.boundOnStatus=this.onStatus.bind(this),this.forwardConnect=e=>this.emit("connect",e),this.forwardOpen=e=>this.emit("open",e),this.forwardClose=e=>this.emit("close",e),this.forwardDisconnect=e=>this.emit("disconnect",e),this.forwardDestroy=e=>this.emit("destroy",e),this.setConfiguration(e),this.configuration.document=e.document?e.document:new x.JA,this.configuration.awareness=void 0!==e.awareness?e.awareness:new eL(this.document),this.on("open",this.configuration.onOpen),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("synced",this.configuration.onSynced),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("stateless",this.configuration.onStateless),this.on("authenticated",this.configuration.onAuthenticated),this.on("authenticationFailed",this.configuration.onAuthenticationFailed),this.configuration.websocketProvider.on("connect",this.configuration.onConnect),this.configuration.websocketProvider.on("connect",this.forwardConnect),this.configuration.websocketProvider.on("open",this.boundOnOpen),this.configuration.websocketProvider.on("open",this.forwardOpen),this.configuration.websocketProvider.on("close",this.boundOnClose),this.configuration.websocketProvider.on("close",this.configuration.onClose),this.configuration.websocketProvider.on("close",this.forwardClose),this.configuration.websocketProvider.on("status",this.boundOnStatus),this.configuration.websocketProvider.on("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.on("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.on("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.on("destroy",this.forwardDestroy),null==(t=this.awareness)||t.on("update",()=>{this.emit("awarenessUpdate",{states:v(this.awareness.getStates())})}),null==(n=this.awareness)||n.on("change",()=>{this.emit("awarenessChange",{states:v(this.awareness.getStates())})}),this.document.on("update",this.boundDocumentUpdateHandler),null==(r=this.awareness)||r.on("update",this.boundAwarenessUpdateHandler),this.registerEventListeners(),this.configuration.forceSyncInterval&&"number"==typeof this.configuration.forceSyncInterval&&(this.intervals.forceSync=setInterval(this.forceSync.bind(this),this.configuration.forceSyncInterval)),this.configuration.websocketProvider.attach(this)}onStatus({status:e}){this.status=e,this.configuration.onStatus({status:e}),this.emit("status",{status:e})}setConfiguration(e={}){!e.websocketProvider&&e.url&&(this.configuration.websocketProvider=new eU({url:e.url,connect:e.connect,parameters:e.parameters})),this.configuration={...this.configuration,...e}}get document(){return this.configuration.document}get awareness(){return this.configuration.awareness}get hasUnsyncedChanges(){return this.unsyncedChanges>0}resetUnsyncedChanges(){this.unsyncedChanges=1,this.emit("unsyncedChanges",this.unsyncedChanges)}incrementUnsyncedChanges(){this.unsyncedChanges+=1,this.emit("unsyncedChanges",this.unsyncedChanges)}decrementUnsyncedChanges(){this.unsyncedChanges-=1,0===this.unsyncedChanges&&(this.synced=!0),this.emit("unsyncedChanges",this.unsyncedChanges)}forceSync(){this.resetUnsyncedChanges(),this.send(eQ,{document:this.document,documentName:this.configuration.name})}pageHide(){this.awareness&&eM(this.awareness,[this.document.clientID],"page hide")}registerEventListeners(){"u">typeof window&&"addEventListener"in window&&window.addEventListener("pagehide",this.boundPageHide)}sendStateless(e){this.send(e$,{documentName:this.configuration.name,payload:e})}documentUpdateHandler(e,t){t!==this&&(this.incrementUnsyncedChanges(),this.send(eK,{update:e,documentName:this.configuration.name},!0))}awarenessUpdateHandler({added:e,updated:t,removed:n},r){let i=e.concat(t).concat(n);this.send(ez,{awareness:this.awareness,clients:i,documentName:this.configuration.name},!0)}get synced(){return this.isSynced}set synced(e){this.isSynced!==e&&(this.isSynced=e,this.emit("synced",{state:e}),this.emit("sync",{state:e}))}receiveStateless(e){this.emit("stateless",{payload:e})}get isAuthenticationRequired(){return!!this.configuration.token&&!this.isAuthenticated}async connect(){return this.configuration.broadcast&&this.subscribeToBroadcastChannel(),this.configuration.websocketProvider.shouldConnect=!0,this.configuration.websocketProvider.attach(this)}disconnect(){this.disconnectBroadcastChannel(),this.configuration.websocketProvider.detach(this),this.isConnected=!1,this.configuration.preserveConnection||this.configuration.websocketProvider.disconnect()}async onOpen(e){let t;this.isAuthenticated=!1,this.isConnected=!0,this.emit("open",{event:e});try{t=await this.getToken()}catch(e){this.permissionDeniedHandler(`Failed to get token: ${e}`);return}this.isAuthenticationRequired&&this.send(eH,{token:t,documentName:this.configuration.name}),this.startSync()}async getToken(){return"function"==typeof this.configuration.token?await this.configuration.token():this.configuration.token}startSync(){this.resetUnsyncedChanges(),this.send(eQ,{document:this.document,documentName:this.configuration.name}),this.awareness&&null!==this.awareness.getLocalState()&&this.send(ez,{awareness:this.awareness,clients:[this.document.clientID],documentName:this.configuration.name})}send(e,t,n=!1){if(!this.isConnected)return;n&&this.mux(()=>{this.broadcast(e,t)});let r=new eq(e,t);this.emit("outgoingMessage",{message:r.message}),r.send(this.configuration.websocketProvider)}onMessage(e){let t=new eN(e.data),n=t.readVarString();t.writeVarString(n),this.emit("message",{event:e,message:new eN(e.data)}),new eW(t).apply(this,!0)}onClose(e){this.isAuthenticated=!1,this.synced=!1,this.awareness&&eM(this.awareness,Array.from(this.awareness.getStates().keys()).filter(e=>e!==this.document.clientID),this)}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),this.awareness&&(eM(this.awareness,[this.document.clientID],"provider destroy"),this.awareness.off("update",this.boundAwarenessUpdateHandler),this.awareness.destroy()),this.document.off("update",this.boundDocumentUpdateHandler),this.removeAllListeners(),this.configuration.websocketProvider.off("connect",this.configuration.onConnect),this.configuration.websocketProvider.off("connect",this.forwardConnect),this.configuration.websocketProvider.off("open",this.boundOnOpen),this.configuration.websocketProvider.off("open",this.forwardOpen),this.configuration.websocketProvider.off("close",this.boundOnClose),this.configuration.websocketProvider.off("close",this.configuration.onClose),this.configuration.websocketProvider.off("close",this.forwardClose),this.configuration.websocketProvider.off("status",this.boundOnStatus),this.configuration.websocketProvider.off("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.off("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.off("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.off("destroy",this.forwardDestroy),this.send(eY,{documentName:this.configuration.name}),this.disconnect(),"u">typeof window&&"removeEventListener"in window&&window.removeEventListener("pagehide",this.boundPageHide)}permissionDeniedHandler(e){this.emit("authenticationFailed",{reason:e}),this.isAuthenticated=!1,this.disconnect(),this.status=A.Disconnected}authenticatedHandler(e){this.isAuthenticated=!0,this.authorizedScope=e,this.emit("authenticated")}get broadcastChannel(){return`${this.configuration.name}`}broadcastChannelSubscriber(e){this.mux(()=>{let t=new eN(e),n=t.readVarString();t.writeVarString(n),new eW(t).setBroadcasted(!0).apply(this,!1)})}subscribeToBroadcastChannel(){if(!this.subscribedToBroadcastChannel){var e,t;e=this.broadcastChannel,t=this.boundBroadcastChannelSubscriber,eO(e).subs.add(t),this.subscribedToBroadcastChannel=!0}this.mux(()=>{this.broadcast(eQ,{document:this.document,documentName:this.configuration.name}),this.broadcast(eG,{document:this.document,documentName:this.configuration.name}),this.broadcast(eV,{document:this.document,documentName:this.configuration.name}),this.awareness&&this.broadcast(ez,{awareness:this.awareness,clients:[this.document.clientID],document:this.document,documentName:this.configuration.name})})}disconnectBroadcastChannel(){if(this.awareness&&this.send(ez,{awareness:this.awareness,clients:[this.document.clientID],states:new Map,documentName:this.configuration.name},!0),this.subscribedToBroadcastChannel){var e,t;let n;e=this.broadcastChannel,t=this.boundBroadcastChannelSubscriber,(n=eO(e)).subs.delete(t)&&0===n.subs.size&&(n.bc.close(),eT.delete(e)),this.subscribedToBroadcastChannel=!1}}broadcast(e,t){!this.configuration.broadcast||this.subscribedToBroadcastChannel&&new eq(e,t).broadcast(this.broadcastChannel)}setAwarenessField(e,t){if(!this.awareness)throw new eJ(`Cannot set awareness field "${e}" to ${JSON.stringify(t)}. You have disabled Awareness for this provider by explicitly passing awareness: null in the provider configuration.`);this.awareness.setLocalStateField(e,t)}}crypto.getRandomValues.bind(crypto)},89075:(e,t,n)=>{"use strict";n.d(t,{W:()=>o,c:()=>a});var r=n(6936),i=n(30950),s=n(49911);class o{constructor(){this._observers=r.vt()}on(e,t){return r._4(this._observers,e,i.vt).add(t),t}once(e,t){let n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){let n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return s.HT((this._observers.get(e)||r.vt()).values()).forEach(e=>e(...t))}destroy(){this._observers=r.vt()}}class a{constructor(){this._observers=r.vt()}on(e,t){r._4(this._observers,e,i.vt).add(t)}once(e,t){let n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){let n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return s.HT((this._observers.get(e)||r.vt()).values()).forEach(e=>e(...t))}destroy(){this._observers=r.vt()}}},91932:(e,t,n)=>{"use strict";var r=n(7620),i=n(63108),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,a=r.useRef,c=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;var f=o(e,(h=l(function(){function e(e){if(!c){if(c=!0,o=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(o=e,t):(o=e,a=n)}var o,a,c=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,i]))[0],h[1]);return c(function(){d.hasValue=!0,d.value=f},[f]),u(f),f}},96407:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,a:()=>i});let r=Symbol("Equality"),i=(e,t)=>e===t||!!e?.[r]?.(t)}}]);