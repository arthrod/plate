"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26529],{26529:(e,t,s)=>{s.r(t),s.d(t,{MarkdownJoiner:()=>d,markdownJoinerTransform:()=>f});var i=s(99019),r=s(5147);let f=()=>()=>{let e,t=new d,s=!1;return new TransformStream({async flush(i){if(!s){let s=t.flush();s&&e&&i.enqueue({id:e,text:s,type:"text-delta"})}},async transform(f,n){if("text-delta"===f.type){e=f.id;let s=t.processText(f.text);s&&(n.enqueue((0,r._)((0,i._)({},f),{text:s})),await b(t.delayInMs))}else if("text-end"===f.type){let i=t.flush();i&&e&&n.enqueue({id:e,text:i,type:"text-delta"}),s=!0,n.enqueue(f)}else n.enqueue(f)}})},n=/\*\*.*?\*\*/,u=/```[^\s]+/,h=/^\[.*?\]\(.*?\)$/,a=/^[*-]\s+.+/,l=/^[*-]\s+\[[ xX]\]\s+.+/,o=/^\d+\.\s+.+/,c=/<([A-Za-z][A-Za-z0-9\-_]*)>/,m=/^[0-9]$/;class d{clearBuffer(){this.buffer="",this.isBuffering=!1}isCompleteBold(){return n.test(this.buffer)}isCompleteCodeBlockEnd(){return"```"===this.buffer.trimEnd()}isCompleteCodeBlockStart(){return u.test(this.buffer)}isCompleteLink(){return h.test(this.buffer)}isCompleteList(){return a.test(this.buffer)&&this.buffer.includes("[")?l.test(this.buffer):a.test(this.buffer)||o.test(this.buffer)||l.test(this.buffer)}isCompleteMdxTag(){return c.test(this.buffer)}isCompleteTableStart(){return this.buffer.startsWith("|")&&this.buffer.endsWith("|")}isFalsePositive(e){return!(this.buffer.startsWith("[")&&this.buffer.includes("http"))&&("\n"===e||this.buffer.length>30)}isLargeDocumentStart(){return this.documentCharacterCount>2500}isListStartChar(e){return"-"===e||"*"===e||m.test(e)}isTableExisted(){return this.buffer.length>10&&!this.buffer.includes("|")}flush(){let e=this.buffer;return this.clearBuffer(),e}processText(e){let t="";for(let s of e)if(this.streamingCodeBlock||this.streamingTable||this.streamingLargeDocument)this.buffer+=s,"\n"===s&&(t+=this.buffer,this.clearBuffer()),this.isCompleteCodeBlockEnd()&&this.streamingCodeBlock&&(this.streamingCodeBlock=!1,this.delayInMs=10,t+=this.buffer,this.clearBuffer()),this.isTableExisted()&&this.streamingTable&&(this.streamingTable=!1,this.delayInMs=10,t+=this.buffer,this.clearBuffer());else if(this.isBuffering){if(this.buffer+=s,this.isCompleteCodeBlockStart()){this.delayInMs=100,this.streamingCodeBlock=!0;continue}if(this.isCompleteTableStart()){this.delayInMs=100,this.streamingTable=!0;continue}if(this.isLargeDocumentStart()){this.delayInMs=100,this.streamingLargeDocument=!0;continue}this.isCompleteBold()||this.isCompleteMdxTag()||this.isCompleteList()||this.isCompleteLink()?(t+=this.buffer,this.clearBuffer()):this.isFalsePositive(s)&&(t+=this.buffer,this.clearBuffer())}else"*"===s||"<"===s||"`"===s||"|"===s||"["===s||this.isListStartChar(s)?(this.buffer=s,this.isBuffering=!0):t+=s;return this.documentCharacterCount+=e.length,t}constructor(){this.delayInMs=10,this.buffer="",this.documentCharacterCount=0,this.isBuffering=!1,this.streamingCodeBlock=!1,this.streamingLargeDocument=!1,this.streamingTable=!1}}async function b(e){return null==e?Promise.resolve():new Promise(t=>setTimeout(t,e))}}}]);