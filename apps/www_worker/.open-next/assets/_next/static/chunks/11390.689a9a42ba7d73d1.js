(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11390],{48390:(e,t)=>{"use strict";t.k=void 0,t.k=function(e,t){void 0===t&&(t={listUnicodeChar:""}),(t=t||{}).listUnicodeChar=!!t.hasOwnProperty("listUnicodeChar")&&t.listUnicodeChar,t.stripListLeaders=!t.hasOwnProperty("stripListLeaders")||t.stripListLeaders,t.gfm=!t.hasOwnProperty("gfm")||t.gfm,t.useImgAltText=!t.hasOwnProperty("useImgAltText")||t.useImgAltText,t.preserveLinks=!!t.hasOwnProperty("preserveLinks")&&t.preserveLinks;var r=e||"";r=r.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm,"");try{t.stripListLeaders&&(r=t.listUnicodeChar?r.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,t.listUnicodeChar+" $1"):r.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,"$1")),t.gfm&&(r=r.replace(/\n={2,}/g,"\n").replace(/~{3}.*\n/g,"").replace(/~~/g,"").replace(/`{3}.*\n/g,"")),t.preserveLinks&&(r=r.replace(/\[(.*?)\][\[\(](.*?)[\]\)]/g,"$1 ($2)")),r=r.replace(/<[^>]*>/g,"").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g,t.useImgAltText?"$1":"").replace(/\[(.*?)\][\[\(].*?[\]\)]/g,"$1").replace(/^\s{0,3}>\s?/g,"").replace(/(^|\n)\s{0,3}>\s?/g,"\n\n").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm,"$1$2$3").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/`(.+?)`/g,"$1").replace(/\n{2,}/g,"\n\n")}catch(t){return console.error(t),e}return r}},58477:(e,t,r)=>{"use strict";r.r(t),r.d(t,{parseMermaidToExcalidraw:()=>z});let a={rect:"rectangle",circle:"ellipse"},n={startOnLoad:!1,flowchart:{curve:"linear"},themeVariables:{fontSize:"25px"},maxEdges:500,maxTextSize:5e4};class o{constructor({converter:e}){this.convert=(e,t)=>this.converter(e,{...t,fontSize:t.fontSize||20}),this.converter=e}}(i=s||(s={})).ROUND="round",i.STADIUM="stadium",i.DOUBLECIRCLE="doublecircle",i.CIRCLE="circle",i.DIAMOND="diamond",(c||(c={})).COLOR="color",(l=d||(d={})).FILL="fill",l.STROKE="stroke",l.STROKE_WIDTH="stroke-width",l.STROKE_DASHARRAY="stroke-dasharray";var i,l,s,c,d,u=r(48390);let p={arrow_circle:{endArrowhead:"dot"},arrow_cross:{endArrowhead:"bar"},arrow_open:{endArrowhead:null,startArrowhead:null},double_arrow_circle:{endArrowhead:"dot",startArrowhead:"dot"},double_arrow_cross:{endArrowhead:"bar",startArrowhead:"bar"},double_arrow_point:{endArrowhead:"arrow",startArrowhead:"arrow"}},h=e=>{let t=e.text;return"markdown"===e.labelType&&(t=(0,u.k)(e.text)),m(t)},m=e=>e.replace(/\s?(fa|fab):[a-zA-Z0-9-]+/g,""),f=new o({converter:(e,t)=>{let r,a,n=[],o=t.fontSize,{getGroupIds:i,getParentId:l}=(r={},e.subGraphs.map(t=>{t.nodeIds.forEach(a=>{r[t.id]={id:t.id,parent:null,isLeaf:!1},r[a]={id:a,parent:t.id,isLeaf:void 0!==e.vertices[a]}})}),a={},[...Object.keys(e.vertices),...e.subGraphs.map(e=>e.id)].forEach(e=>{if(!r[e])return;let t=r[e],n=[];for(t.isLeaf||n.push(`subgraph_group_${t.id}`);;)if(t.parent)n.push(`subgraph_group_${t.parent}`),t=r[t.parent];else break;a[e]=n}),{getGroupIds:e=>a[e]||[],getParentId:e=>r[e]?r[e].parent:null});return e.subGraphs.reverse().forEach(e=>{let t=i(e.id),r={id:e.id,type:"rectangle",groupIds:t,x:e.x,y:e.y,width:e.width,height:e.height,label:{groupIds:t,text:h(e),fontSize:o,verticalAlign:"top"}};n.push(r)}),Object.values(e.vertices).forEach(e=>{var t,r;let a,l;if(!e)return;let u=i(e.id),p=(t=e.containerStyle,a={},Object.keys(t).forEach(e=>{switch(e){case d.FILL:a.backgroundColor=t[e],a.fillStyle="solid";break;case d.STROKE:a.strokeColor=t[e];break;case d.STROKE_WIDTH:a.strokeWidth=Number(t[e]?.split("px")[0]);break;case d.STROKE_DASHARRAY:a.strokeStyle="dashed"}}),a),m=(r=e.labelStyle,l={},Object.keys(r).forEach(e=>{e===c.COLOR&&(l.strokeColor=r[e])}),l),f={id:e.id,type:"rectangle",groupIds:u,x:e.x,y:e.y,width:e.width,height:e.height,strokeWidth:2,label:{groupIds:u,text:h(e),fontSize:o,...m},link:e.link||null,...p};switch(e.type){case s.STADIUM:case s.ROUND:f={...f,roundness:{type:3}};break;case s.DOUBLECIRCLE:{u.push(`doublecircle_${e.id}}`);let t={type:"ellipse",groupIds:u,x:e.x+5,y:e.y+5,width:e.width-10,height:e.height-10,strokeWidth:2,roundness:{type:3},label:{groupIds:u,text:h(e),fontSize:o}};f={...f,groupIds:u,type:"ellipse"},n.push(t);break}case s.CIRCLE:f.type="ellipse";break;case s.DIAMOND:f.type="diamond"}n.push(f)}),e.edges.forEach(e=>{let t=[],r=l(e.start),a=l(e.end);r&&r===a&&(t=i(r));let{startX:s,startY:c,reflectionPoints:d}=e,u=d.map(e=>[e.x-d[0].x,e.y-d[0].y]),m=p[e.type],f={id:`${e.start}_${e.end}`,type:"arrow",groupIds:t,x:s,y:c,strokeWidth:"thick"===e.stroke?4:2,strokeStyle:"dotted"===e.stroke?"dashed":void 0,points:u,...e.text?{label:{text:h(e),fontSize:o,groupIds:t}}:{},roundness:{type:2},...m},g=n.find(t=>t.id===e.start),y=n.find(t=>t.id===e.end);g&&y&&(f.start={id:g.id||""},f.end={id:y.id||""},n.push(f))}),{elements:n}}}),g=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),""),y=new o({converter:e=>{let t=g(),{width:r,height:a}=e;return{files:{[t]:{id:t,mimeType:e.mimeType,dataURL:e.dataURL}},elements:[{type:"image",x:0,y:0,width:r,height:a,status:"saved",fileId:t}]}}}),b=e=>{let t={type:"line",x:e.startX,y:e.startY,points:[[0,0],[e.endX-e.startX,e.endY-e.startY]],width:e.endX-e.startX,height:e.endY-e.startY,strokeStyle:e.strokeStyle||"solid",strokeColor:e.strokeColor||"#000",strokeWidth:e.strokeWidth||1};return e.groupId&&Object.assign(t,{groupIds:[e.groupId]}),e.id&&Object.assign(t,{id:e.id}),t},w=e=>{let t={type:"text",x:e.x,y:e.y,width:e.width,height:e.height,text:e.text.replace(/\\n/g,"\n")||"",fontSize:e.fontSize,verticalAlign:"middle"};return e.groupId&&Object.assign(t,{groupIds:[e.groupId]}),e.id&&Object.assign(t,{id:e.id}),t},E=e=>{let t={};"rectangle"===e.type&&"activation"===e.subtype&&(t={backgroundColor:"#e9ecef",fillStyle:"solid"});let r={id:e.id,type:e.type,x:e.x,y:e.y,width:e.width,height:e.height,label:{text:(e?.label?.text||"").replace(/\\n/g,"\n"),fontSize:e?.label?.fontSize,verticalAlign:e.label?.verticalAlign||"middle",strokeColor:e.label?.color||"#000",groupIds:e.groupId?[e.groupId]:[]},strokeStyle:e?.strokeStyle,strokeWidth:e?.strokeWidth,strokeColor:e?.strokeColor,backgroundColor:e?.bgColor,fillStyle:"solid",...t};return e.groupId&&Object.assign(r,{groupIds:[e.groupId]}),r},A=e=>{let t={type:"arrow",x:e.startX,y:e.startY,points:e.points||[[0,0],[e.endX-e.startX,e.endY-e.startY]],width:e.endX-e.startX,height:e.endY-e.startY,strokeStyle:e?.strokeStyle||"solid",endArrowhead:e?.endArrowhead||null,startArrowhead:e?.startArrowhead||null,label:{text:(e?.label?.text||"").replace(/\\n/g,"\n"),fontSize:16},roundness:{type:2},start:e.start,end:e.end};return e.groupId&&Object.assign(t,{groupIds:[e.groupId]}),t},x=new o({converter:e=>{let t=[],r=[];if(Object.values(e.nodes).forEach(e=>{e&&e.length&&e.forEach(e=>{let a;switch(e.type){case"line":a=b(e);break;case"rectangle":case"ellipse":a=E(e);break;case"text":a=w(e);break;default:throw`unknown type ${e.type}`}"rectangle"===e.type&&e?.subtype==="activation"?r.push(a):t.push(a)})}),Object.values(e.lines).forEach(e=>{e&&t.push(b(e))}),Object.values(e.arrows).forEach(e=>{e&&(t.push(A(e)),e.sequenceNumber&&t.push(E(e.sequenceNumber)))}),t.push(...r),e.loops){let{lines:r,texts:a,nodes:n}=e.loops;r.forEach(e=>{t.push(b(e))}),a.forEach(e=>{t.push(w(e))}),n.forEach(e=>{t.push(E(e))})}return e.groups&&e.groups.forEach(e=>{let{actorKeys:r,name:a}=e,n=1/0,o=1/0,i=0,l=0;if(!r.length)return;t.filter(e=>{if(e.id){let t=e.id.indexOf("-"),a=e.id.substring(0,t);return r.includes(a)}}).forEach(e=>{if(void 0===e.x||void 0===e.y||void 0===e.width||void 0===e.height)throw Error(`Actor attributes missing ${e}`);n=Math.min(n,e.x),o=Math.min(o,e.y),i=Math.max(i,e.x+e.width),l=Math.max(l,e.y+e.height)});let s=n-10,c=o-10,d=i-n+20,u=l-o+20,p=g(),h=E({type:"rectangle",x:s,y:c,width:d,height:u,bgColor:e.fill,id:p});t.unshift(h);let m=g(),f=[p];t.forEach(e=>{if("frame"!==e.type){if(void 0===e.x||void 0===e.y||void 0===e.width||void 0===e.height)throw Error(`Element attributes missing ${e}`);if(e.x>=n&&e.x+e.width<=i&&e.y>=o&&e.y+e.height<=l){let t=e.id||g();e.id||Object.assign(e,{id:t}),f.push(t)}}}),t.push({type:"frame",id:m,name:a,children:f})}),{elements:t}}}),T=new o({converter:e=>{let t=[];return Object.values(e.nodes).forEach(e=>{e&&e.length&&e.forEach(e=>{let r;switch(e.type){case"line":r=b(e);break;case"rectangle":case"ellipse":r=E(e);break;case"text":r=w(e);break;default:throw`unknown type ${e.type}`}t.push(r)})}),Object.values(e.lines).forEach(e=>{e&&t.push(b(e))}),Object.values(e.arrows).forEach(e=>{if(!e)return;let r=A(e);t.push(r)}),Object.values(e.text).forEach(e=>{let r=w(e);t.push(r)}),Object.values(e.namespaces).forEach(r=>{let a=Object.keys(r.classes),n=[...a],o=[...e.lines,...e.arrows,...e.text];a.forEach(e=>{let t=o.filter(t=>t.metadata&&t.metadata.classId===e).map(e=>e.id);t.length&&n.push(...t)});let i={type:"frame",id:g(),name:r.id,children:n};t.push(i)}),{elements:t}}});var S=r(44456);let k=e=>{let t=(e=_(e)).replace(/#(\d+);/g,"&#$1;").replace(/#([a-z]+);/g,"&$1;"),r=document.createElement("textarea");return r.innerHTML=t,r.value},N=e=>{let t=e.getAttribute("transform"),r=t?.match(/translate\(([ \d.-]+),\s*([\d.-]+)\)/),a=0,n=0;return r&&(a=Number(r[1]),n=Number(r[2])),{transformX:a,transformY:n}},_=function(e){return e.replace(/ﬂ°°/g,"#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},v=(e,t={x:0,y:0})=>{if("path"!==e.tagName.toLowerCase())throw Error(`Invalid input: Expected an HTMLElement of tag "path", got ${e.tagName}`);let r=e.getAttribute("d");if(!r)throw Error('Path element does not contain a "d" attribute');let a=r.split(/(?=[LM])/),n=a[0].substring(1).split(",").map(e=>parseFloat(e)),o=a[a.length-1].substring(1).split(",").map(e=>parseFloat(e)),i=a.map(e=>{let t=e.substring(1).split(",").map(e=>parseFloat(e));return{x:t[0],y:t[1]}}).filter((e,t,r)=>{if(0===t||t===r.length-1)return!0;if(e.x===r[t-1].x&&e.y===r[t-1].y)return!1;if(t===r.length-2&&(r[t-1].x===e.x||r[t-1].y===e.y)){let t=r[r.length-1];return Math.hypot(t.x-e.x,t.y-e.y)>20}return e.x!==r[t-1].x||e.y!==r[t-1].y}).map(e=>({x:e.x+t.x,y:e.y+t.y}));return{startX:n[0]+t.x,startY:n[1]+t.y,endX:o[0]+t.x,endY:o[1]+t.y,reflectionPoints:i}},O=(e,t)=>{if(!e)throw Error("Element not found");let r=e.parentElement?.parentElement,a=e.childNodes[0],n={x:0,y:0};if(a){let{transformX:e,transformY:t}=N(a),r=a.getBBox();n={x:Number(a.getAttribute("x"))||e+r.x||0,y:Number(a.getAttribute("y"))||t+r.y||0}}let{transformX:o,transformY:i}=N(e),l={x:o+n.x,y:i+n.y};for(;r&&r.id!==t.id;){if("root"===r.classList.value&&r.hasAttribute("transform")){let{transformX:e,transformY:t}=N(r);l.x+=e,l.y+=t}r=r.parentElement}return l},L=(e,t,r,a,n)=>{let o={};return o.type="arrow",o.startX=e,o.startY=t,o.endX=r,o.endY=a,Object.assign(o,{...n}),o},C=(e,t,r,a)=>({type:"text",x:e,y:t,text:r,width:a?.width||20,height:a?.height||20,fontSize:a?.fontSize||20,id:a?.id,groupId:a?.groupId,metadata:a?.metadata}),I=(e,t,r)=>{let a={},n=Number(e.getAttribute("x")),o=Number(e.getAttribute("y"));a.type="text",a.text=k(t),r?.id&&(a.id=r.id),r?.groupId&&(a.groupId=r.groupId);let i=e.getBBox();return a.width=i.width,a.height=i.height,a.x=n-i.width/2,a.y=o,a.fontSize=parseInt(getComputedStyle(e).fontSize),a},R=(e,t,r={})=>{let a={};a.type=t;let{label:n,subtype:o,id:i,groupId:l}=r;a.id=i,l&&(a.groupId=l),n&&(a.label={text:k(n.text),fontSize:16,verticalAlign:n?.verticalAlign});let s=e.getBBox();switch(a.x=s.x,a.y=s.y,a.width=s.width,a.height=s.height,a.subtype=o,o){case"highlight":let c=e.getAttribute("fill");c&&(a.bgColor=c);break;case"note":a.strokeStyle="dashed"}return a},D=(e,t,r,a,n,o)=>{let i={};return i.startX=t,i.startY=r,i.endX=a,o?.groupId&&(i.groupId=o.groupId),o?.id&&(i.id=o.id),i.endY=n,i.strokeColor=e.getAttribute("stroke"),i.strokeWidth=Number(e.getAttribute("stroke-width")),i.type="line",i},M={0:"SOLID",1:"DOTTED",3:"SOLID_CROSS",4:"DOTTED_CROSS",5:"SOLID_OPEN",6:"DOTTED_OPEN",24:"SOLID_POINT",25:"DOTTED_POINT"},Y=(e,t,r)=>{if(!e)throw"root node not found";let n=g(),o=Array.from(e.children),i=[];return o.forEach((e,o)=>{let l,s=`${r?.id}-${o}`;switch(e.tagName){case"line":let c=Number(e.getAttribute("x1")),d=Number(e.getAttribute("y1")),u=Number(e.getAttribute("x2")),p=Number(e.getAttribute("y2"));l=D(e,c,d,u,p,{groupId:n,id:s});break;case"text":l=I(e,t,{groupId:n,id:s});break;case"circle":l=R(e,"ellipse",{label:e.textContent?{text:e.textContent}:void 0,groupId:n,id:s});default:l=R(e,a[e.tagName],{label:e.textContent?{text:e.textContent}:void 0,groupId:n,id:s})}i.push(l)}),i},U=e=>{let t;switch(e){case 0:t="diamond_outline";break;case 2:t="diamond";break;case 1:t="triangle_outline";break;case"none":t=null;break;default:t="arrow"}return t},$=async(e,t=n)=>{let r,a,o,i,l;S.N.initialize({...n,...t});let s=await S.N.mermaidAPI.getDiagramFromText(e.replace(/style.*:\S*#.*;/g,e=>e.substring(0,e.length-1)).replace(/classDef.*:\S*#.*;/g,e=>e.substring(0,e.length-1)).replace(/#\w+;/g,e=>{let t=e.substring(1,e.length-1);return/^\+?\d+$/.test(t)?`ﬂ\xb0\xb0${t}\xb6\xdf`:`ﬂ\xb0${t}\xb6\xdf`})),{svg:c}=await S.N.render("mermaid-to-excalidraw",e),d=document.createElement("div");switch(d.setAttribute("style","opacity: 0; position: relative; z-index: -1;"),d.innerHTML=c,d.id="mermaid-diagram",document.body.appendChild(d),s.type){case"flowchart-v2":s.parse(),Object.keys(o=(a=s.parser.yy).getVertices()).forEach(e=>{o[e]=((e,t)=>{let r,a=t.querySelector(`[id*="flowchart-${e.id}-"]`);if(!a)return;a.parentElement?.tagName.toLowerCase()==="a"&&(r=a.parentElement.getAttribute("xlink:href"));let n=O(r?a.parentElement:a,t),o=a.getBBox(),i={width:o.width,height:o.height},l=a.querySelector(".label-container")?.getAttribute("style"),s=a.querySelector(".label")?.getAttribute("style"),c={};l?.split(";").forEach(e=>{if(!e)return;let t=e.split(":")[0].trim(),r=e.split(":")[1].trim();c[t]=r});let d={};return s?.split(";").forEach(e=>{if(!e)return;let t=e.split(":")[0].trim(),r=e.split(":")[1].trim();d[t]=r}),{id:e.id,labelType:e.labelType,text:k(e.text),type:e.type,link:r||void 0,...n,...i,containerStyle:c,labelStyle:d}})(o[e],d)}),i=new Map,l=a.getEdges().filter(e=>d.querySelector(`[id*="L-${e.start}-${e.end}"]`)).map(e=>{let t=`${e.start}-${e.end}`,r=i.get(t)||0;i.set(t,r+1);let a=d.querySelector(`[id*="L-${e.start}-${e.end}-${r}"]`);if(!a)throw Error("Edge element not found");let n=O(a,d),o=v(a,n);return e.length=void 0,{...e,...o,text:k(e.text)}}),r={type:"flowchart",subGraphs:a.getSubGraphs().map(e=>((e,t)=>{let r=e.nodes.map(e=>e.startsWith("flowchart-")?e.split("-")[1]:e),a=t.querySelector(`[id='${e.id}']`);if(!a)throw Error("SubGraph element not found");let n=O(a,t),o=a.getBBox(),i={width:o.width,height:o.height};return e.classes=void 0,e.dir=void 0,{...e,nodeIds:r,...n,...i,text:k(e.title)}})(e,d)),vertices:o,edges:l};break;case"sequence":r=((e,t)=>{var r;let a,n,o,i,l,s,c,d,u,p,h,m,f,g,y,b,w,E,A,x,T,S,N;e.parse();let _=e.parser.yy,v=[],O=_.getBoxes(),L=(a=Array.from(t.querySelectorAll(".rect")).filter(e=>e.parentElement?.tagName!=="g"),n=[],a.forEach(e=>{let t=R(e,"rectangle",{label:{text:""},subtype:"highlight"});n.push(t)}),n),{nodes:C,lines:U}=(r=_.getActors(),o=Array.from(t.querySelectorAll(".actor-top")),i=Array.from(t.querySelectorAll(".actor-bottom")),l=[],s=[],Object.values(r).forEach((e,t)=>{let r=o.find(t=>t.getAttribute("name")===e.name),a=i.find(t=>t.getAttribute("name")===e.name);if(!r||!a)throw"root not found";let n=e.description;if("participant"===e.type){let t=R(r,"rectangle",{id:`${e.name}-top`,label:{text:n},subtype:"actor"});if(!t)throw"Top Node element not found!";l.push([t]);let o=R(a,"rectangle",{id:`${e.name}-bottom`,label:{text:n},subtype:"actor"});l.push([o]);let i=r?.parentElement?.previousElementSibling;if(i?.tagName!=="line")throw"Line not found";let c=Number(i.getAttribute("x1"));if(!t.height)throw"Top node element height is null";let d=t.y+t.height,u=o.y,p=Number(i.getAttribute("x2")),h=D(i,c,d,p,u);s.push(h)}else if("actor"===e.type){let t=Y(r,n,{id:`${e.name}-top`});l.push(t);let o=Y(a,n,{id:`${e.name}-bottom`});l.push(o);let i=r.previousElementSibling;if(i?.tagName!=="line")throw"Line not found";let c=Number(i.getAttribute("x1")),d=Number(i.getAttribute("y1")),u=Number(i.getAttribute("x2")),p=o.find(e=>"ellipse"===e.type);if(p){let e=D(i,c,d,u,p.y);s.push(e)}}}),{nodes:l,lines:s}),$=_.getMessages(),z=(c=[],d=Array.from(t.querySelectorAll('[class*="messageLine"]')),u=Object.keys(M),p=$.filter(e=>u.includes(e.type.toString())),d.forEach((e,t)=>{let r=p[t],a=M[r.type],n=((e,t)=>{let r={};t?.label&&(r.label={text:k(t.label),fontSize:16});let a=e.tagName;if("line"===a)r.startX=Number(e.getAttribute("x1")),r.startY=Number(e.getAttribute("y1")),r.endX=Number(e.getAttribute("x2")),r.endY=Number(e.getAttribute("y2"));else if("path"===a){let t=e.getAttribute("d");if(!t)throw Error('Path element does not contain a "d" attribute');let a=t.split(/(?=[LC])/),n=a[0].substring(1).split(",").map(e=>parseFloat(e)),o=[];a.forEach(e=>{let t=e.substring(1).trim().split(" ").map(e=>{let[t,r]=e.split(",");return[parseFloat(t)-n[0],parseFloat(r)-n[1]]});o.push(...t)});let i=o[o.length-1];r.startX=n[0],r.startY=n[1],r.endX=i[0],r.endY=i[1],r.points=o}return t?.label&&(r.startY=r.startY-10,r.endY=r.endY-10),r.strokeColor=e.getAttribute("stroke"),r.strokeWidth=Number(e.getAttribute("stroke-width")),r.type="arrow",r.strokeStyle=t?.strokeStyle||"solid",r.startArrowhead=t?.startArrowhead||null,r.endArrowhead=t?.endArrowhead||null,r})(e,{label:r?.message,strokeStyle:(e=>{let t;switch(e){case 0:case 3:case 5:case 24:default:t="solid";break;case 1:case 4:case 6:case 25:t="dotted"}return t})(r.type),endArrowhead:"SOLID_OPEN"===a||"DOTTED_OPEN"===a?null:"arrow"});if(e.nextElementSibling?.classList.contains("sequenceNumber")){let t=e.nextElementSibling?.textContent;if(!t)throw Error("sequence number not present");let r={type:"rectangle",x:n.startX-10,y:n.startY-15,label:{text:t,fontSize:14},bgColor:"#e9ecef",height:30,subtype:"sequence"};Object.assign(n,{sequenceNumber:r})}c.push(n)}),c),P=(h=Array.from(t.querySelectorAll(".note")).map(e=>e.parentElement),m=$.filter(e=>2===e.type),f=[],h.forEach((e,t)=>{if(!e)return;let r=R(e.firstChild,"rectangle",{label:{text:m[t].message},subtype:"note"});f.push(r)}),f),X=(g=Array.from(t.querySelectorAll("[class*=activation]")),y=[],g.forEach(e=>{let t=R(e,"rectangle",{label:{text:""},subtype:"activation"});y.push(t)}),y),B=(b=Array.from(t.querySelectorAll(".loopLine")),w=[],E=[],A=[],b.forEach(e=>{let t=Number(e.getAttribute("x1")),r=Number(e.getAttribute("y1")),a=Number(e.getAttribute("x2")),n=Number(e.getAttribute("y2")),o=D(e,t,r,a,n);o.strokeStyle="dotted",o.strokeColor="#adb5bd",o.strokeWidth=2,w.push(o)}),x=Array.from(t.querySelectorAll(".loopText")),T=$.filter(e=>27===e.type).map(e=>e.message),x.forEach(e=>{let t=e.textContent||"",r=I(e,t),a=t.match(/\[(.*?)\]/)?.[1]||"";T.includes(a)&&(r.x+=16),E.push(r)}),S=Array.from(t?.querySelectorAll(".labelBox")),N=Array.from(t?.querySelectorAll(".labelText")),S.forEach((e,t)=>{let r=R(e,"rectangle",{label:{text:N[t]?.textContent||""}});r.strokeColor="#adb5bd",r.bgColor="#e9ecef",r.width=void 0,A.push(r)}),{lines:w,texts:E,nodes:A});return v.push(L),v.push(...C),v.push(P),v.push(X),{type:"sequence",lines:U,arrows:z,nodes:v,loops:B,groups:O}})(s,d);break;case"classDiagram":r=((e,t)=>{var r;let a,n;e.parse();let o=e.parser.yy,i=o.getDirection(),l=[],s=[],c=[],d=[],u=o.getNamespaces(),p=o.getClasses();if(Object.keys(p).length){let e,r,a,n=(e=[],r=[],a=[],Object.values(p).forEach(n=>{let{domId:o,id:i}=n,l=g(),s=t.querySelector(`[data-id=${i}]`);if(!s)throw Error(`DOM Node with id ${o} not found`);let{transformX:c,transformY:d}=N(s),u=R(s.firstChild,"rectangle",{id:i,groupId:l});u.x+=c,u.y+=d,u.metadata={classId:i},e.push(u),Array.from(s.querySelectorAll(".divider")).forEach(e=>{let t=Number(e.getAttribute("x1")),a=Number(e.getAttribute("y1")),n=Number(e.getAttribute("x2")),o=Number(e.getAttribute("y2")),s=D(e,t,a,n,o,{groupId:l,id:g()});s.startX+=c,s.startY+=d,s.endX+=c,s.endY+=d,s.metadata={classId:i},r.push(s)});let p=s.querySelector(".label")?.children;if(!p)throw"label nodes not found";Array.from(p).forEach(e=>{let t=e.textContent;if(!t)return;let r=g(),{transformX:n,transformY:o}=N(e),s=e.getBBox(),u=C(c+n,d+o+10,t,{width:s.width,height:s.height,id:r,groupId:l,metadata:{classId:i}});a.push(u)})}),{nodes:e,lines:r,text:a});l.push(n.nodes),s.push(...n.lines),c.push(...n.text),d.push(...n.nodes)}let{arrows:h,text:m}=((e,t,r,a)=>{let n=r.querySelector(".edgePaths")?.children;if(!n)throw Error("No Edges found!");let o=[],i=[];return e.forEach((e,r)=>{let l,s,c,d,u,{id1:p,id2:h,relation:m}=e,f=t.find(e=>e.id===p),g=t.find(e=>e.id===h),y=(e=>{let t;switch(e){case 0:default:t="solid";break;case 1:t="dotted"}return t})(m.lineType),b=U(m.type1),w=U(m.type2),E=v(n[r]),A=L(E.startX,E.startY,E.endX,E.endY,{strokeStyle:y,startArrowhead:b,endArrowhead:w,label:e.title?{text:e.title}:void 0,start:{type:"rectangle",id:f.id},end:{type:"rectangle",id:g.id}}),x=(c=["triangle_outline","diamond","diamond_outline"],d=A.startArrowhead&&c.includes(A.startArrowhead),((u=A.endArrowhead&&c.includes(A.endArrowhead))||d)&&(d&&("LR"===a?A.startX-=16:"RL"===a?A.startX+=16:"TB"===a?A.startY-=16:"BT"===a&&(A.startY+=16)),u&&("LR"===a?A.endX+=16:"RL"===a?A.endX-=16:"TB"===a?A.endY+=16:"BT"===a&&(A.endY-=16))),A);o.push(x);let{relationTitle1:T,relationTitle2:S}=e;if(T&&"none"!==T){switch(a){case"TB":l=x.startX-20,x.endX<x.startX&&(l-=15),s=x.startY+15;break;case"BT":l=x.startX+20,x.endX>x.startX&&(l+=15),s=x.startY-15;break;case"LR":l=x.startX+20,s=x.startY+15,x.endY>x.startY&&(s+=15);break;case"RL":l=x.startX-20,s=x.startY-15,x.startY>x.endY&&(s-=15);break;default:l=x.startX-20,s=x.startY+15}let e=C(l,s,T,{fontSize:16});i.push(e)}if(S&&"none"!==S){switch(a){case"TB":l=x.endX+20,x.endX<x.startX&&(l+=15),s=x.endY-15;break;case"BT":l=x.endX-20,x.endX>x.startX&&(l-=15),s=x.endY+15;break;case"LR":l=x.endX-20,s=x.endY-15,x.endY>x.startY&&(s-=15);break;case"RL":l=x.endX+20,s=x.endY+15,x.startY>x.endY&&(s+=15);break;default:l=x.endX+20,s=x.endY-15}let e=C(l,s,S,{fontSize:16});i.push(e)}}),{arrows:o,text:i}})(o.getRelations(),d,t,i),{notes:f,connectors:y}=(r=o.getNotes(),a=[],n=[],r.forEach(e=>{let{id:r,text:o,class:i}=e,l=t.querySelector(`#${r}`);if(!l)throw Error(`Node with id ${r} not found!`);let{transformX:s,transformY:c}=N(l),u=R(l.firstChild,"rectangle",{id:r,subtype:"note",label:{text:o}});if(Object.assign(u,{x:u.x+s,y:u.y+c}),a.push(u),i){let e=d.find(e=>e.id===i);if(!e)throw Error(`class node with id ${i} not found!`);let t=u.x+(u.width||0)/2,r=L(t,u.y+(u.height||0),t,e.y,{strokeStyle:"dotted",startArrowhead:null,endArrowhead:null,start:{id:u.id,type:"rectangle"},end:{id:e.id,type:"rectangle"}});n.push(r)}}),{notes:a,connectors:n});return l.push(f),h.push(...y),c.push(...m),{type:"class",nodes:l,lines:s,arrows:h,text:c,namespaces:u}})(s,d);break;default:r=(e=>{let t=e.querySelector("svg");if(!t)throw Error("SVG element not found");let r=t.getBoundingClientRect(),a=r.width,n=r.height;t.setAttribute("width",`${a}`),t.setAttribute("height",`${n}`);let o=btoa(unescape(encodeURIComponent(t.outerHTML)));return{type:"graphImage",mimeType:"image/svg+xml",dataURL:`data:image/svg+xml;base64,${o}`,width:a,height:n}})(d)}return d.remove(),r},z=async(e,t)=>{let r=t||{},a=parseInt(r.themeVariables?.fontSize??"")||20;return((e,t={})=>{switch(e.type){case"graphImage":return y.convert(e,t);case"flowchart":return f.convert(e,t);case"sequence":return x.convert(e,t);case"class":return T.convert(e,t);default:throw Error(`graphToExcalidraw: unknown graph type "${e.type}, only flowcharts are supported!"`)}})(await $(e,{...r,themeVariables:{...r.themeVariables,fontSize:`${1.25*a}px`}}),{fontSize:a})}},83412:function(e){e.exports=function(){"use strict";let{entries:e,setPrototypeOf:t,isFrozen:r,getPrototypeOf:a,getOwnPropertyDescriptor:n}=Object,{freeze:o,seal:i,create:l}=Object,{apply:s,construct:c}="u">typeof Reflect&&Reflect;o||(o=function(e){return e}),i||(i=function(e){return e}),s||(s=function(e,t,r){return e.apply(t,r)}),c||(c=function(e,t){return new e(...t)});let d=x(Array.prototype.forEach),u=x(Array.prototype.pop),p=x(Array.prototype.push),h=x(String.prototype.toLowerCase),m=x(String.prototype.toString),f=x(String.prototype.match),g=x(String.prototype.replace),y=x(String.prototype.indexOf),b=x(String.prototype.trim),w=x(Object.prototype.hasOwnProperty),E=x(RegExp.prototype.test),A=(W=TypeError,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return c(W,t)});function x(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return s(e,t,a)}}function T(e,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;t&&t(e,null);let o=a.length;for(;o--;){let t=a[o];if("string"==typeof t){let e=n(t);e!==t&&(r(a)||(a[o]=e),t=e)}e[t]=!0}return e}function S(t){let r=l(null);for(let[a,n]of e(t))w(t,a)&&(Array.isArray(n)?r[a]=function(e){for(let t=0;t<e.length;t++)w(e,t)||(e[t]=null);return e}(n):n&&"object"==typeof n&&n.constructor===Object?r[a]=S(n):r[a]=n);return r}function k(e,t){for(;null!==e;){let r=n(e,t);if(r){if(r.get)return x(r.get);if("function"==typeof r.value)return x(r.value)}e=a(e)}return function(){return null}}let N=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),v=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),C=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),I=o(["#text"]),R=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),D=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),M=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Y=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),U=i(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$=i(/<%[\w\W]*|[\w\W]*%>/gm),z=i(/\${[\w\W]*}/gm),P=i(/^data-[\-\w.\u00B7-\uFFFF]/),X=i(/^aria-[\-\w]+$/),B=i(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),F=i(/^(?:\w+script|data):/i),H=i(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),j=i(/^html$/i);var W,q=Object.freeze({__proto__:null,MUSTACHE_EXPR:U,ERB_EXPR:$,TMPLIT_EXPR:z,DATA_ATTR:P,ARIA_ATTR:X,IS_ALLOWED_URI:B,IS_SCRIPT_OR_DATA:F,ATTR_WHITESPACE:H,DOCTYPE_NAME:j,CUSTOM_ELEMENT:i(/^[a-z][.\w]*(-[.\w]+)+$/i)});let G=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null,a="data-tt-policy-suffix";t&&t.hasAttribute(a)&&(r=t.getAttribute(a));let n="dompurify"+(r?"#"+r:"");try{return e.createPolicy(n,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+n+" could not be created."),null}};return function t(){let r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"u"<typeof window?null:window,n=e=>t(e);if(n.version="3.1.6",n.removed=[],!a||!a.document||9!==a.document.nodeType)return n.isSupported=!1,n;let{document:i}=a,s=i,c=s.currentScript,{DocumentFragment:x,HTMLTemplateElement:U,Node:$,Element:z,NodeFilter:P,NamedNodeMap:X=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:F,DOMParser:H,trustedTypes:W}=a,V=z.prototype,K=k(V,"cloneNode"),Z=k(V,"remove"),J=k(V,"nextSibling"),Q=k(V,"childNodes"),ee=k(V,"parentNode");if("function"==typeof U){let e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}let et="",{implementation:er,createNodeIterator:ea,createDocumentFragment:en,getElementsByTagName:eo}=i,{importNode:ei}=s,el={};n.isSupported="function"==typeof e&&"function"==typeof ee&&er&&void 0!==er.createHTMLDocument;let{MUSTACHE_EXPR:es,ERB_EXPR:ec,TMPLIT_EXPR:ed,DATA_ATTR:eu,ARIA_ATTR:ep,IS_SCRIPT_OR_DATA:eh,ATTR_WHITESPACE:em,CUSTOM_ELEMENT:ef}=q,{IS_ALLOWED_URI:eg}=q,ey=null,eb=T({},[...N,..._,...v,...L,...I]),ew=null,eE=T({},[...R,...D,...M,...Y]),eA=Object.seal(l(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ex=null,eT=null,eS=!0,ek=!0,eN=!1,e_=!0,ev=!1,eO=!0,eL=!1,eC=!1,eI=!1,eR=!1,eD=!1,eM=!1,eY=!0,eU=!1,e$=!0,ez=!1,eP={},eX=null,eB=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),eF=null,eH=T({},["audio","video","img","source","image","track"]),ej=null,eW=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eq="http://www.w3.org/1998/Math/MathML",eG="http://www.w3.org/2000/svg",eV="http://www.w3.org/1999/xhtml",eK=eV,eZ=!1,eJ=null,eQ=T({},[eq,eG,eV],m),e0=null,e1=["application/xhtml+xml","text/html"],e2=null,e5=null,e3=i.createElement("form"),e6=function(e){return e instanceof RegExp||e instanceof Function},e4=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e5||e5!==e){if(e&&"object"==typeof e||(e={}),e=S(e),e2="application/xhtml+xml"===(e0=-1===e1.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?m:h,ey=w(e,"ALLOWED_TAGS")?T({},e.ALLOWED_TAGS,e2):eb,ew=w(e,"ALLOWED_ATTR")?T({},e.ALLOWED_ATTR,e2):eE,eJ=w(e,"ALLOWED_NAMESPACES")?T({},e.ALLOWED_NAMESPACES,m):eQ,ej=w(e,"ADD_URI_SAFE_ATTR")?T(S(eW),e.ADD_URI_SAFE_ATTR,e2):eW,eF=w(e,"ADD_DATA_URI_TAGS")?T(S(eH),e.ADD_DATA_URI_TAGS,e2):eH,eX=w(e,"FORBID_CONTENTS")?T({},e.FORBID_CONTENTS,e2):eB,ex=w(e,"FORBID_TAGS")?T({},e.FORBID_TAGS,e2):{},eT=w(e,"FORBID_ATTR")?T({},e.FORBID_ATTR,e2):{},eP=!!w(e,"USE_PROFILES")&&e.USE_PROFILES,eS=!1!==e.ALLOW_ARIA_ATTR,ek=!1!==e.ALLOW_DATA_ATTR,eN=e.ALLOW_UNKNOWN_PROTOCOLS||!1,e_=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,ev=e.SAFE_FOR_TEMPLATES||!1,eO=!1!==e.SAFE_FOR_XML,eL=e.WHOLE_DOCUMENT||!1,eR=e.RETURN_DOM||!1,eD=e.RETURN_DOM_FRAGMENT||!1,eM=e.RETURN_TRUSTED_TYPE||!1,eI=e.FORCE_BODY||!1,eY=!1!==e.SANITIZE_DOM,eU=e.SANITIZE_NAMED_PROPS||!1,e$=!1!==e.KEEP_CONTENT,ez=e.IN_PLACE||!1,eg=e.ALLOWED_URI_REGEXP||B,eK=e.NAMESPACE||eV,eA=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&e6(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(eA.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&e6(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(eA.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(eA.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ev&&(ek=!1),eD&&(eR=!0),eP&&(ey=T({},I),ew=[],!0===eP.html&&(T(ey,N),T(ew,R)),!0===eP.svg&&(T(ey,_),T(ew,D),T(ew,Y)),!0===eP.svgFilters&&(T(ey,v),T(ew,D),T(ew,Y)),!0===eP.mathMl&&(T(ey,L),T(ew,M),T(ew,Y))),e.ADD_TAGS&&(ey===eb&&(ey=S(ey)),T(ey,e.ADD_TAGS,e2)),e.ADD_ATTR&&(ew===eE&&(ew=S(ew)),T(ew,e.ADD_ATTR,e2)),e.ADD_URI_SAFE_ATTR&&T(ej,e.ADD_URI_SAFE_ATTR,e2),e.FORBID_CONTENTS&&(eX===eB&&(eX=S(eX)),T(eX,e.FORBID_CONTENTS,e2)),e$&&(ey["#text"]=!0),eL&&T(ey,["html","head","body"]),ey.table&&(T(ey,["tbody"]),delete ex.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');et=(r=e.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===r&&(r=G(W,c)),null!==r&&"string"==typeof et&&(et=r.createHTML(""));o&&o(e),e5=e}},e9=T({},["mi","mo","mn","ms","mtext"]),e8=T({},["foreignobject","annotation-xml"]),e7=T({},["title","style","font","a","script"]),te=T({},[..._,...v,...O]),tt=T({},[...L,...C]),tr=function(e){let t=ee(e);t&&t.tagName||(t={namespaceURI:eK,tagName:"template"});let r=h(e.tagName),a=h(t.tagName);return!!eJ[e.namespaceURI]&&(e.namespaceURI===eG?t.namespaceURI===eV?"svg"===r:t.namespaceURI===eq?"svg"===r&&("annotation-xml"===a||e9[a]):!!te[r]:e.namespaceURI===eq?t.namespaceURI===eV?"math"===r:t.namespaceURI===eG?"math"===r&&e8[a]:!!tt[r]:e.namespaceURI===eV?(t.namespaceURI!==eG||!!e8[a])&&(t.namespaceURI!==eq||!!e9[a])&&!tt[r]&&(e7[r]||!te[r]):"application/xhtml+xml"===e0&&!!eJ[e.namespaceURI])},ta=function(e){p(n.removed,{element:e});try{ee(e).removeChild(e)}catch(t){Z(e)}},tn=function(e,t){try{p(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){p(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ew[e])if(eR||eD)try{ta(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},to=function(e){let t=null,a=null;if(eI)e="<remove></remove>"+e;else{let t=f(e,/^[\r\n\t ]+/);a=t&&t[0]}"application/xhtml+xml"===e0&&eK===eV&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let n=r?r.createHTML(e):e;if(eK===eV)try{t=new H().parseFromString(n,e0)}catch(e){}if(!t||!t.documentElement){t=er.createDocument(eK,"template",null);try{t.documentElement.innerHTML=eZ?et:n}catch(e){}}let o=t.body||t.documentElement;return(e&&a&&o.insertBefore(i.createTextNode(a),o.childNodes[0]||null),eK===eV)?eo.call(t,eL?"html":"body")[0]:eL?t.documentElement:o},ti=function(e){return ea.call(e.ownerDocument||e,e,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT|P.SHOW_PROCESSING_INSTRUCTION|P.SHOW_CDATA_SECTION,null)},tl=function(e){return e instanceof F&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof X)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},ts=function(e){return"function"==typeof $&&e instanceof $},tc=function(e,t,r){el[e]&&d(el[e],e=>{e.call(n,t,r,e5)})},td=function(e){let t=null;if(tc("beforeSanitizeElements",e,null),tl(e))return ta(e),!0;let r=e2(e.nodeName);if(tc("uponSanitizeElement",e,{tagName:r,allowedTags:ey}),e.hasChildNodes()&&!ts(e.firstElementChild)&&E(/<[/\w]/g,e.innerHTML)&&E(/<[/\w]/g,e.textContent)||7===e.nodeType||eO&&8===e.nodeType&&E(/<[/\w]/g,e.data))return ta(e),!0;if(!ey[r]||ex[r]){if(!ex[r]&&tp(r)&&(eA.tagNameCheck instanceof RegExp&&E(eA.tagNameCheck,r)||eA.tagNameCheck instanceof Function&&eA.tagNameCheck(r)))return!1;if(e$&&!eX[r]){let t=ee(e)||e.parentNode,r=Q(e)||e.childNodes;if(r&&t){let a=r.length;for(let n=a-1;n>=0;--n){let a=K(r[n],!0);a.__removalCount=(e.__removalCount||0)+1,t.insertBefore(a,J(e))}}}return ta(e),!0}return e instanceof z&&!tr(e)||("noscript"===r||"noembed"===r||"noframes"===r)&&E(/<\/no(script|embed|frames)/i,e.innerHTML)?(ta(e),!0):(ev&&3===e.nodeType&&(t=e.textContent,d([es,ec,ed],e=>{t=g(t,e," ")}),e.textContent!==t&&(p(n.removed,{element:e.cloneNode()}),e.textContent=t)),tc("afterSanitizeElements",e,null),!1)},tu=function(e,t,r){if(eY&&("id"===t||"name"===t)&&(r in i||r in e3))return!1;if(ek&&!eT[t]&&E(eu,t));else if(eS&&E(ep,t));else if(!ew[t]||eT[t]){if(!(tp(e)&&(eA.tagNameCheck instanceof RegExp&&E(eA.tagNameCheck,e)||eA.tagNameCheck instanceof Function&&eA.tagNameCheck(e))&&(eA.attributeNameCheck instanceof RegExp&&E(eA.attributeNameCheck,t)||eA.attributeNameCheck instanceof Function&&eA.attributeNameCheck(t))||"is"===t&&eA.allowCustomizedBuiltInElements&&(eA.tagNameCheck instanceof RegExp&&E(eA.tagNameCheck,r)||eA.tagNameCheck instanceof Function&&eA.tagNameCheck(r))))return!1}else if(ej[t]);else if(E(eg,g(r,em,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===y(r,"data:")&&eF[e]);else if(eN&&!E(eh,g(r,em,"")));else if(r)return!1;return!0},tp=function(e){return"annotation-xml"!==e&&f(e,ef)},th=function(e){tc("beforeSanitizeAttributes",e,null);let{attributes:t}=e;if(!t)return;let a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ew},o=t.length;for(;o--;){let{name:i,namespaceURI:l,value:s}=t[o],c=e2(i),p="value"===i?s:b(s);if(a.attrName=c,a.attrValue=p,a.keepAttr=!0,a.forceKeepAttr=void 0,tc("uponSanitizeAttribute",e,a),p=a.attrValue,eO&&E(/((--!?|])>)|<\/(style|title)/i,p)){tn(i,e);continue}if(a.forceKeepAttr||(tn(i,e),!a.keepAttr))continue;if(!e_&&E(/\/>/i,p)){tn(i,e);continue}ev&&d([es,ec,ed],e=>{p=g(p,e," ")});let h=e2(e.nodeName);if(tu(h,c,p)){if(eU&&("id"===c||"name"===c)&&(tn(i,e),p="user-content-"+p),r&&"object"==typeof W&&"function"==typeof W.getAttributeType)if(l);else switch(W.getAttributeType(h,c)){case"TrustedHTML":p=r.createHTML(p);break;case"TrustedScriptURL":p=r.createScriptURL(p)}try{l?e.setAttributeNS(l,i,p):e.setAttribute(i,p),tl(e)?ta(e):u(n.removed)}catch(e){}}}tc("afterSanitizeAttributes",e,null)},tm=function e(t){let r=null,a=ti(t);for(tc("beforeSanitizeShadowDOM",t,null);r=a.nextNode();)tc("uponSanitizeShadowNode",r,null),td(r)||(r.content instanceof x&&e(r.content),th(r));tc("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null,o=null,i=null,l=null;if((eZ=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ts(e))if("function"==typeof e.toString){if("string"!=typeof(e=e.toString()))throw A("dirty is not a string, aborting")}else throw A("toString is not a function");if(!n.isSupported)return e;if(eC||e4(t),n.removed=[],"string"==typeof e&&(ez=!1),ez){if(e.nodeName){let t=e2(e.nodeName);if(!ey[t]||ex[t])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof $)1===(o=(a=to("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?a=o:a.appendChild(o);else{if(!eR&&!ev&&!eL&&-1===e.indexOf("<"))return r&&eM?r.createHTML(e):e;if(!(a=to(e)))return eR?null:eM?et:""}a&&eI&&ta(a.firstChild);let c=ti(ez?e:a);for(;i=c.nextNode();)td(i)||(i.content instanceof x&&tm(i.content),th(i));if(ez)return e;if(eR){if(eD)for(l=en.call(a.ownerDocument);a.firstChild;)l.appendChild(a.firstChild);else l=a;return(ew.shadowroot||ew.shadowrootmode)&&(l=ei.call(s,l,!0)),l}let u=eL?a.outerHTML:a.innerHTML;return eL&&ey["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&E(j,a.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+u),ev&&d([es,ec,ed],e=>{u=g(u,e," ")}),r&&eM?r.createHTML(u):u},n.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e4(e),eC=!0},n.clearConfig=function(){e5=null,eC=!1},n.isValidAttribute=function(e,t,r){return e5||e4({}),tu(e2(e),e2(t),r)},n.addHook=function(e,t){"function"==typeof t&&(el[e]=el[e]||[],p(el[e],t))},n.removeHook=function(e){if(el[e])return u(el[e])},n.removeHooks=function(e){el[e]&&(el[e]=[])},n.removeAllHooks=function(){el={}},n}()}()}}]);