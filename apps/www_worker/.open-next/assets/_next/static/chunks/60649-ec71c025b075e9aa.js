"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60649],{13706:(e,t,s)=>{s.r(t),s.d(t,{DiscussionKit:()=>l,discussionPlugin:()=>o});var n=s(28268),i=s(94933);let a=[{id:"discussion1",comments:[{id:"comment1",contentRich:[{children:[{text:"Comments are a great way to provide feedback and discuss changes."}],type:"p"}],createdAt:new Date(Date.now()-6e5),discussionId:"discussion1",isEdited:!1,userId:"charlie"},{id:"comment2",contentRich:[{children:[{text:"Agreed! The link to the docs makes it easy to learn more."}],type:"p"}],createdAt:new Date(Date.now()-5e5),discussionId:"discussion1",isEdited:!1,userId:"bob"}],createdAt:new Date,documentContent:"comments",isResolved:!1,userId:"charlie"},{id:"discussion2",comments:[{id:"comment1",contentRich:[{children:[{text:"Nice demonstration of overlapping annotations with both comments and suggestions!"}],type:"p"}],createdAt:new Date(Date.now()-3e5),discussionId:"discussion2",isEdited:!1,userId:"bob"},{id:"comment2",contentRich:[{children:[{text:"This helps users understand how powerful the editor can be."}],type:"p"}],createdAt:new Date(Date.now()-2e5),discussionId:"discussion2",isEdited:!1,userId:"charlie"}],createdAt:new Date,documentContent:"overlapping",isResolved:!1,userId:"bob"}],o=(0,n.SU)({key:"discussion",options:{currentUserId:"alice",discussions:a,users:{alice:{id:"alice",avatarUrl:"https://api.dicebear.com/9.x/glass/svg?seed=".concat("alice6"),name:"Alice"},bob:{id:"bob",avatarUrl:"https://api.dicebear.com/9.x/glass/svg?seed=".concat("bob4"),name:"Bob"},charlie:{id:"charlie",avatarUrl:"https://api.dicebear.com/9.x/glass/svg?seed=".concat("charlie2"),name:"Charlie"}}}}).configure({render:{aboveNodes:i.BlockDiscussion}}).extendSelectors(e=>{let{getOption:t}=e;return{currentUser:()=>t("users")[t("currentUserId")],user:e=>t("users")[e]}}),l=[o]},13927:(e,t,s)=>{s.r(t),s.d(t,{BasicMarksKit:()=>l});var n=s(51029),i=s(65326),a=s(42075),o=s(48160);let l=[n.jV,n.YU,n.yg,n.VH.configure({node:{component:i.CodeLeaf},shortcuts:{toggle:{keys:"mod+e"}}}),n.xD.configure({shortcuts:{toggle:{keys:"mod+shift+x"}}}),n.xu.configure({shortcuts:{toggle:{keys:"mod+comma"}}}),n.jH.configure({shortcuts:{toggle:{keys:"mod+period"}}}),n.k3.configure({node:{component:a.HighlightLeaf},shortcuts:{toggle:{keys:"mod+shift+h"}}}),n.jQ.withComponent(o.KbdLeaf)]},20127:(e,t,s)=>{s.r(t),s.d(t,{CommentKit:()=>r,commentPlugin:()=>l});var n=s(38088),i=s(50357),a=s(28268),o=s(52430);let l=(0,a.LS)(n.t,{handlers:{onClick:e=>{let{api:t,event:s,setOption:n,type:a}=e,o=s.target,l=!1,r=()=>{n("activeId",null),l=!0};for((0,i.wt)(o)||r();o.parentElement;){if(o.classList.contains("slate-".concat(a))){let e=t.comment.node();if(!e){r();break}let s=t.comment.nodeId(e[0]);n("activeId",null!=s?s:null),l=!0;break}o=o.parentElement}l||r()}},options:{activeId:null,commentingBlock:null,hoverId:null,uniquePathMap:new Map}}).extendTransforms(e=>{let{editor:t,setOption:s,tf:{comment:{setDraft:i}}}=e;return{setDraft:()=>{t.api.isCollapsed()&&t.tf.select(t.api.block()[1]),i(),t.tf.collapse(),s("activeId",(0,n.u)()),s("commentingBlock",t.selection.focus.path.slice(0,1))}}}).configure({node:{component:o.CommentLeaf},shortcuts:{setDraft:{keys:"mod+shift+m"}}}),r=[l]},42075:(e,t,s)=>{s.r(t),s.d(t,{HighlightLeaf:()=>r});var n=s(99019),i=s(5147),a=s(54568),o=s(99680);s(7620);var l=s(28268);function r(e){let t,s=(0,o.c)(2);return s[0]!==e?(t=(0,a.jsx)(l.nK,(0,i._)((0,n._)({},e),{as:"mark",className:"bg-highlight/30 text-inherit",children:e.children})),s[0]=e,s[1]=t):t=s[1],t}},48160:(e,t,s)=>{s.r(t),s.d(t,{KbdLeaf:()=>r});var n=s(99019),i=s(5147),a=s(54568),o=s(99680);s(7620);var l=s(28268);function r(e){let t,s=(0,o.c)(2);return s[0]!==e?(t=(0,a.jsx)(l.nK,(0,i._)((0,n._)({},e),{as:"kbd",className:"rounded border border-border bg-muted px-1.5 py-0.5 font-mono text-sm shadow-[rgba(255,_255,_255,_0.1)_0px_0.5px_0px_0px_inset,_rgb(248,_249,_250)_0px_1px_5px_0px_inset,_rgb(193,_200,_205)_0px_0px_0px_0.5px,_rgb(193,_200,_205)_0px_2px_1px_-1px,_rgb(193,_200,_205)_0px_1px_0px_0px] dark:shadow-[rgba(255,_255,_255,_0.1)_0px_0.5px_0px_0px_inset,_rgb(26,_29,_30)_0px_1px_5px_0px_inset,_rgb(76,_81,_85)_0px_0px_0px_0.5px,_rgb(76,_81,_85)_0px_2px_1px_-1px,_rgb(76,_81,_85)_0px_1px_0px_0px]",children:e.children})),s[0]=e,s[1]=t):t=s[1],t}},50614:(e,t,s)=>{s.r(t),s.d(t,{SuggestionKit:()=>d,suggestionPlugin:()=>r});var n=s(42697),i=s(50357),a=s(28268),o=s(71511),l=s(13706);let r=(0,a.LS)(n.a,e=>{let{editor:t}=e;return{options:{activeId:null,currentUserId:t.getOption(l.discussionPlugin,"currentUserId"),hoverId:null,uniquePathMap:new Map}}}).configure({handlers:{onClick:e=>{let{api:t,event:s,setOption:n,type:a}=e,o=s.target,l=!1,r="true"===o.dataset.blockSuggestion,d=()=>{n("activeId",null),l=!0};for((0,i.wt)(o)||r||d();o.parentElement&&!(0,i.vt)(o.parentElement);){let e="true"===o.dataset.blockSuggestion;if(o.classList.contains("slate-".concat(a))||e){let s=t.suggestion.node({isText:!e});if(!s){d();break}let i=t.suggestion.nodeId(s[0]);n("activeId",null!=i?i:null),l=!0;break}o=o.parentElement}l||d()}},render:{belowNodes:o.SuggestionLineBreak,node:o.SuggestionLeaf}}),d=[r]},51029:(e,t,s)=>{s.d(t,{C4:()=>p,DP:()=>m,Iv:()=>h,KL:()=>N,LZ:()=>r,VH:()=>f,Vv:()=>c,Y8:()=>u,YU:()=>v,ae:()=>g,jH:()=>j,jQ:()=>y,jV:()=>x,k3:()=>w,nL:()=>o,oL:()=>d,xD:()=>b,xu:()=>_,yg:()=>I});var n=s(26661),i=s(28268),a=s(84914);let o=(0,i.HS)(n.y),l=(0,i.HS)(n.v),r=(0,i.HS)(n.f),d=(0,i.HS)(n.p),c=(0,i.HS)(n.m),u=(0,i.HS)(n.h),m=(0,i.HS)(n.g),g=(0,i.HS)(n._),p=(0,i.HS)(n.d),h=(0,i.SU)({plugins:[o,l,p]}),x=(0,i.HS)(n.u,{shortcuts:{toggle:{keys:[[a.Uz.Mod,"b"]]}}}),f=(0,i.HS)(n.l),v=(0,i.HS)(n.c,{shortcuts:{toggle:{keys:[[a.Uz.Mod,"i"]]}}}),b=(0,i.HS)(n.s),_=(0,i.HS)(n.o),j=(0,i.HS)(n.a),I=(0,i.HS)(n.i,{shortcuts:{toggle:{keys:[[a.Uz.Mod,"u"]]}}}),N=(0,i.HS)(n.r,{plugins:[x,f,v,b,_,j,I]}),w=(0,i.HS)(n.n),y=(0,i.HS)(n.t)},52430:(e,t,s)=>{s.r(t),s.d(t,{CommentLeaf:()=>u});var n=s(99019),i=s(5147),a=s(54568),o=s(99680);s(7620);var l=s(38088),r=s(28268),d=s(87536),c=s(20127);function u(e){let t,s,u,m,g,p,h,x=(0,o.c)(23),{children:f,leaf:v}=e,{api:b,setOption:_}=(0,r.CF)(c.commentPlugin),j=(0,r.gO)(c.commentPlugin,"hoverId"),I=(0,r.gO)(c.commentPlugin,"activeId"),N=(0,l.c)(v)>1;x[0]!==b.comment||x[1]!==v?(t=b.comment.nodeId(v),x[0]=b.comment,x[1]=v,x[2]=t):t=x[2];let w=t,y=I===w,k=j===w,A=(k||y)&&"border-b-highlight bg-highlight/25",P=N&&"border-b-2 border-b-highlight/[.7] bg-highlight/25",C=(k||y)&&N&&"border-b-highlight bg-highlight/45";return x[3]!==A||x[4]!==P||x[5]!==C?(s=(0,d.cn)("border-b-2 border-b-highlight/[.36] bg-highlight/[.13] transition-colors duration-200",A,P,C),x[3]=A,x[4]=P,x[5]=C,x[6]=s):s=x[6],x[7]!==w||x[8]!==_?(u=()=>_("activeId",null!=w?w:null),m=()=>_("hoverId",null!=w?w:null),x[7]=w,x[8]=_,x[9]=u,x[10]=m):(u=x[9],m=x[10]),x[11]!==_?(g=()=>_("hoverId",null),x[11]=_,x[12]=g):g=x[12],x[13]!==e.attributes||x[14]!==u||x[15]!==m||x[16]!==g?(p=(0,i._)((0,n._)({},e.attributes),{onClick:u,onMouseEnter:m,onMouseLeave:g}),x[13]=e.attributes,x[14]=u,x[15]=m,x[16]=g,x[17]=p):p=x[17],x[18]!==f||x[19]!==e||x[20]!==s||x[21]!==p?(h=(0,a.jsx)(r.nK,(0,i._)((0,n._)({},e),{className:s,attributes:p,children:f})),x[18]=f,x[19]=e,x[20]=s,x[21]=p,x[22]=h):h=x[22],h}},54866:(e,t,s)=>{s.d(t,{AM:()=>c,Wv:()=>u,dT:()=>g,hl:()=>m});var n=s(98752),i=s(99019),a=s(15457),o=s(54568),l=s(99680);s(7620);var r=s(38241),d=s(87536);function c(e){let t,s,a=(0,l.c)(4);return a[0]!==e?(t=(0,n._)({},e),a[0]=e,a[1]=t):t=a[1],a[2]!==t?(s=(0,o.jsx)(r.bL,(0,i._)({"data-slot":"popover"},t)),a[2]=t,a[3]=s):s=a[3],s}function u(e){let t,s,a=(0,l.c)(4);return a[0]!==e?(t=(0,n._)({},e),a[0]=e,a[1]=t):t=a[1],a[2]!==t?(s=(0,o.jsx)(r.l9,(0,i._)({"data-slot":"popover-trigger"},t)),a[2]=t,a[3]=s):s=a[3],s}function m(e){let t,s,n,c,u,m,g=(0,l.c)(12);g[0]!==e?({align:n,className:t,sideOffset:c}=e,s=(0,a._)(e,["align","className","sideOffset"]),g[0]=e,g[1]=t,g[2]=s,g[3]=n,g[4]=c):(t=g[1],s=g[2],n=g[3],c=g[4]);let p=void 0===n?"center":n,h=void 0===c?4:c;return g[5]!==t?(u=(0,d.cn)("data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-hidden data-[state=closed]:animate-out data-[state=open]:animate-in",t),g[5]=t,g[6]=u):u=g[6],g[7]!==p||g[8]!==s||g[9]!==h||g[10]!==u?(m=(0,o.jsx)(r.ZL,{children:(0,o.jsx)(r.UC,(0,i._)({className:u,"data-slot":"popover-content",align:p,sideOffset:h},s))}),g[7]=p,g[8]=s,g[9]=h,g[10]=u,g[11]=m):m=g[11],m}function g(e){let t,s,a=(0,l.c)(4);return a[0]!==e?(t=(0,n._)({},e),a[0]=e,a[1]=t):t=a[1],a[2]!==t?(s=(0,o.jsx)(r.Mz,(0,i._)({"data-slot":"popover-anchor"},t)),a[2]=t,a[3]=s):s=a[3],s}},65326:(e,t,s)=>{s.r(t),s.d(t,{CodeLeaf:()=>r});var n=s(99019),i=s(5147),a=s(54568),o=s(99680);s(7620);var l=s(28268);function r(e){let t,s=(0,o.c)(2);return s[0]!==e?(t=(0,a.jsx)(l.nK,(0,i._)((0,n._)({},e),{as:"code",className:"whitespace-pre-wrap rounded-md bg-muted px-[0.3em] py-[0.2em] font-mono text-sm",children:e.children})),s[0]=e,s[1]=t):t=s[1],t}},68377:(e,t,s)=>{s.r(t),s.d(t,{Editor:()=>p,EditorContainer:()=>m,EditorView:()=>h});var n=s(99019),i=s(5147),a=s(15457),o=s(54568),l=s(99680);s(7620);var r=s(30507),d=s(28268),c=s(87536);let u=(0,r.F)("relative w-full cursor-text select-text overflow-y-auto caret-primary selection:bg-brand/25 focus-visible:outline-none [&_.slate-selection-area]:z-50 [&_.slate-selection-area]:border [&_.slate-selection-area]:border-brand/25 [&_.slate-selection-area]:bg-brand/15",{defaultVariants:{variant:"default"},variants:{variant:{comment:(0,c.cn)("flex flex-wrap justify-between gap-1 px-1 py-0.5 text-sm","rounded-md border-[1.5px] border-transparent bg-transparent","has-[[data-slate-editor]:focus]:border-brand/50 has-[[data-slate-editor]:focus]:ring-2 has-[[data-slate-editor]:focus]:ring-brand/30","has-aria-disabled:border-input has-aria-disabled:bg-muted"),default:"h-full",demo:"h-[650px]",select:(0,c.cn)("group rounded-md border border-input ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2","has-data-readonly:w-fit has-data-readonly:cursor-default has-data-readonly:border-transparent has-data-readonly:focus-within:[box-shadow:none]")}}});function m(e){let t,s,i,r,m,g=(0,l.c)(10);return g[0]!==e?({className:t,variant:i}=e,s=(0,a._)(e,["className","variant"]),g[0]=e,g[1]=t,g[2]=s,g[3]=i):(t=g[1],s=g[2],i=g[3]),g[4]!==t||g[5]!==i?(r=(0,c.cn)("ignore-click-outside/toolbar",u({variant:i}),t),g[4]=t,g[5]=i,g[6]=r):r=g[6],g[7]!==s||g[8]!==r?(m=(0,o.jsx)(d.ww,(0,n._)({className:r},s)),g[7]=s,g[8]=r,g[9]=m):m=g[9],m}let g=(0,r.F)((0,c.cn)("group/editor","relative w-full cursor-text select-text overflow-x-hidden whitespace-pre-wrap break-words","rounded-md ring-offset-background focus-visible:outline-none","**:data-slate-placeholder:!top-1/2 **:data-slate-placeholder:-translate-y-1/2 placeholder:text-muted-foreground/80 **:data-slate-placeholder:text-muted-foreground/80 **:data-slate-placeholder:opacity-100!","[&_strong]:font-bold"),{defaultVariants:{variant:"default"},variants:{disabled:{true:"cursor-not-allowed opacity-50"},focused:{true:"ring-2 ring-ring ring-offset-2"},variant:{ai:"w-full px-0 text-base md:text-sm",aiChat:"max-h-[min(70vh,320px)] w-full overflow-y-auto px-3 py-2 text-base md:text-sm",comment:(0,c.cn)("rounded-none border-none bg-transparent text-sm"),default:"size-full px-16 pt-4 pb-72 text-base sm:px-[max(64px,calc(50%-350px))]",demo:"size-full px-16 pt-4 pb-72 text-base sm:px-[max(64px,calc(50%-350px))]",fullWidth:"size-full px-16 pt-4 pb-72 text-base sm:px-24",none:"",select:"px-3 py-2 text-base data-readonly:w-fit"}}}),p=e=>{let t,s,i,r,u,m,p,h,x=(0,l.c)(17);return x[0]!==e?({className:t,disabled:s,focused:i,variant:m,ref:u}=e,r=(0,a._)(e,["className","disabled","focused","variant","ref"]),x[0]=e,x[1]=t,x[2]=s,x[3]=i,x[4]=r,x[5]=u,x[6]=m):(t=x[1],s=x[2],i=x[3],r=x[4],u=x[5],m=x[6]),x[7]!==t||x[8]!==s||x[9]!==i||x[10]!==m?(p=(0,c.cn)(g({disabled:s,focused:i,variant:m}),t),x[7]=t,x[8]=s,x[9]=i,x[10]=m,x[11]=p):p=x[11],x[12]!==s||x[13]!==r||x[14]!==u||x[15]!==p?(h=(0,o.jsx)(d.wP,(0,n._)({ref:u,className:p,disabled:s,disableDefaultStyles:!0},r)),x[12]=s,x[13]=r,x[14]=u,x[15]=p,x[16]=h):h=x[16],h};function h(e){let t,s,r,u,m,p=(0,l.c)(10);return p[0]!==e?({className:t,variant:r}=e,s=(0,a._)(e,["className","variant"]),p[0]=e,p[1]=t,p[2]=s,p[3]=r):(t=p[1],s=p[2],r=p[3]),p[4]!==t||p[5]!==r?(u=(0,c.cn)(g({variant:r}),t),p[4]=t,p[5]=r,p[6]=u):u=p[6],p[7]!==s||p[8]!==u?(m=(0,o.jsx)(d.Am,(0,i._)((0,n._)({},s),{className:u})),p[7]=s,p[8]=u,p[9]=m):m=p[9],m}p.displayName="Editor",h.displayName="EditorView"},71511:(e,t,s)=>{s.r(t),s.d(t,{SuggestionLeaf:()=>p,SuggestionLineBreak:()=>x});var n=s(99019),i=s(5147),a=s(54568),o=s(99680),l=s(7620),r=s(30507),d=s(80263),c=s(28268),u=s(87536),m=s(50614);let g=(0,r.F)((0,u.cn)("bg-emerald-100 text-emerald-700 no-underline transition-colors duration-200"),{defaultVariants:{insertActive:!1,remove:!1,removeActive:!1},variants:{insertActive:{false:"",true:"bg-emerald-200/80"},remove:{false:"",true:"bg-red-100 text-red-700"},removeActive:{false:"",true:"bg-red-200/80 no-underline"}}});function p(e){let t,s,l,r,d,p,x,f,v,b=(0,o.c)(33),{api:_,setOption:j}=(0,c.CF)(m.suggestionPlugin),I=e.leaf;if(b[0]!==_.suggestion||b[1]!==I){var N;t=null!=(N=_.suggestion.nodeId(I))?N:"",b[0]=_.suggestion,b[1]=I,b[2]=t}else t=b[2];let w=t,y=(0,c.gO)(m.suggestionPlugin,"activeId"),k=(0,c.gO)(m.suggestionPlugin,"hoverId");if(b[3]!==y||b[4]!==_.suggestion||b[5]!==k||b[6]!==I||b[7]!==e){let t,n,i,a=_.suggestion.dataList(I),o=a.some(h);b[12]!==y?(t=e=>e.id===y,b[12]=y,b[13]=t):t=b[13];let m=a.some(t);b[14]!==k?(n=e=>e.id===k,b[14]=k,b[15]=n):n=b[15];let p=a.some(n);b[16]===Symbol.for("react.memo_cache_sentinel")?(i={delete:"del",insert:"ins",update:"span"},b[16]=i):i=b[16];let x=i[o?"delete":"insert"];s=c.nK,l=e,r=x,d=(0,u.cn)(g({insertActive:m||p,remove:o,removeActive:(m||p)&&o})),b[3]=y,b[4]=_.suggestion,b[5]=k,b[6]=I,b[7]=e,b[8]=s,b[9]=l,b[10]=r,b[11]=d}else s=b[8],l=b[9],r=b[10],d=b[11];return b[17]!==w||b[18]!==j?(p=()=>j("hoverId",w),b[17]=w,b[18]=j,b[19]=p):p=b[19],b[20]!==j?(x=()=>j("hoverId",null),b[20]=j,b[21]=x):x=b[21],b[22]!==e.attributes||b[23]!==p||b[24]!==x?(f=(0,i._)((0,n._)({},e.attributes),{onMouseEnter:p,onMouseLeave:x}),b[22]=e.attributes,b[23]=p,b[24]=x,b[25]=f):f=b[25],b[26]!==s||b[27]!==e.children||b[28]!==l||b[29]!==r||b[30]!==d||b[31]!==f?(v=(0,a.jsx)(s,(0,i._)((0,n._)({},l),{as:r,className:d,attributes:f,children:e.children})),b[26]=s,b[27]=e.children,b[28]=l,b[29]=r,b[30]=d,b[31]=f,b[32]=v):v=b[32],v}function h(e){return"remove"===e.type}let x=e=>{let{api:t,element:s}=e;if(!t.suggestion.isBlockSuggestion(s))return;let n=s.suggestion;return function(e){let{children:t}=e;return(0,a.jsx)(f,{suggestionData:n,children:t})}};function f(e){let t,s=(0,o.c)(9),{children:n,suggestionData:i}=e,{isLineBreak:r,type:p}=i,h="remove"===p,x="insert"===p,f=(0,c.gO)(m.suggestionPlugin,"activeId"),v=(0,c.gO)(m.suggestionPlugin,"hoverId"),b=f===i.id,_=v===i.id,j=l.useRef(null),{setOption:I}=(0,c.CF)(m.suggestionPlugin);return s[0]!==n||s[1]!==b||s[2]!==_||s[3]!==x||s[4]!==r||s[5]!==h||s[6]!==I||s[7]!==i.id?(t=(0,a.jsx)(a.Fragment,{children:r?(0,a.jsxs)(a.Fragment,{children:[n,(0,a.jsx)("span",{ref:j,className:(0,u.cn)("absolute text-justify",g({insertActive:x&&(b||_),remove:h,removeActive:(b||_)&&h})),style:{bottom:3.5,height:21},contentEditable:!1,children:(0,a.jsx)(d.A,{className:"mt-0.5 size-4"})})]}):(0,a.jsx)("div",{className:(0,u.cn)(g({insertActive:x&&(b||_),remove:h,removeActive:(b||_)&&h})),onMouseEnter:()=>I("hoverId",i.id),onMouseLeave:()=>I("hoverId",null),"data-block-suggestion":"true",children:n})}),s[0]=n,s[1]=b,s[2]=_,s[3]=x,s[4]=r,s[5]=h,s[6]=I,s[7]=i.id,s[8]=t):t=s[8],t}},94933:(e,t,s)=>{s.r(t),s.d(t,{BlockDiscussion:()=>eu});var n=s(99019),i=s(5147),a=s(54568),o=s(99680),l=s(7620),r=s(38088),d=s(28268),c=s(13526);let u=(0,d.HS)(r.t);function m(e){if(!e.selection||e.api.isExpanded())return;let t=e.getApi(r.t),s=t.comment.node();if(!s)return;let[n]=s;return t.comment.nodeId(n)}var g=s(42697),p=s(54097),h=s(11457),x=s(46568),f=s(54767),v=s(14796),b=s(93955),_=s(54866),j=s(20127),I=s(13706),N=s(50614),w=s(9851),y=s(55447),k=s(48674),A=s(15457),P=s(18499),C=s(87536);function S(e){let t,s,i,l,r=(0,o.c)(8);return r[0]!==e?({className:t}=e,s=(0,A._)(e,["className"]),r[0]=e,r[1]=t,r[2]=s):(t=r[1],s=r[2]),r[3]!==t?(i=(0,C.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),r[3]=t,r[4]=i):i=r[4],r[5]!==s||r[6]!==i?(l=(0,a.jsx)(P.bL,(0,n._)({className:i,"data-slot":"avatar"},s)),r[5]=s,r[6]=i,r[7]=l):l=r[7],l}function E(e){let t,s,i,l,r=(0,o.c)(8);return r[0]!==e?({className:t}=e,s=(0,A._)(e,["className"]),r[0]=e,r[1]=t,r[2]=s):(t=r[1],s=r[2]),r[3]!==t?(i=(0,C.cn)("aspect-square size-full",t),r[3]=t,r[4]=i):i=r[4],r[5]!==s||r[6]!==i?(l=(0,a.jsx)(P._V,(0,n._)({className:i,"data-slot":"avatar-image"},s)),r[5]=s,r[6]=i,r[7]=l):l=r[7],l}function O(e){let t,s,i,l,r=(0,o.c)(8);return r[0]!==e?({className:t}=e,s=(0,A._)(e,["className"]),r[0]=e,r[1]=t,r[2]=s):(t=r[1],s=r[2]),r[3]!==t?(i=(0,C.cn)("flex size-full items-center justify-center rounded-full bg-muted",t),r[3]=t,r[4]=i):i=r[4],r[5]!==s||r[6]!==i?(l=(0,a.jsx)(P.H4,(0,n._)({className:i,"data-slot":"avatar-fallback"},s)),r[5]=s,r[6]=i,r[7]=l):l=r[7],l}var D=s(98880),M=s(19792),L=s(6814),z=s(98636),H=s(64306),T=s(22640),U=s(68369),R=s(2640),F=s(81993),q=s(26844),B=s(13927),K=s(68377);function V(e){var t,s,r,c,m,g;let p,h,x,f,v,_,j,N,k,A,P,C,D,M,L,z,H,T,U,R,F,q,B,V,$,W,G,J,X=(0,o.c)(90),{comment:ee,discussionLength:et,documentContent:es,editingId:en,index:ei,setEditingId:ea,showDocumentContent:eo,onEditorClick:el}=e,er=void 0!==eo&&eo,ed=(0,d.Q_)(),ec=(0,d.gO)(I.discussionPlugin,"user",ee.userId),eu=(0,d.gO)(I.discussionPlugin,"currentUserId");X[0]!==ed?(p=async e=>{let t=ed.getOption(I.discussionPlugin,"discussions").map(t=>t.id===e?(0,i._)((0,n._)({},t),{isResolved:!0}):t);ed.setOption(I.discussionPlugin,"discussions",t)},X[0]=ed,X[1]=p):p=X[1];let em=p;X[2]!==ed?(h=async e=>{let t=ed.getOption(I.discussionPlugin,"discussions").filter(t=>t.id!==e);ed.setOption(I.discussionPlugin,"discussions",t)},X[2]=ed,X[3]=h):h=X[3];let eg=h;X[4]!==ed?(x=async e=>{let t=ed.getOption(I.discussionPlugin,"discussions").map(t=>{if(t.id===e.discussionId){let s=t.comments.map(t=>t.id===e.id?(0,i._)((0,n._)({},t),{contentRich:e.contentRich,isEdited:!0,updatedAt:new Date}):t);return(0,i._)((0,n._)({},t),{comments:s})}return t});ed.setOption(I.discussionPlugin,"discussions",t)},X[4]=ed,X[5]=x):x=X[5];let ep=x,{tf:eh}=(0,d.CF)(u),ex=eu===ee.userId,ef=ee.contentRich;X[6]!==ee.id||X[7]!==ef?(f={id:ee.id,value:ef},X[6]=ee.id,X[7]=ef,X[8]=f):f=X[8],X[9]!==ef?(v=[ef],X[9]=ef,X[10]=v):v=X[10];let ev=Y(f,v);X[11]!==ev.tf||X[12]!==ef||X[13]!==ea?(_=()=>{ea(null),ev.tf.replaceNodes(ef,{at:[],children:!0})},X[11]=ev.tf,X[12]=ef,X[13]=ea,X[14]=_):_=X[14];let eb=_;X[15]!==ee.discussionId||X[16]!==ee.id||X[17]!==ev.children||X[18]!==ea||X[19]!==ep?(j=()=>{ep({id:ee.id,contentRich:ev.children,discussionId:ee.discussionId,isEdited:!0}),ea(null)},X[15]=ee.discussionId,X[16]=ee.id,X[17]=ev.children,X[18]=ea,X[19]=ep,X[20]=j):j=X[20];let e_=j;X[21]!==ee.discussionId||X[22]!==em||X[23]!==eh.comment?(N=()=>{em(ee.discussionId),eh.comment.unsetMark({id:ee.discussionId})},X[21]=ee.discussionId,X[22]=em,X[23]=eh.comment,X[24]=N):N=X[24];let ej=N,eI=0===ei,eN=ei===et-1,ew=en&&en===ee.id,[ey,ek]=l.useState(!1),[eA,eP]=l.useState(!1);X[25]===Symbol.for("react.memo_cache_sentinel")?(A=()=>ek(!0),k=()=>ek(!1),X[25]=k,X[26]=A):(k=X[25],A=X[26]);let eC=null!=(t=ee.authorName)?t:null==ec?void 0:ec.name,eS=null==ec?void 0:ec.avatarUrl;X[27]!==eC||X[28]!==eS?(P=(0,a.jsx)(E,{alt:eC,src:eS}),X[27]=eC,X[28]=eS,X[29]=P):P=X[29];let eE=null!=(s=null!=(r=ee.authorInitials)?r:null==(m=ee.authorName)?void 0:m[0])?s:null==ec||null==(g=ec.name)?void 0:g[0];X[30]!==eE?(C=(0,a.jsx)(O,{children:eE}),X[30]=eE,X[31]=C):C=X[31],X[32]!==P||X[33]!==C?(D=(0,a.jsxs)(S,{className:"size-5",children:[P,C]}),X[32]=P,X[33]=C,X[34]=D):D=X[34];let eO=null!=(c=ee.authorName)?c:null==ec?void 0:ec.name;X[35]!==eO?(M=(0,a.jsx)("h4",{className:"mx-2 font-semibold text-sm leading-none",children:eO}),X[35]=eO,X[36]=M):M=X[36],X[37]!==ee.createdAt?(L=Z(new Date(ee.createdAt)),X[37]=ee.createdAt,X[38]=L):L=X[38],X[39]!==L?(z=(0,a.jsx)("span",{className:"mr-1",children:L}),X[39]=L,X[40]=z):z=X[40],X[41]!==ee.isEdited?(H=ee.isEdited&&(0,a.jsx)("span",{children:"(edited)"}),X[41]=ee.isEdited,X[42]=H):H=X[42],X[43]!==z||X[44]!==H?(T=(0,a.jsxs)("div",{className:"text-muted-foreground/80 text-xs leading-none",children:[z,H]}),X[43]=z,X[44]=H,X[45]=T):T=X[45],X[46]!==ee||X[47]!==ev.tf||X[48]!==et||X[49]!==eA||X[50]!==ey||X[51]!==ei||X[52]!==ex||X[53]!==ej||X[54]!==eg||X[55]!==ea||X[56]!==eh.comment?(U=ex&&(ey||eA)&&(0,a.jsxs)("div",{className:"absolute top-0 right-0 flex space-x-1",children:[0===ei&&(0,a.jsx)(b.$,{variant:"ghost",className:"h-6 p-1 text-muted-foreground",onClick:ej,type:"button",children:(0,a.jsx)(w.A,{className:"size-4"})}),(0,a.jsx)(Q,{onCloseAutoFocus:()=>{setTimeout(()=>{ev.tf.focus({edge:"endEditor"})},0)},onRemoveComment:()=>{1===et&&(eh.comment.unsetMark({id:ee.discussionId}),eg(ee.discussionId))},comment:ee,dropdownOpen:eA,setDropdownOpen:eP,setEditingId:ea})]}),X[46]=ee,X[47]=ev.tf,X[48]=et,X[49]=eA,X[50]=ey,X[51]=ei,X[52]=ex,X[53]=ej,X[54]=eg,X[55]=ea,X[56]=eh.comment,X[57]=U):U=X[57],X[58]!==D||X[59]!==M||X[60]!==T||X[61]!==U?(R=(0,a.jsxs)("div",{className:"relative flex items-center",children:[D,M,T,U]}),X[58]=D,X[59]=M,X[60]=T,X[61]=U,X[62]=R):R=X[62],X[63]!==et||X[64]!==es||X[65]!==eI||X[66]!==er?(F=eI&&er&&(0,a.jsxs)("div",{className:"relative mt-1 flex pl-[32px] text-sm text-subtle-foreground",children:[et>1&&(0,a.jsx)("div",{className:"absolute top-[5px] left-3 h-full w-0.5 shrink-0 bg-muted"}),(0,a.jsx)("div",{className:"my-px w-0.5 shrink-0 bg-highlight"}),es&&(0,a.jsx)("div",{className:"ml-2",children:es})]}),X[63]=et,X[64]=es,X[65]=eI,X[66]=er,X[67]=F):F=X[67],X[68]!==eN?(q=!eN&&(0,a.jsx)("div",{className:"absolute top-0 left-3 h-full w-0.5 shrink-0 bg-muted"}),X[68]=eN,X[69]=q):q=X[69];let eD=!ew;return X[70]!==el?(B=(0,a.jsx)(K.Editor,{variant:"comment",className:"w-auto grow",onClick:()=>null==el?void 0:el()}),X[70]=el,X[71]=B):B=X[71],X[72]!==ew||X[73]!==eb||X[74]!==e_?(V=ew&&(0,a.jsxs)("div",{className:"ml-auto flex shrink-0 gap-1",children:[(0,a.jsx)(b.$,{size:"icon",variant:"ghost",className:"size-[28px]",onClick:e=>{e.stopPropagation(),eb()},children:(0,a.jsx)("div",{className:"flex size-5 shrink-0 items-center justify-center rounded-[50%] bg-primary/40",children:(0,a.jsx)(y.A,{className:"size-3 stroke-[3px] text-background"})})}),(0,a.jsx)(b.$,{size:"icon",variant:"ghost",onClick:e=>{e.stopPropagation(),e_()},children:(0,a.jsx)("div",{className:"flex size-5 shrink-0 items-center justify-center rounded-[50%] bg-brand",children:(0,a.jsx)(w.A,{className:"size-3 stroke-[3px] text-background"})})})]}),X[72]=ew,X[73]=eb,X[74]=e_,X[75]=V):V=X[75],X[76]!==B||X[77]!==V?($=(0,a.jsxs)(K.EditorContainer,{variant:"comment",children:[B,V]}),X[76]=B,X[77]=V,X[78]=$):$=X[78],X[79]!==ev||X[80]!==eD||X[81]!==$?(W=(0,a.jsx)(d.T6,{readOnly:eD,editor:ev,children:$}),X[79]=ev,X[80]=eD,X[81]=$,X[82]=W):W=X[82],X[83]!==q||X[84]!==W?(G=(0,a.jsxs)("div",{className:"relative my-1 pl-[26px]",children:[q,W]}),X[83]=q,X[84]=W,X[85]=G):G=X[85],X[86]!==R||X[87]!==F||X[88]!==G?(J=(0,a.jsxs)("div",{onMouseEnter:A,onMouseLeave:k,children:[R,F,G]}),X[86]=R,X[87]=F,X[88]=G,X[89]=J):J=X[89],J}function Q(e){let t,s,r,c,u,m,g,p,h,x,f,v=(0,o.c)(27),{comment:_,dropdownOpen:j,setDropdownOpen:N,setEditingId:w,onCloseAutoFocus:y,onRemoveComment:k}=e,A=(0,d.Q_)(),P=l.useRef(!1);v[0]!==_.discussionId||v[1]!==_.id||v[2]!==A||v[3]!==k?(t=()=>{if(!_.id)return alert("You are operating too quickly, please try again later.");let e=A.getOption(I.discussionPlugin,"discussions").map(e=>{if(e.id!==_.discussionId)return e;let t=e.comments.findIndex(e=>e.id===_.id);return -1===t?e:(0,i._)((0,n._)({},e),{comments:[...e.comments.slice(0,t),...e.comments.slice(t+1)]})});A.setOption(I.discussionPlugin,"discussions",e),null==k||k()},v[0]=_.discussionId,v[1]=_.id,v[2]=A,v[3]=k,v[4]=t):t=v[4];let S=t;v[5]!==_.id||v[6]!==w?(s=()=>{if(P.current=!0,!_.id)return alert("You are operating too quickly, please try again later.");w(_.id)},v[5]=_.id,v[6]=w,v[7]=s):s=v[7];let E=s;return v[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(q.ty,{asChild:!0,onClick:$,children:(0,a.jsx)(b.$,{variant:"ghost",className:(0,C.cn)("h-6 p-1 text-muted-foreground"),children:(0,a.jsx)(H.A,{className:"size-4"})})}),v[8]=r):r=v[8],v[9]!==y?(c=e=>(P.current&&(null==y||y(),P.current=!1),e.preventDefault()),v[9]=y,v[10]=c):c=v[10],v[11]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)(T.A,{className:"size-4"}),v[11]=u):u=v[11],v[12]!==E?(m=(0,a.jsxs)(q._2,{onClick:E,children:[u,"Edit comment"]}),v[12]=E,v[13]=m):m=v[13],v[14]===Symbol.for("react.memo_cache_sentinel")?(g=(0,a.jsx)(U.A,{className:"size-4"}),v[14]=g):g=v[14],v[15]!==S?(p=(0,a.jsxs)(q._2,{onClick:S,children:[g,"Delete comment"]}),v[15]=S,v[16]=p):p=v[16],v[17]!==m||v[18]!==p?(h=(0,a.jsxs)(q.I,{children:[m,p]}),v[17]=m,v[18]=p,v[19]=h):h=v[19],v[20]!==c||v[21]!==h?(x=(0,a.jsx)(q.SQ,{className:"w-48",onCloseAutoFocus:c,children:h}),v[20]=c,v[21]=h,v[22]=x):x=v[22],v[23]!==j||v[24]!==N||v[25]!==x?(f=(0,a.jsxs)(q.rI,{open:j,onOpenChange:N,modal:!1,children:[r,x]}),v[23]=j,v[24]=N,v[25]=x,v[26]=f):f=v[26],f}function $(e){return e.stopPropagation()}let Y=(e,t)=>{let s,i,a,l,r=(0,o.c)(7);r[0]!==e?(s=void 0===e?{}:e,r[0]=e,r[1]=s):s=r[1];let c=s;r[2]!==t?(i=void 0===t?[]:t,r[2]=t,r[3]=i):i=r[3];let u=i;return r[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[4]=a):a=r[4],r[5]!==c?(l=(0,n._)({id:"comment",plugins:B.BasicMarksKit,value:a},c),r[5]=c,r[6]=l):l=r[6],(0,d.FI)(l,u)};function W(e){var t;let{autoFocus:s=!1,className:g,discussionId:p,focusOnMount:h=!1}=e,x=(0,d.gO)(I.discussionPlugin,"discussions"),f=(0,d.Q_)(),_=(()=>{let e,t=(0,o.c)(1);if(t[0]===Symbol.for("react.memo_cache_sentinel")){let s=(0,c.c)(1);s[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],s[0]=e):e=s[0],t[0]=e}else e=t[0];return(0,d.QR)(m,e)})(),j=null!=p?p:_,N=(0,d.gO)(I.discussionPlugin,"currentUser"),[w,y]=l.useState(),A=l.useMemo(()=>w?v.lZ.string({children:w,type:k.t.p}):"",[w]),P=Y();l.useEffect(()=>{P&&h&&P.tf.focus()},[P,h]);let D=l.useCallback(async()=>{if(!w)return;if(P.tf.reset(),j){let e=x.find(e=>e.id===j);if(!e){let e={id:j,comments:[{id:(0,F.Ak)(),contentRich:w,createdAt:new Date,discussionId:j,isEdited:!1,userId:f.getOption(I.discussionPlugin,"currentUserId")}],createdAt:new Date,isResolved:!1,userId:f.getOption(I.discussionPlugin,"currentUserId")};f.setOption(I.discussionPlugin,"discussions",[...x,e]);return}let t={id:(0,F.Ak)(),contentRich:w,createdAt:new Date,discussionId:j,isEdited:!1,userId:f.getOption(I.discussionPlugin,"currentUserId")},s=(0,i._)((0,n._)({},e),{comments:[...e.comments,t]}),a=x.filter(e=>e.id!==j).concat(s);f.setOption(I.discussionPlugin,"discussions",a);return}let e=f.getApi(u).comment.nodes({at:[],isDraft:!0});if(0===e.length)return;let t=e.map(e=>{let[t]=e;return t.text}).join(""),s=(0,F.Ak)(),a={id:s,comments:[{id:(0,F.Ak)(),contentRich:w,createdAt:new Date,discussionId:s,isEdited:!1,userId:f.getOption(I.discussionPlugin,"currentUserId")}],createdAt:new Date,documentContent:t,isResolved:!1,userId:f.getOption(I.discussionPlugin,"currentUserId")};f.setOption(I.discussionPlugin,"discussions",[...x,a]);let o=a.id;e.forEach(e=>{let[,t]=e;f.tf.setNodes({[(0,r.s)(o)]:!0},{at:t,split:!0}),f.tf.unsetNodes([(0,r.u)()],{at:t})})},[w,P.tf,j,f,x]);return(0,a.jsxs)("div",{className:(0,C.cn)("flex w-full",g),children:[(0,a.jsx)("div",{className:"mt-2 mr-1 shrink-0",children:(0,a.jsxs)(S,{className:"size-5",children:[(0,a.jsx)(E,{alt:null==N?void 0:N.name,src:null==N?void 0:N.avatarUrl}),(0,a.jsx)(O,{children:null==N||null==(t=N.name)?void 0:t[0]})]})}),(0,a.jsx)("div",{className:"relative flex grow gap-2",children:(0,a.jsx)(d.T6,{onChange:e=>{let{value:t}=e;y(t)},editor:P,children:(0,a.jsxs)(K.EditorContainer,{variant:"comment",children:[(0,a.jsx)(K.Editor,{variant:"comment",className:"min-h-[25px] grow pt-0.5 pr-8",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:"Reply...",autoComplete:"off",autoFocus:s}),(0,a.jsx)(b.$,{size:"icon",variant:"ghost",className:"absolute right-0.5 bottom-0.5 ml-auto size-6 shrink-0",disabled:0===A.trim().length,onClick:e=>{e.stopPropagation(),D()},children:(0,a.jsx)("div",{className:"flex size-6 items-center justify-center rounded-full",children:(0,a.jsx)(R.A,{})})})]})})})]})}let Z=e=>{let t=new Date,s=(0,D.o)(t,e),n=(0,M.M)(t,e),i=(0,L.c)(t,e);return s<60?"".concat(s,"m"):n<24?"".concat(n,"h"):i<2?"".concat(i,"d"):(0,z.GP)(e,"MM/dd/yyyy")},G="__block__",J={[k.t.audio]:()=>"Audio",[k.t.blockquote]:()=>"Blockquote",[k.t.callout]:()=>"Callout",[k.t.codeBlock]:()=>"Code Block",[k.t.column]:()=>"Column",[k.t.equation]:()=>"Equation",[k.t.file]:()=>"File",[k.t.h1]:()=>"Heading 1",[k.t.h2]:()=>"Heading 2",[k.t.h3]:()=>"Heading 3",[k.t.h4]:()=>"Heading 4",[k.t.h5]:()=>"Heading 5",[k.t.h6]:()=>"Heading 6",[k.t.hr]:()=>"Horizontal Rule",[k.t.img]:()=>"Image",[k.t.mediaEmbed]:()=>"Media",[k.t.p]:e=>(null==e?void 0:e[k.t.listType])===k.t.listTodo?"Todo List":(null==e?void 0:e[k.t.listType])===k.t.ol?"Ordered List":(null==e?void 0:e[k.t.listType])===k.t.ul?"List":"Paragraph",[k.t.table]:()=>"Table",[k.t.toc]:()=>"Table of Contents",[k.t.toggle]:()=>"Toggle",[k.t.video]:()=>"Video"};function X(e){var t;let s,n,i,r,c,u,m,h,x,f,v,_,j,N,k,A,P,C,D,M,L,z,H=(0,o.c)(71),{idx:T,isLast:U,suggestion:R}=e,{api:F,editor:q}=(0,d.CF)(p.I),B=(0,d.gO)(I.discussionPlugin,"user",R.userId);H[0]!==F.suggestion||H[1]!==q?(s=e=>{F.suggestion.withoutSuggestions(()=>{(0,g.i)(q,e)})},H[0]=F.suggestion,H[1]=q,H[2]=s):s=H[2];let K=s;H[3]!==F.suggestion||H[4]!==q?(n=e=>{F.suggestion.withoutSuggestions(()=>{(0,g.n)(q,e)})},H[3]=F.suggestion,H[4]=q,H[5]=n):n=H[5];let Q=n,[$,Y]=l.useState(!1),G=eo,[J,X]=l.useState(null),el="".concat(R.suggestionId,"-").concat(T);H[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>Y(!0),r=()=>Y(!1),H[6]=i,H[7]=r):(i=H[6],r=H[7]);let er=null==B?void 0:B.name,ed=null==B?void 0:B.avatarUrl;H[8]!==er||H[9]!==ed?(c=(0,a.jsx)(E,{alt:er,src:ed}),H[8]=er,H[9]=ed,H[10]=c):c=H[10];let ec=null==B||null==(t=B.name)?void 0:t[0];H[11]!==ec?(u=(0,a.jsx)(O,{children:ec}),H[11]=ec,H[12]=u):u=H[12],H[13]!==u||H[14]!==c?(m=(0,a.jsxs)(S,{className:"size-5",children:[c,u]}),H[13]=u,H[14]=c,H[15]=m):m=H[15];let eu=null==B?void 0:B.name;if(H[16]!==eu?(h=(0,a.jsx)("h4",{className:"mx-2 font-semibold text-sm leading-none",children:eu}),H[16]=eu,H[17]=h):h=H[17],H[18]!==R.createdAt?(x=Z(new Date(R.createdAt)),H[18]=R.createdAt,H[19]=x):x=H[19],H[20]!==x?(f=(0,a.jsx)("div",{className:"text-muted-foreground/80 text-xs leading-none",children:(0,a.jsx)("span",{className:"mr-1",children:x})}),H[20]=x,H[21]=f):f=H[21],H[22]!==m||H[23]!==h||H[24]!==f?(v=(0,a.jsxs)("div",{className:"relative flex items-center",children:[m,h,f]}),H[22]=m,H[23]=h,H[24]=f,H[25]=v):v=H[25],H[26]!==R.text||H[27]!==R.type?(_="remove"===R.type&&G(R.text).map(ea),H[26]=R.text,H[27]=R.type,H[28]=_):_=H[28],H[29]!==R.newText||H[30]!==R.type?(j="insert"===R.type&&G(R.newText).map(ei),H[29]=R.newText,H[30]=R.type,H[31]=j):j=H[31],H[32]!==R.newText||H[33]!==R.text||H[34]!==R.type?(N="replace"===R.type&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[G(R.newText).map(en),G(R.text).map(es)]}),H[32]=R.newText,H[33]=R.text,H[34]=R.type,H[35]=N):N=H[35],H[36]!==R.newProperties||H[37]!==R.newText||H[38]!==R.properties||H[39]!==R.type?(k="update"===R.type&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-muted-foreground text-sm",children:[Object.keys(R.properties).map(et),Object.keys(R.newProperties).map(ee)]}),(0,a.jsx)("span",{className:"text-sm",children:R.newText})]}),H[36]=R.newProperties,H[37]=R.newText,H[38]=R.properties,H[39]=R.type,H[40]=k):k=H[40],H[41]!==_||H[42]!==j||H[43]!==N||H[44]!==k?(A=(0,a.jsx)("div",{className:"relative mt-1 mb-4 pl-[32px]",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[_,j,N,k]})}),H[41]=_,H[42]=j,H[43]=N,H[44]=k,H[45]=A):A=H[45],H[46]!==J||H[47]!==R.comments){let e;H[49]!==J||H[50]!==R.comments.length?(e=(e,t)=>{var s;return(0,a.jsx)(V,{comment:e,discussionLength:R.comments.length,documentContent:"__suggestion__",editingId:J,index:t,setEditingId:X},null!=(s=e.id)?s:t)},H[49]=J,H[50]=R.comments.length,H[51]=e):e=H[51],P=R.comments.map(e),H[46]=J,H[47]=R.comments,H[48]=P}else P=H[48];return H[52]!==K||H[53]!==$||H[54]!==Q||H[55]!==R?(C=$&&(0,a.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2",children:[(0,a.jsx)(b.$,{variant:"ghost",className:"size-6 p-1 text-muted-foreground",onClick:()=>K(R),children:(0,a.jsx)(w.A,{className:"size-4"})}),(0,a.jsx)(b.$,{variant:"ghost",className:"size-6 p-1 text-muted-foreground",onClick:()=>Q(R),children:(0,a.jsx)(y.A,{className:"size-4"})})]}),H[52]=K,H[53]=$,H[54]=Q,H[55]=R,H[56]=C):C=H[56],H[57]!==R.suggestionId?(D=(0,a.jsx)(W,{discussionId:R.suggestionId}),H[57]=R.suggestionId,H[58]=D):D=H[58],H[59]!==v||H[60]!==A||H[61]!==P||H[62]!==C||H[63]!==D?(M=(0,a.jsxs)("div",{className:"flex flex-col p-4",children:[v,A,P,C,D]}),H[59]=v,H[60]=A,H[61]=P,H[62]=C,H[63]=D,H[64]=M):M=H[64],H[65]!==U?(L=!U&&(0,a.jsx)("div",{className:"h-px w-full bg-muted"}),H[65]=U,H[66]=L):L=H[66],H[67]!==M||H[68]!==L||H[69]!==el?(z=(0,a.jsxs)("div",{className:"relative",onMouseEnter:i,onMouseLeave:r,children:[M,L]},el),H[67]=M,H[68]=L,H[69]=el,H[70]=z):z=H[70],z}function ee(e){return(0,a.jsx)("span",{children:e.charAt(0).toUpperCase()+e.slice(1)},e)}function et(e){return(0,a.jsxs)("span",{children:["Un",e]},e)}function es(e,t){return(0,a.jsx)(l.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:0===t?"Replace:":"Delete:"}),(0,a.jsx)("span",{className:"text-sm",children:e||"line breaks"})]},t)},t)}function en(e,t){return(0,a.jsx)(l.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-start gap-2 text-brand/80",children:[(0,a.jsx)("span",{className:"text-sm",children:"with:"}),(0,a.jsx)("span",{className:"text-sm",children:e||"line breaks"})]},t)},t)}function ei(e,t){return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"Add:"}),(0,a.jsx)("span",{className:"text-sm",children:e||"line breaks"},t)]},t)}function ea(e,t){return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"Delete:"}),(0,a.jsx)("span",{className:"text-sm",children:e},t)]},t)}function eo(e){return e===G?["line breaks"]:e.split(G).filter(Boolean)}function el(e){return"update"===e.type}function er(e){return"update"===e.type}function ed(e){return e.id}function ec(e,t){let[,s]=e,[,n]=t;return v.s2.isChild(s,n)?-1:1}let eu=e=>{let{editor:t,element:s}=e,i=t.getApi(u).comment,o=t.api.findPath(s);if(!o||o.length>1)return;let l=i.node({at:o,isDraft:!0}),r=[...i.nodes({at:o})],d=[...t.getApi(p.I).suggestion.nodes({at:o})].filter(e=>{let[t]=e;return!t[(0,g._)()]});if(0!==r.length||0!==d.length||l)return e=>(0,a.jsx)(em,(0,n._)({blockPath:o,commentNodes:r,draftCommentNode:l,suggestionNodes:d},e))},em=e=>{let{blockPath:t,children:s,commentNodes:i,draftCommentNode:c,suggestionNodes:u}=e,m=(0,d.Q_)(),w=((e,t)=>{let s,i=(0,o.c)(8),a=(0,d.gO)(I.discussionPlugin,"discussions"),{api:l,editor:r,getOption:c,setOption:u}=(0,d.CF)(N.suggestionPlugin);if(e.forEach(e=>{let[s]=e,n=l.suggestion.nodeId(s),i=c("uniquePathMap");if(!n)return;let a=i.get(n);if(v.s2.isPath(a)){let e=l.suggestion.node({id:n,at:a,isText:!0}),s=l.node(a),r=null;if(s&&v.$7.isElement(s[0])){var o;r=null!=(o=l.suggestion.nodeId(s[0]))?o:null}e||r===n||u("uniquePathMap",new Map(i).set(n,t))}else u("uniquePathMap",new Map(i).set(n,t))}),i[0]!==l.suggestion||i[1]!==t||i[2]!==a||i[3]!==r.api||i[4]!==c||i[5]!==e){e:{let o=c("uniquePathMap");if(0===e.length){let e;i[7]===Symbol.for("react.memo_cache_sentinel")?(e=[],i[7]=e):e=i[7],s=e;break e}let d=new Set(e.flatMap(e=>{var t,s;let[n]=e;if(v.Qg.isText(n)){let e=l.suggestion.dataList(n);return e.some(el)?e.filter(er).map(ed):null!=(t=l.suggestion.nodeId(n))?t:[]}return v.$7.isElement(n)&&null!=(s=l.suggestion.nodeId(n))?s:[]}).filter(Boolean)),u=[];d.forEach(e=>{var s;if(!e)return;let i=o.get(e);if(!i||!v.s2.isPath(i)||!v.s2.equals(i,t))return;let d=[...r.api.nodes({at:[],mode:"all",match:t=>t[k.t.suggestion]&&t[(0,g.b)(e)]||l.suggestion.nodeId(t)===e})];d.sort(ec);let c="",m="",p={},h={};if(d.forEach(t=>{let[s]=t;if(v.Qg.isText(s))l.suggestion.dataList(s).forEach(t=>{if(t.id===e)switch(t.type){case"insert":c+=s.text;break;case"remove":m+=s.text;break;case"update":p=(0,n._)({},p,t.properties),h=(0,n._)({},h,t.newProperties),c+=s.text}});else{let t=l.suggestion.isBlockSuggestion(s)?s.suggestion:void 0;(null==t?void 0:t.id)===(0,g.k)(e)&&("insert"===t.type?c+=t.isLineBreak?G:G+J[s.type](s):"remove"===t.type&&(m+=t.isLineBreak?G:G+J[s.type](s)))}}),0===d.length)return;let x=l.suggestion.suggestionData(d[0][0]);if(!x)return;let f=(null==(s=a.find(t=>t.id===e))?void 0:s.comments)||[],b=new Date(x.createdAt),_=(0,g.b)(e);"update"===x.type?u.push({comments:f,createdAt:b,keyId:_,newProperties:h,newText:c,properties:p,suggestionId:(0,g.k)(e),type:"update",userId:x.userId}):c.length>0&&m.length>0?u.push({comments:f,createdAt:b,keyId:_,newText:c,suggestionId:(0,g.k)(e),text:m,type:"replace",userId:x.userId}):c.length>0?u.push({comments:f,createdAt:b,keyId:_,newText:c,suggestionId:(0,g.k)(e),type:"insert",userId:x.userId}):m.length>0&&u.push({comments:f,createdAt:b,keyId:_,suggestionId:(0,g.k)(e),text:m,type:"remove",userId:x.userId})}),s=u}i[0]=l.suggestion,i[1]=t,i[2]=a,i[3]=r.api,i[4]=c,i[5]=e,i[6]=s}else s=i[6];return s})(u,t),y=ep(i,t),A=w.length,P=y.length,C=A+P,S=(0,d.gO)(N.suggestionPlugin,"activeId"),E=S&&w.find(e=>e.suggestionId===S),O=(0,d.gO)(j.commentPlugin,"commentingBlock"),D=(0,d.gO)(j.commentPlugin,"activeId"),M=D===(0,r.u)(),L=D&&y.find(e=>e.id===D),z=!E&&!L,H=[...y,...w].sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime()),T=y.some(e=>e.id===D)||w.some(e=>e.suggestionId===S),[U,R]=l.useState(T),F=!!O&&v.s2.equals(t,O),q=U||T||M&&!!c&&F,B=l.useMemo(()=>{let e;return(E&&(e=u.find(e=>{let[t]=e;return v.Qg.isText(t)&&m.getApi(p.I).suggestion.nodeId(t)===E.suggestionId})),D&&(e=D===(0,r.u)()?c:i.find(e=>{let[t]=e;return m.getApi(j.commentPlugin).comment.nodeId(t)===D})),e)?m.api.toDOMNode(e[0]):null},[q,E,D,m.api,u,c,i]);return A+y.length!==0||c?(0,a.jsx)("div",{className:"flex w-full justify-between",children:(0,a.jsxs)(_.AM,{open:q,onOpenChange:e=>{!e&&M&&c&&m.tf.unsetNodes((0,r.u)(),{at:[],mode:"lowest",match:e=>e[(0,r.u)()]}),R(e)},children:[(0,a.jsx)("div",{className:"w-full",children:s}),B&&(0,a.jsx)(_.dT,{asChild:!0,className:"w-full",virtualRef:{current:B}}),(0,a.jsx)(_.hl,{className:"max-h-[min(50dvh,calc(-24px+var(--radix-popper-available-height)))] w-[380px] min-w-[130px] max-w-[calc(100vw-24px)] overflow-y-auto p-0 data-[state=closed]:opacity-0",onCloseAutoFocus:e=>e.preventDefault(),onOpenAutoFocus:e=>e.preventDefault(),align:"center",side:"bottom",children:M?(0,a.jsx)(W,{className:"p-4",focusOnMount:!0}):z?H.map((e,t)=>"suggestionId"in e?(0,a.jsx)(X,{idx:t,isLast:t===H.length-1,suggestion:e},e.suggestionId):(0,a.jsx)(eg,{discussion:e,isLast:t===H.length-1},e.id)):(0,a.jsxs)(a.Fragment,{children:[E&&(0,a.jsx)(X,{idx:0,isLast:!0,suggestion:E},E.suggestionId),L&&(0,a.jsx)(eg,{discussion:L,isLast:!0})]})}),C>0&&(0,a.jsx)("div",{className:"relative left-0 size-0 select-none",children:(0,a.jsx)(_.Wv,{asChild:!0,children:(0,a.jsxs)(b.$,{variant:"ghost",className:"!px-1.5 mt-1 ml-1 flex h-6 gap-1 py-0 text-muted-foreground/80 hover:text-muted-foreground/80 data-[active=true]:bg-muted","data-active":q,contentEditable:!1,children:[A>0&&0===P&&(0,a.jsx)(h.A,{className:"size-4 shrink-0"}),0===A&&P>0&&(0,a.jsx)(x.A,{className:"size-4 shrink-0"}),A>0&&P>0&&(0,a.jsx)(f.A,{className:"size-4 shrink-0"}),(0,a.jsx)("span",{className:"font-semibold text-xs",children:C})]})})})]})}):(0,a.jsx)("div",{className:"w-full",children:s})};function eg(e){let t,s,n,i,r,d=(0,o.c)(19),{discussion:c,isLast:u}=e,[m,g]=l.useState(null),p=c.id;if(d[0]!==c.comments||d[1]!==c.documentContent||d[2]!==m){let e;d[4]!==c.comments.length||d[5]!==c.documentContent||d[6]!==m?(e=(e,t)=>{var s;return(0,a.jsx)(V,{comment:e,discussionLength:c.comments.length,documentContent:null==c?void 0:c.documentContent,editingId:m,index:t,setEditingId:g,showDocumentContent:!0},null!=(s=e.id)?s:t)},d[4]=c.comments.length,d[5]=c.documentContent,d[6]=m,d[7]=e):e=d[7],t=c.comments.map(e),d[0]=c.comments,d[1]=c.documentContent,d[2]=m,d[3]=t}else t=d[3];return d[8]!==c.id?(s=(0,a.jsx)(W,{discussionId:c.id}),d[8]=c.id,d[9]=s):s=d[9],d[10]!==t||d[11]!==s?(n=(0,a.jsxs)("div",{className:"p-4",children:[t,s]}),d[10]=t,d[11]=s,d[12]=n):n=d[12],d[13]!==u?(i=!u&&(0,a.jsx)("div",{className:"h-px w-full bg-muted"}),d[13]=u,d[14]=i):i=d[14],d[15]!==c.id||d[16]!==n||d[17]!==i?(r=(0,a.jsxs)(l.Fragment,{children:[n,i]},p),d[15]=c.id,d[16]=n,d[17]=i,d[18]=r):r=d[18],r}let ep=(e,t)=>{let s,n,i=(0,o.c)(14),{api:a,getOption:l,setOption:r}=(0,d.CF)(j.commentPlugin),c=(0,d.gO)(I.discussionPlugin,"discussions"),u=ex,m=new Map(l("uniquePathMap")),g=!1;if(e.forEach(e=>{let[s]=e,n=u(s);0!==n.length&&n.forEach(e=>{let s=m.get(e);if(v.s2.isPath(s)){a.comment.node({id:e,at:s})||(m.set(e,t),g=!0);return}m.set(e,t),g=!0})}),g&&r("uniquePathMap",m),i[0]!==e){let t;i[2]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{let[t]=e;return u(t)},i[2]=t):t=i[2],s=new Set(e.flatMap(t)),i[0]=e,i[1]=s}else s=i[1];let p=s;if(i[3]!==a||i[4]!==t||i[5]!==p||i[6]!==c||i[7]!==l){let e;i[9]!==a||i[10]!==t||i[11]!==p||i[12]!==l?(e=e=>{let s=l("uniquePathMap").get(e.id);return!!s&&!!v.s2.equals(s,t)&&a.comment.has({id:e.id})&&p.has(e.id)&&!e.isResolved},i[9]=a,i[10]=t,i[11]=p,i[12]=l,i[13]=e):e=i[13],n=c.map(ef).filter(e),i[3]=a,i[4]=t,i[5]=p,i[6]=c,i[7]=l,i[8]=n}else n=i[8];return n};function eh(e){return!!e&&"draft"!==e}function ex(e){return(0,r.a)(e).map(r.o).filter(eh)}function ef(e){return(0,i._)((0,n._)({},e),{createdAt:new Date(e.createdAt)})}}}]);